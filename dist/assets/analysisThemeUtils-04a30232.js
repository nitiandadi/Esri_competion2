import{i as V}from"./viewUtils-653374a2.js";import{b as T,g9 as X,ga as g,gb as Y,gc as Z,es as _,gd as tt,ge as E,bg as F}from"./MapView-d4248bee.js";import{u as nt}from"./colorUtils-a4bfffd5.js";const Mt={readOnly:!0,get(){return V(this.view)}};function I(t){if(!t)return null;if(Y(t)&&t.wkid){const n=Z[t.wkid];if(n)return n}if(t.wkt){const n=st(t.wkt);if(n)return n}return null}function st(t){const n=tt.exec(t);if(!n||n.length!==2)return null;const s=n[1].split(",");if(!s||s.length<3)return null;const a=parseFloat(s[1]),e=parseFloat(s[2]);return isNaN(a)||isNaN(e)?null:{a,f:e===0?0:1/e}}function at(t){const n=I(t??_.WGS84);if(et(n))return n;const s=n.a*(1-n.f);return Object.assign(n,{b:s,eSq:1-(s/n.a)**2,radius:(2*n.a+s)/3,densificationRatio:1e4/((2*n.a+s)/3)})}function et(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function it(t){return I(t)!==null}function dt(t,n="meters"){if(!t)throw new T("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(a=>!it(a.spatialReference)))throw new T("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const s=[];for(let a=0;a<t.length;a++){const e=t[a],{spatialReference:p}=e,w=e.type==="polyline"?e.paths:e.rings;let r=0;for(let v=0;v<w.length;v++){const o=w[v];let f=0;for(let M=1;M<o.length;M++){const b=o[M-1][0],z=o[M][0],y=o[M-1][1],u=o[M][1];if(y!==u||b!==z){const c=new rt;ot(c,[b,y],[z,u],p),f+=c.distance}}r+=f}r=X(r,"meters",n),s.push(r)}return s}class rt{constructor(n=0,s,a){this.distance=n,this.azimuth=s,this.reverseAzimuth=a}}function ot(t,n,s,a){const e=n[0]*g,p=n[1]*g,w=s[0]*g,r=s[1]*g,{a:v,b:o,f,radius:M}=at(a),b=w-e,z=Math.atan((1-f)*Math.tan(p)),y=Math.atan((1-f)*Math.tan(r)),u=Math.sin(z),c=Math.cos(z),$=Math.sin(y),h=Math.cos(y);let j,N,d,i,k,S,A,q,x,R,G=1e3,l=b;do{if(A=Math.sin(l),q=Math.cos(l),d=Math.sqrt(h*A*(h*A)+(c*$-u*h*q)*(c*$-u*h*q)),d===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;k=u*$+c*h*q,S=Math.atan2(d,k),x=c*h*A/d,N=1-x*x,i=k-2*u*$/N,isNaN(i)&&(i=0),R=f/16*N*(4+f*(4-3*N)),j=l,l=b+(1-R)*f*x*(S+R*d*(i+R*k*(2*i*i-1)))}while(Math.abs(l-j)>1e-12&&--G>0);if(G===0){const H=M,J=Math.acos(Math.sin(p)*Math.sin(r)+Math.cos(p)*Math.cos(r)*Math.cos(w-e))*H,O=w-e,K=Math.sin(O)*Math.cos(r),L=Math.cos(p)*Math.sin(r)-Math.sin(p)*Math.cos(r)*Math.cos(O),Q=Math.atan2(K,L);return t.azimuth=Q/g,t.distance=J,t.reverseAzimuth=void 0,t}const m=N*(v*v-o*o)/(o*o),C=m/1024*(256+m*(m*(74-47*m)-128)),W=o*(1+m/16384*(4096+m*(m*(320-175*m)-768)))*(S-C*d*(i+C/4*(k*(2*i*i-1)-C/6*i*(4*d*d-3)*(4*i*i-3)))),B=Math.atan2(h*Math.sin(l),c*$-u*h*Math.cos(l)),D=Math.atan2(c*Math.sin(l),c*$*Math.cos(l)-u*h);return t.azimuth=B/g,t.distance=W,t.reverseAzimuth=D/g,t}function P(t,n){const s=t.a*n;return nt(t)>225?new F([0,0,0,s]):new F([255,255,255,s])}function U(t,n){const s=new F(t);return s.a*=n,s}function ct(t=1){return U(E.analysisTheme.accentColor,t)}function mt(t=1){return P(ct(),t)}function ut(t=1){return U(E.analysisTheme.textColor,t)}function pt(t=1){return P(ut(),t)}export{it as M,ot as b,ut as c,Mt as e,ct as i,pt as s,mt as u,rt as v,dt as y};
