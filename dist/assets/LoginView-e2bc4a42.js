var F=Object.defineProperty;var b=(e,o,t)=>o in e?F(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var f=(e,o,t)=>(b(e,typeof o!="symbol"?o+"":o,t),t);import{a as w}from"./axios-760d4776.js";import{d as h,a2 as v,b as V,ad as B,h as y,_ as C,e as m,a as I,c as S,f as _,g as r,w as a,v as k,p as R,i as $}from"./index-9ba3f23e.js";class D{constructor(){f(this,"ruleForm",{email:"",password:""})}}const L="/api",i=w.create({baseURL:L,timeout:5e3,headers:{"Content-type":"application/json;charset=utf-8"}});i.interceptors.request.use(e=>(e.headers=e.headers||{},localStorage.getItem("token")&&(e.headers.token=localStorage.getItem("token")||""),e));i.interceptors.response.use(({data:e})=>e,e=>{console.log(e)});console.log(i);function q(e){return console.log(e),i({url:"/users/login",method:"POST",data:e})}const x=h({setup(){const e=v(new D),o=y(),t={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:5,message:"用户名长度需要在3-5个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:6,message:"密码长度需要在3-5个字符之间",trigger:"blur"}]},p=V(),d=()=>{e.ruleForm.email="",e.ruleForm.password=""},c=s=>{s&&s.validate(l=>{if(l)console.log(e.ruleForm),q(e.ruleForm).then(u=>{console.log(u),localStorage.setItem("Authorization","Bearer "+u[0]),console.log("登录成功"),o.push("/")});else return console.log("error submit!"),!1})};return{...B(e),rules:t,resetForm:d,submitForm:c,ruleFormRef:p}}});const N=e=>(R("data-v-a64b61a8"),e=e(),$(),e),U={class:"login"},E={class:"form-cls"},T=N(()=>_("h2",null,"欢迎登录青海巡",-1));function j(e,o,t,p,d,c){const s=m("el-input"),l=m("el-form-item"),u=m("el-button"),g=m("el-form");return I(),S("div",U,[_("div",E,[r(g,{ref:"ruleFormRef",model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"70px"},{default:a(()=>[T,r(l,{label:"用户名:",prop:"email"},{default:a(()=>[r(s,{modelValue:e.ruleForm.email,"onUpdate:modelValue":o[0]||(o[0]=n=>e.ruleForm.email=n),type:"text",autocomplete:"off",class:"input"},null,8,["modelValue"])]),_:1}),r(l,{label:"密码:",prop:"password"},{default:a(()=>[r(s,{modelValue:e.ruleForm.password,"onUpdate:modelValue":o[1]||(o[1]=n=>e.ruleForm.password=n),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),r(l,null,{default:a(()=>[r(u,{class:"login-btn",type:"primary",onClick:o[2]||(o[2]=n=>e.submitForm(e.ruleFormRef))},{default:a(()=>[k("登录")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}const P=C(x,[["render",j],["__scopeId","data-v-a64b61a8"]]);export{P as default};
