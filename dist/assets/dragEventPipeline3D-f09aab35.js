import{gp as h,b$ as m,gM as R,hl as $,hm as E,r as u,hn as b,t as T,bZ as x,b_ as y,c4 as I,bY as g,ho as D,cE as N,gj as S}from"./MapView-d4248bee.js";function M(e,t){return G(e,()=>t)}function G(e,t){const n=g(),p=g();let o=!1;return s=>{const i=t(s);if(s.action==="start"){const a=m(s.screenStart,R($.get())),r=E(e.state.camera,a,O);u(r)&&(o=b(i,r,n))}if(!o)return null;const f=m(s.screenEnd,R($.get())),c=E(e.state.camera,f,O);return T(c)?null:b(i,c,p)?{...s,renderStart:n,renderEnd:p,plane:i,ray:c}:null}}var d;function U(e){let t=null;return n=>{switch(n.action){case"start":t=e.disableDisplay();break;case"end":case"cancel":u(t)&&(t.remove(),t=null)}return n}}function v(e,t=null){const n=x(e.state.viewingMode);n.options.selectionMode=!0,n.options.store=y.MIN,n.options.hud=!1;const p=S(),o={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},s=g(),i=I(t,e.spatialReference),f=a=>{e.map.ground&&e.map.ground.opacity<1?o.exclude.add(D):o.exclude.delete(D),e.sceneIntersectionHelper.intersectIntersectorScreen(m(a,p),n,o);const r=n.results.min;let l;if(r.getIntersectionPoint(s))l=r.intersector===N.TERRAIN?d.GROUND:d.OTHER;else{if(!n.results.ground.getIntersectionPoint(s))return null;l=d.GROUND}return{location:e.renderCoordsHelper.fromRenderCoords(s,i),surfaceType:l}};let c;return a=>{if(a.action==="start"){const l=f(a.screenStart);c=u(l)?l.location:null}if(T(c))return null;const r=f(a.screenEnd);return u(r)&&u(r.location)?{...a,mapStart:c,mapEnd:r.location,surfaceType:r.surfaceType}:null}}(function(e){e[e.GROUND=0]="GROUND",e[e.OTHER=1]="OTHER"})(d||(d={}));const O=h();export{v as B,M as C,U as z};
