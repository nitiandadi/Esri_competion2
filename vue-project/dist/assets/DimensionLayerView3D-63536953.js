import{l as c}from"./index-93a23f67.js";import{e as t,y as n,b as w,r as e,h as V,c9 as h,p as d,E as u,c as p,cx as _,av as m,c8 as v,t as A,cy as f}from"./mapviewstore-8a6f290e.js";import{n as D}from"./LayerView3D-5ca1a46f.js";import{u as T}from"./LayerView-1a71a07c.js";const k=a=>{let s=class extends a{constructor(...i){super(...i),this.layer=null}get interactive(){return!!e(this.analysisView)&&this.analysisView.interactive}set interactive(i){e(this.analysisView)&&(this.analysisView.interactive=i)}get results(){return e(this.analysisView)?this.analysisView.results:new V}get selectedDimension(){return e(this.analysisView)?this.analysisView.selectedDimension:null}set selectedDimension(i){e(this.analysisView)&&(this.analysisView.selectedDimension=i)}async createLengthDimensions(i){if(!e(this.analysisView))throw h();await this.analysisView.createLengthDimensions(i)}};return t([n()],s.prototype,"layer",void 0),t([n()],s.prototype,"interactive",null),t([n({readOnly:!0})],s.prototype,"results",null),t([n()],s.prototype,"selectedDimension",null),t([n()],s.prototype,"analysisView",void 0),s=t([w("esri.views.layers.DimensionLayerView")],s),s},y="analysis-view-handles";let l=class extends D(k(T)){constructor(a){super(a),this.type="dimension-3d",this._analysisModule=null}initialize(){this.handles.add(d(()=>this.layer.source,a=>{this._destroyAnalysisView(),e(a)&&this._createAnalysisView(a)},u),y)}destroy(){this.handles.remove(y),this._destroyAnalysisView()}isUpdating(){return e(this._createAnalysisViewTask)||e(this.analysisView)&&this.analysisView.updating}async whenAnalysisView(){if(e(this.analysisView))return this.analysisView;if(e(this._createAnalysisViewTask))return this._createAnalysisViewTask.promise;throw new p("layerview:no-analysisview-for-analysis","The analysis has not been set on the DimensionLayer of this layer view")}_createAnalysisView(a){const s=_(async i=>(this.analysisView=await this._createAnalysisViewPromise(a,i),this._createAnalysisViewTask===s&&(this._createAnalysisViewTask=null),this.analysisView));this.addResolvingPromise(s.promise),this._createAnalysisViewTask=s}_destroyAnalysisView(){this.analysisView=m(this.analysisView),this._createAnalysisViewTask=v(this._createAnalysisViewTask)}async _createAnalysisViewPromise(a,s){let i=this._analysisModule;if(A(i)){const o=await this._loadAnalysisModule();this._analysisModule=o,i=o}const r=new i.default({analysis:a,view:this.view,parent:this});if(await r.when(),f(s))throw r.destroy(),h();return r}_loadAnalysisModule(){return c(()=>import("./DimensionAnalysisView3D-13c4a6d2.js"),["assets/DimensionAnalysisView3D-13c4a6d2.js","assets/mapviewstore-8a6f290e.js","assets/index-93a23f67.js","assets/index-2d69a2d2.css","assets/AnalysisView3D-cc96cd7b.js","assets/LengthDimension-5b1ff216.js","assets/getDefaultUnitForView-09ed9ab9.js","assets/quantityFormatUtils-6059fd77.js","assets/Segment-07134633.js","assets/VisualElement-cf195c8c.js","assets/viewUtils-4b1f07e9.js","assets/elevationInfoUtils-db1a4384.js","assets/TextOverlayItem-0a39aaf7.js","assets/euclideanLengthMeasurementUtils-a4a01115.js","assets/measurementUtils-834d1f5d.js","assets/manipulatorUtils-6039567a.js","assets/ImageMaterial-86134e3a.js","assets/dragEventPipeline3D-cb32ecbd.js","assets/InteractiveToolBase-0db68d23.js","assets/drawUtils-04a6e6ca.js","assets/SceneSnappingManagerPool-06fb7178.js","assets/SnappingManager-e678da87.js","assets/QueryEngineResult-555e15c4.js","assets/WhereClause-1d488167.js","assets/executionError-fb3f283a.js","assets/utils-da1501b7.js","assets/ClassBreaksDefinition-e0623088.js","assets/projectionSupport-2ac8e0ed.js","assets/json-48e3ea08.js","assets/utils-756c69af.js","assets/geometry2dUtils-3b519363.js","assets/Factory-4952d2db.js","assets/SnappingVisualizer3D-65e3df3f.js","assets/RightAngleQuadVisualElement-51086ef2.js","assets/VisualElementResources-219837dc.js","assets/PointVisualElement-e48a1b74.js","assets/SnappingContext-3f11e741.js","assets/PointSnappingHint-65883099.js","assets/LineVisualElement-edc641a4.js","assets/VerticesVisualElement-8ea8fef8.js","assets/EditGeometryOperations-03e088f6.js","assets/SnappingOperation-f7fee6c6.js","assets/dehydratedFeatureComparison-baf6aa6d.js","assets/AnalysisToolBase-c24b1232.js","assets/RenderTexture-da0df617.js","assets/analysisViewUtils-c748d7fc.js"])}};t([n()],l.prototype,"type",void 0),t([n()],l.prototype,"analysisView",void 0),t([n()],l.prototype,"_createAnalysisViewTask",void 0),l=t([w("esri.views.3d.layers.DimensionLayerView3D")],l);const P=l;export{P as default};
