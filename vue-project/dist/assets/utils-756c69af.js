import{l as A}from"./index-93a23f67.js";import{b8 as N,fY as U,g5 as G,eA as E,t as R,g6 as v,g7 as J,g8 as q,ca as z,cb as B,g9 as Z,fQ as k,g3 as P,ga as _,r as j,gb as C,gc as g,gd as I,ge as S,gf as y,gg as K,gh as V,gi as D}from"./mapviewstore-8a6f290e.js";import{f as F,g as M}from"./projectionSupport-2ac8e0ed.js";const L=new N({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),x=Object.freeze({}),$=new S,Q=new S,p=new S,l={esriGeometryPoint:y,esriGeometryPolyline:K,esriGeometryPolygon:V,esriGeometryMultipoint:D};function nt(t,a,r,n=t.hasZ,e=t.hasM){if(R(a))return null;const o=t.hasZ&&n,s=t.hasM&&e;if(r){const i=g(p,a,t.hasZ,t.hasM,"esriGeometryPoint",r,n,e);return y(i,o,s)}return y(a,o,s)}function at(t,a,r,n,e,o,s=a,i=r){var w,d,h;const u=a&&s,c=r&&i,f=j(n)?"coords"in n?n:n.geometry:null;if(R(f))return null;if(e){let m=C(Q,f,a,r,t,e,s,i);return o&&(m=g(p,m,u,c,t,o)),((w=l[t])==null?void 0:w.call(l,m,u,c))??null}if(o){const m=g(p,f,a,r,t,o,s,i);return((d=l[t])==null?void 0:d.call(l,m,u,c))??null}return I($,f,a,r,s,i),((h=l[t])==null?void 0:h.call(l,$,u,c))??null}async function rt(t,a,r){const{outFields:n,orderByFields:e,groupByFieldsForStatistics:o,outStatistics:s}=t;if(n)for(let i=0;i<n.length;i++)n[i]=n[i].trim();if(e)for(let i=0;i<e.length;i++)e[i]=e[i].trim();if(o)for(let i=0;i<o.length;i++)o[i]=o[i].trim();if(s)for(let i=0;i<s.length;i++)s[i].onStatisticField&&(s[i].onStatisticField=s[i].onStatisticField.trim());return t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),T(t,a,r)}async function T(t,a,r){var o;if(!t)return null;let{where:n}=t;if(t.where=n=n&&n.trim(),(!n||/^1 *= *1$/.test(n)||a&&a===n)&&(t.where=null),!t.geometry)return t;let e=await Y(t);if(t.distance=0,t.units=null,t.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:s}=t.geometry;e=U(e),e.spatialReference=s}if(e){await F(e.spatialReference,r),e=X(e,r);const s=(await G(E(e)))[0];if(R(s))throw x;const i="quantizationParameters"in t&&((o=t.quantizationParameters)==null?void 0:o.tolerance)||"maxAllowableOffset"in t&&t.maxAllowableOffset||0,u=i&&O(e,r)?{densificationStep:8*i}:void 0,c=s.toJSON(),f=await M(c,c.spatialReference,r,u);if(!f)throw x;f.spatialReference=r,t.geometry=f}return t}function O(t,a){if(!t)return!1;const r=t.spatialReference;return(v(t)||J(t)||q(t))&&!z(r,a)&&!B(r,a)}function X(t,a){const r=t.spatialReference;return O(t,a)&&v(t)?{spatialReference:r,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:t}async function Y(t){const{distance:a,units:r}=t,n=t.geometry;if(a==null||"vertexAttributes"in n)return n;const e=n.spatialReference,o=r?L.fromJSON(r):Z(e),s=e&&(k(e)||P(e))?n:await F(e,_).then(()=>M(n,_));return(await H())(s.spatialReference,s,a,o)}async function H(){return(await A(()=>import("./geometryEngineJSON-1e940afe.js"),["assets/geometryEngineJSON-1e940afe.js","assets/geometryEngineBase-e1a33b0a.js","assets/geometryEngineJSON-3f330436.js","assets/json-48e3ea08.js"])).geodesicBuffer}function st(t){return t&&b in t?JSON.parse(JSON.stringify(t,W)):t}const b="_geVersion",W=(t,a)=>t!==b?a:void 0;export{st as E,x as F,T as J,nt as b,at as v,rt as z};
