import{e as o,y as m,b as g,v as gt,f as nt,W as I,b7 as z,cg as yt,n,aK as wt,r as u,t as Tt,p as C,E,A as at,av as ot,aJ as Lt,fQ as Mt,g3 as xt,hw as rt,cq as x,ca as zt,wr as Ct}from"./mapviewstore-8a6f290e.js";import{x as lt,F as Et,S as kt,k as Ot,z as Rt,c as ut,q as Ht,a as _}from"./quantityFormatUtils-6059fd77.js";import{i as Nt}from"./getDefaultUnitForView-09ed9ab9.js";import{h as vt,p as mt,R as M,d as R,j as Pt}from"./euclideanLengthMeasurementUtils-a4a01115.js";import{geodesicLength as ft}from"./geometryEngine-31bba3a2.js";import{M as St,b as J,y as Vt,v as Wt}from"./geodesicUtils-0ed15d7f.js";let w=class extends gt{constructor(t){super(t),this.helpMessage=void 0}};o([m()],w.prototype,"tooltipOptions",void 0),o([m()],w.prototype,"helpMessage",void 0),w=o([g("esri.views.interactive.tooltip.SketchTooltipInfo")],w);const b="esri-tooltip",l=`${b}-content`,Ut=`${b}-table`,At=`${b}-help-message`;let h=class extends I{get _units(){const t=Nt(this.tooltip.view);return{length:t,verticalLength:t,area:t}}_getHelpMessage(t){var tt,et,st,it;const{info:e}=this,{tooltipOptions:i,helpMessage:a,viewType:c}=e,p=(tt=i==null?void 0:i.visibleElements)==null?void 0:tt.helpMessage,v=t??a,bt=c==="3d"?"helpMessages3d":"helpMessages2d";return p&&v?(it=(st=(et=this._messagesTooltip)==null?void 0:et.sketch)==null?void 0:st[bt])==null?void 0:it[v]:void 0}_formatScale(t){return z(t,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(t){return z(t,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(t,e,i){return lt(this._messagesUnits,t,yt(e,this._units.length),i)}_formatRelativeLength(t){return Et(this._messagesUnits,t,this._units.length)}_formatVerticalLength(t){return kt(this._messagesUnits,t,this._units.verticalLength)}_formatRelativeVerticalLength(t){return Ot(this._messagesUnits,t,this._units.verticalLength)}_formatTotalLength(t){return lt(this._messagesUnits,t,this._units.length)}_formatArea(t){return Rt(this._messagesUnits,t,this._units.area)}_formatPercentage(t){return z(t.value,{style:"percent"})}};o([m()],h.prototype,"info",void 0),o([m()],h.prototype,"tooltip",void 0),o([m()],h.prototype,"_units",null),o([nt("esri/core/t9n/Units"),m()],h.prototype,"_messagesUnits",void 0),o([nt("esri/views/interactive/tooltip/t9n/Tooltip"),m()],h.prototype,"_messagesTooltip",void 0),h=o([g("esri.views.interactive.tooltip.content.TooltipContent")],h);function f({className:s,helpMessage:t},...e){const i=e.filter(a=>!!a);return n("div",{class:wt(s,l)},i.length>0?n("div",{class:Ut},...i):null,t?n("div",{key:"help-message",class:At},t):null)}const k=`${b}-field`,O={base:k,title:`${k}__title`,value:`${k}__value`};let r=class extends I{render(){return n("div",{class:O.base},n("div",{class:O.title},this.title),n("div",{class:O.value},this.value))}};o([m()],r.prototype,"title",void 0),o([m()],r.prototype,"value",void 0),r=o([g("esri.views.interactive.tooltip.support.TooltipField")],r);const Dt={base:`${b}-value-by-value`};let d=class extends I{constructor(){super(...arguments),this.divider="Ã—"}render(){return n("div",{class:Dt.base},n("span",null,this.left),n("span",null,this.divider),n("span",null,this.right))}};o([m()],d.prototype,"left",void 0),o([m()],d.prototype,"divider",void 0),o([m()],d.prototype,"right",void 0),d=o([g("esri.views.interactive.tooltip.support.ValueByValue")],d);const Zt={base:`${l} ${`${l}--draw-rectangle`}`};let H=class extends h{render(){const{area:t,radius:e,xSize:i,ySize:a,tooltipOptions:c}=this.info,{visibleElements:p}=c,v=this._messagesTooltip.sketch;return n(f,{className:Zt.base,helpMessage:this._getHelpMessage()},p.radius&&u(e)&&n(r,{title:v.radius,value:this._formatLength(e)}),p.size&&u(i)&&u(a)&&n(r,{title:v.size,value:n(d,{left:this._formatLength(i),right:this._formatLength(a)})}),p.area&&n(r,{title:v.area,value:this._formatArea(t)}))}};H=o([g("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],H);const Ft={base:`${l}--draw-point`};let N=class extends h{render(){const{elevation:t,tooltipOptions:e}=this.info,{visibleElements:i}=e,a=this._messagesTooltip.sketch;return n(f,{className:Ft.base,helpMessage:this._getHelpMessage()},i.elevation&&n(r,{title:a.elevation,value:this._formatVerticalLength(t)}))}};N=o([g("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],N);const jt={base:`${l} ${`${l}--draw-polygon`}`};let P=class extends h{render(){const{area:t,elevation:e,tooltipOptions:i,viewType:a}=this.info,{visibleElements:c}=i,p=this._messagesTooltip.sketch;return n(f,{className:jt.base,helpMessage:this._getHelpMessage()},c.elevation&&a!=="2d"&&n(r,{title:p.elevation,value:this._formatVerticalLength(e)}),c.area&&n(r,{title:p.area,value:this._formatArea(t)}))}};P=o([g("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],P);const qt={base:`${l} ${`${l}--draw-polyline`}`};let S=class extends h{render(){const{elevation:t,totalLength:e,tooltipOptions:i,viewType:a}=this.info,{visibleElements:c}=i,p=this._messagesTooltip.sketch;return n(f,{className:qt.base,helpMessage:this._getHelpMessage()},c.elevation&&a!=="2d"&&n(r,{title:p.elevation,value:this._formatVerticalLength(t)}),c.totalLength&&n(r,{title:p.totalLength,value:this._formatLength(e)}))}};S=o([g("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],S);const Gt={base:`${l} ${`${l}--draw-rectangle`}`};let V=class extends h{render(){const{area:t,xSize:e,ySize:i,tooltipOptions:a}=this.info,{visibleElements:c}=a,p=this._messagesTooltip.sketch;return n(f,{className:Gt.base,helpMessage:this._getHelpMessage()},c.size&&u(e)&&u(i)&&n(r,{title:p.size,value:n(d,{left:this._formatLength(e),right:this._formatLength(i)})}),c.area&&n(r,{title:p.area,value:this._formatArea(t)}))}};V=o([g("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],V);const Xt={base:`${l} ${`${l}--extent-rotate`}`};let W=class extends h{render(){const{angle:t,tooltipOptions:e}=this.info,{visibleElements:i}=e,a=this._messagesTooltip.sketch;return n(f,{className:Xt.base,helpMessage:this._getHelpMessage()},i.rotation&&n(r,{title:a.rotation,value:this._formatRelativeOrientation(t)}))}};W=o([g("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],W);const Yt={base:`${l} ${`${l}--extent-scale`}`};let U=class extends h{render(){const t=this.info,{visibleElements:e}=t.tooltipOptions,i=this._messagesTooltip.sketch;return n(f,{className:Yt.base,helpMessage:this._getHelpMessage()},e.size&&n(r,{title:i.size,value:n(d,{left:this._formatLength(t.xSize),right:this._formatLength(t.ySize)})}),e.scale&&n(r,{title:i.scale,value:n(d,{left:this._formatScale(t.xScale),right:this._formatScale(t.yScale)})}))}};U=o([g("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],U);const Bt={base:`${l} ${`${l}--reshape-edge-offset`}`};let A=class extends h{render(){const{area:t,distance:e,totalLength:i,tooltipOptions:a}=this.info,{visibleElements:c}=a,p=this._messagesTooltip.sketch;return n(f,{className:Bt.base,helpMessage:this._getHelpMessage()},c.distance&&n(r,{title:p.distance,value:this._formatRelativeLength(e)}),c.area&&u(t)&&n(r,{title:p.area,value:this._formatArea(t)}),c.totalLength&&u(i)&&n(r,{title:p.totalLength,value:this._formatLength(i)}))}};A=o([g("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],A);const It={base:`${l} ${`${l}--transform-absolute`}`};let D=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,i=this._messagesTooltip.sketch;return n(f,{className:It.base,helpMessage:this._getHelpMessage()},e.orientation&&t.orientationEnabled&&n(r,{title:i.orientation,value:ut(t.orientation,t.rotationType,t.orientationPrecision)}),e.size&&t.sizeEnabled&&n(r,{title:i.size,value:this._formatLength(t.size,t.sizeUnit,t.sizePrecision)}))}};D=o([g("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],D);const Jt={base:`${l} ${`${l}--transform-rotate`}`};let Z=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,i=this._messagesTooltip.sketch;return n(f,{className:Jt.base,helpMessage:this._getHelpMessage()},e.rotation&&n(r,{title:i.rotation,value:Ht(t.rotation,t.rotationType,t.rotationPrecision)}),e.orientation&&n(r,{title:i.orientation,value:ut(t.orientation,t.rotationType,t.orientationPrecision)}))}};Z=o([g("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],Z);const Kt={base:`${l} ${`${l}--transform-scale`}`};let F=class extends h{render(){const{scale:t,size:e,sizePrecision:i,sizeUnit:a,tooltipOptions:c}=this.info,{visibleElements:p}=c,v=this._messagesTooltip.sketch;return n(f,{className:Kt.base,helpMessage:this._getHelpMessage()},p.scale&&n(r,{title:v.scale,value:this._formatPercentage(t)}),p.size&&n(r,{title:v.size,value:this._formatLength(e,a,i)}))}};F=o([g("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],F);const Qt={base:`${l} ${`${l}--translate-graphic`}`};let j=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,i=this._messagesTooltip.sketch;return n(f,{className:Qt.base,helpMessage:this._getHelpMessage()},e.distance&&n(r,{title:i.distance,value:this._formatLength(t.distance)}))}};j=o([g("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphic")],j);const te={base:`${l} ${`${l}--translate-graphic-xy`}`};let q=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,i=this._messagesTooltip.sketch;return n(f,{className:te.base,helpMessage:this._getHelpMessage()},e.distance&&n(r,{title:i.distance,value:this._formatRelativeLength(t.distance)}))}};q=o([g("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicXY")],q);const ee={base:`${l} ${`${l}--translate-graphic-z`}`};let G=class extends h{render(){const{info:s}=this,{visibleElements:t}=s.tooltipOptions,e=this._messagesTooltip.sketch;return n(f,{className:ee.base,helpMessage:this._getHelpMessage()},t.distance&&n(r,{title:e.distance,value:this._formatRelativeVerticalLength(s.distance)}))}};G=o([g("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicZ")],G);const se={base:`${l} ${`${l}--translate-vertex`}`};let X=class extends h{render(){const{distance:t,elevation:e,area:i,totalLength:a,tooltipOptions:c}=this.info,{visibleElements:p}=c,v=this._messagesTooltip.sketch;return n(f,{className:se.base,helpMessage:this._getHelpMessage()},p.distance&&n(r,{title:v.distance,value:this._formatLength(t)}),p.elevation&&u(e)&&n(r,{title:v.elevation,value:this._formatVerticalLength(e)}),p.area&&u(i)&&n(r,{title:v.area,value:this._formatArea(i)}),p.totalLength&&u(a)&&n(r,{title:v.totalLength,value:this._formatLength(a)}))}};X=o([g("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],X);const ie={base:`${l} ${`${l}--translate-vertex`}`};let Y=class extends h{render(){const{area:t,distance:e,elevation:i,totalLength:a,tooltipOptions:c}=this.info,{visibleElements:p}=c,v=this._messagesTooltip.sketch;return n(f,{className:ie.base,helpMessage:this._getHelpMessage()},p.distance&&n(r,{title:v.distance,value:this._formatRelativeLength(e)}),p.elevation&&u(i)&&n(r,{title:v.elevation,value:this._formatVerticalLength(i)}),p.area&&u(t)&&n(r,{title:v.area,value:this._formatArea(t)}),p.totalLength&&u(a)&&n(r,{title:v.totalLength,value:this._formatLength(a)}))}};Y=o([g("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexXY")],Y);const ne={base:`${l} ${`${l}--translate-vertex`}`};let B=class extends h{render(){const{distance:s,elevation:t,tooltipOptions:e}=this.info,{visibleElements:i}=e,a=this._messagesTooltip.sketch;return n(f,{className:ne.base,helpMessage:this._getHelpMessage()},i.distance&&n(r,{title:a.distance,value:this._formatRelativeVerticalLength(s)}),i.elevation&&u(t)&&n(r,{title:a.elevation,value:this._formatVerticalLength(t)}))}};B=o([g("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexZ")],B);function ae(s,t){if(Tt(t))return null;const e=document.createElement("div");switch(t.type){case"draw-point":return new N({tooltip:s,info:t,container:e});case"draw-polygon":return new P({tooltip:s,info:t,container:e});case"draw-polyline":return new S({tooltip:s,info:t,container:e});case"draw-rectangle":return new V({tooltip:s,info:t,container:e});case"draw-circle":return new H({tooltip:s,info:t,container:e});case"extent-rotate":return new W({tooltip:s,info:t,container:e});case"extent-scale":return new U({tooltip:s,info:t,container:e});case"transform-absolute":return new D({tooltip:s,info:t,container:e});case"transform-rotate":return new Z({tooltip:s,info:t,container:e});case"transform-scale":return new F({tooltip:s,info:t,container:e});case"translate-graphic":return new j({tooltip:s,info:t,container:e});case"translate-graphic-z":return new G({tooltip:s,info:t,container:e});case"translate-graphic-xy":return new q({tooltip:s,info:t,container:e});case"translate-vertex":return new X({tooltip:s,info:t,container:e});case"translate-vertex-z":return new B({tooltip:s,info:t,container:e});case"translate-vertex-xy":return new Y({tooltip:s,info:t,container:e});case"reshape-edge-offset":return new A({tooltip:s,info:t,container:e})}}const oe={base:`${b}`};let $=class extends gt{constructor(t){super(t),this.info=null,this._contentContainer=(()=>{const e=document.createElement("div");return e.classList.add(oe.base),e})(),this._contentWidget=null}initialize(){const t=this._contentContainer;this.addHandles([C(()=>{var e;return(e=this.view.overlay)==null?void 0:e.surface},e=>{t.remove(),at(e,i=>i.appendChild(t))},E),C(()=>this.info,(e,i)=>{u(this._contentWidget)&&u(e)&&u(i)&&e.type===i.type?this._contentWidget.info=e:(this._contentWidget=ot(this._contentWidget),at(ae(this,e),a=>{this._contentWidget=a,a.container&&t.appendChild(a.container)}))},E),C(()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this._screenPoint}),re,E)])}destroy(){this._contentWidget=ot(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get _screenPoint(){const t=this.view.inputManager;return t!=null&&t.multiTouchActive?null:t==null?void 0:t.latestPointerLocation}get test(){var t;return{contentContainer:this._contentContainer,visible:((t=this._contentContainer)==null?void 0:t.style.display)!=="none"}}};function re({container:s,contentWidget:t,screenPoint:e}){const{style:i}=s;if(u(e)&&u(t)){i.display="block";const a=Lt(s),c=`translate(${Math.round(e.x)+ct[0]*(a?-1:1)}px, ${Math.round(e.y)+ct[1]}px)`;i.transform=a?`translate(-100%, 0) ${c}`:c}else i.display="none"}o([m({nonNullable:!0})],$.prototype,"view",void 0),o([m()],$.prototype,"info",void 0),o([m()],$.prototype,"_contentContainer",void 0),o([m()],$.prototype,"_contentWidget",void 0),o([m()],$.prototype,"_screenPoint",null),$=o([g("esri.views.interactive.tooltip.Tooltip")],$);const ct=[20,20];function dt(s,t,e,i,...a){return Mt(s)&&St(s)?t.apply(void 0,a):xt(s)?e.apply(void 0,a):i.apply(void 0,a)}function $t(s){const{spatialReference:t}=s;return dt(t,he,ge,ue,s)}function _t(s,t){if(!zt(s.spatialReference,t.spatialReference))return null;const{spatialReference:e}=s;return T[0]=s.x,T[1]=s.y,T[2]=s.hasZ?s.z:0,L[0]=t.x,L[1]=t.y,L[2]=t.hasZ?t.z:0,K(T,L,e)}function K(s,t,e){return dt(e,le,ce,pe,s,t,e)}function le(s,t,e){return _(J(Q,s,t,e).distance,"meters")}function ce(s,t,e){return _(ft(ve(s,t,e),"meters"),"meters")}function pe(s,t,e){return rt(s,e,pt)&&rt(t,e,ht)?_(J(Q,pt,ht).distance,"meters"):null}function he(s){return _(Vt([s],"meters")[0],"meters")}function ge(s){return _(ft(s,"meters"),"meters")}function ue(s){const t=[];if(!Ct(s,t))return null;let e=0;for(const i of t){let a=0;for(let c=1;c<i.length;++c)a+=J(Q,i[c-1],i[c]).distance;e+=a}return _(e,"meters")}function ve(s,t,e){return{type:"polyline",spatialReference:e,paths:[[[...s],[...t]]]}}const Q=new Wt,T=x(),L=x(),pt=x(),ht=x();function De(s,t){return y(mt,$t,vt,t,s)}function Ze(s,t,e,i){return y(Pt,K,R,i,s,t,e)}function Fe(s,t,e){return y(M,_t,M,e,s,t)}function je(s,t,e,i){return y(R,K,R,i,s,t,e)}function qe(s){return y(mt,$t,vt,"on-the-ground",s)}function Ge(s,t){return y(M,_t,M,"on-the-ground",s,t)}function y(s,t,e,i,...a){if(i==="on-the-ground"){const c=t.apply(void 0,a);return u(c)?c:e.apply(void 0,a)}return s.apply(void 0,a)}export{Fe as a,$ as b,qe as c,Ze as d,je as g,Ge as h,K as l,De as m,dt as r,w as t};
