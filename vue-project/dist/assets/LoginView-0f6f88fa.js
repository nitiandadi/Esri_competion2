var F=Object.defineProperty;var b=(e,o,t)=>o in e?F(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var f=(e,o,t)=>(b(e,typeof o!="symbol"?o+"":o,t),t);import{a as w}from"./axios-760d4776.js";import{d as h,ag as v,r as V,aw as B,h as k,_ as y,e as m,a as C,c as I,f as _,g as r,w as a,x as S,i as R,j as $}from"./index-93a23f67.js";class x{constructor(){f(this,"ruleForm",{email:"",password:""})}}const D="http://47.108.76.144:9000/",i=w.create({baseURL:D,timeout:5e3,headers:{"Content-type":"application/json;charset=utf-8"}});i.interceptors.request.use(e=>(e.headers=e.headers||{},localStorage.getItem("token")&&(e.headers.token=localStorage.getItem("token")||""),e));i.interceptors.response.use(({data:e})=>e,e=>{console.log(e)});console.log(i);function L(e){return i({url:"/users/login",method:"POST",data:e})}const q=h({setup(){const e=v(new x),o=k(),t={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:5,message:"用户名长度需要在3-5个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:6,message:"密码长度需要在3-5个字符之间",trigger:"blur"}]},p=V(),d=()=>{e.ruleForm.email="",e.ruleForm.password=""},c=s=>{s&&s.validate(l=>{if(l)console.log(e.ruleForm),L(e.ruleForm).then(u=>{console.log(u),localStorage.setItem("Authorization","Bearer "+u.access_token),o.push("/")});else return console.log("error submit!"),!1})};return{...B(e),rules:t,resetForm:d,submitForm:c,ruleFormRef:p}}});const N=e=>(R("data-v-f5f2fb21"),e=e(),$(),e),U={class:"login"},j={class:"form-cls"},E=N(()=>_("h2",null,"欢迎登录青海巡",-1));function T(e,o,t,p,d,c){const s=m("el-input"),l=m("el-form-item"),u=m("el-button"),g=m("el-form");return C(),I("div",U,[_("div",j,[r(g,{ref:"ruleFormRef",model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"70px"},{default:a(()=>[E,r(l,{label:"用户名:",prop:"email"},{default:a(()=>[r(s,{modelValue:e.ruleForm.email,"onUpdate:modelValue":o[0]||(o[0]=n=>e.ruleForm.email=n),type:"text",autocomplete:"off",class:"input"},null,8,["modelValue"])]),_:1}),r(l,{label:"密码:",prop:"password"},{default:a(()=>[r(s,{modelValue:e.ruleForm.password,"onUpdate:modelValue":o[1]||(o[1]=n=>e.ruleForm.password=n),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),r(l,null,{default:a(()=>[r(u,{class:"login-btn",type:"primary",onClick:o[2]||(o[2]=n=>e.submitForm(e.ruleFormRef))},{default:a(()=>[S("登录")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}const P=y(q,[["render",T],["__scopeId","data-v-f5f2fb21"]]);export{P as default};
