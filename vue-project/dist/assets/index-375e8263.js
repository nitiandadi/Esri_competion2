import{k as Fe,r as y,d as le,S as je,o as se,I as fe,n as ue,a as M,c as O,f as e,L as W,U as he,F as Z,V as ne,C as H,g as G,w as L,u as g,T as Re,W as ge,x as K,X as ye,i as Ve,j as Oe,_ as Ge,b as at,q as Ae,s as ve,Y as lt,K as st,H as it,M as rt,N as ke,O as Ie,P as Te,Q as Be,R as Me}from"./index-93a23f67.js";import{H as $,u as oe,P as ct,aD as dt,g as pe,R as Ze,V as We,X as Ne,Q as be,aE as Pe,aF as ut,a as Ke}from"./mapviewstore-8a6f290e.js";import{u as ae}from"./useEcharts-e87bb20d.js";import{w as pt}from"./Legend-df6b405d.js";import{u as $e}from"./onLayerstore-db26c7ed.js";import{h as N}from"./GraphicsLayer-0c6904d3.js";import{geodesicBuffer as Ue}from"./geometryEngine-31bba3a2.js";import"./chartdata-dcab81db.js";import{E as et}from"./EhcartsLayer-3879df94.js";import{a as mt}from"./axios-760d4776.js";import{u as De}from"./useTime-a8fa1ef7.js";import"./EffectView-eb6dd52d.js";import"./ExportImageParameters-3ed81a65.js";import"./floorFilterUtils-080a7cd2.js";import"./sublayerUtils-694cd24b.js";import"./pixelRangeUtils-03719dd8.js";import"./rendererConversion-e2be3445.js";import"./geometryEngineBase-e1a33b0a.js";import"./hydrated-a556b3e7.js";const tt=Fe("hotelheatmap",()=>{let i=new $;const b=y(!1);async function r(A,v,t){const u=oe().getView(),c=new ct({field:"price",blurRadius:10,maxDensity:.9,minDensity:0,colorStops:[{color:"rgba(63, 40, 102, 0)",ratio:0},{color:"rgba(0, 255, 220, 1)",ratio:.1},{color:"rgba(255, 221, 0, 1)",ratio:.2},{color:"rgba(156, 70, 30, 1)",ratio:.3},{color:"rgba(156, 70, 30, 1)",ratio:.3},{color:"rgba(156, 70, 30, 1)",ratio:.3}]});i=new $({url:"https://services7.arcgis.com/R5nxHh77a68zEsEp/arcgis/rest/services/%E4%BD%8F%E5%AE%BF/FeatureServer",renderer:c,opacity:.8}),new pt({view:u,layerInfos:[{layer:i,title:"价格热力图"}]}),u.map.add(i),b.value=!0}return{createHeatmap:r}}),At=new $({url:"https://services7.arcgis.com/R5nxHh77a68zEsEp/arcgis/rest/services/%E4%BD%8F%E5%AE%BF/FeatureServer"});let ze=[];At.queryFeatures().then(i=>{i.features.forEach(r=>{const A={id:r.attributes.OBJECTID,name:r.attributes.name,price:r.attributes.price,rating:r.attributes.rating,location:r.attributes.位置,hygiene:r.attributes.卫生,service:r.attributes.服务,synthesis:r.attributes.综合,region:r.attributes.地区};ze.push(A)})});const vt={width:2,opacity:.8},q={backgroundColor:"",title:{text:"设施评价",left:"left",textStyle:{color:"#17e3f5",fontSize:14}},radar:{indicator:[{name:"价格",max:500},{name:"评分",max:5},{name:"位置",max:10},{name:"卫生",max:5},{name:"服务",max:5},{name:"综合",max:7}],shape:"circle",splitNumber:5,axisName:{color:"#4c9bfd"},splitLine:{lineStyle:{color:"#17e3f5"}},splitArea:{show:!1},axisLine:{lineStyle:{color:"#17e3f5"}}},series:[{name:"维也纳酒店",type:"radar",lineStyle:vt,data:[],symbol:"circle",itemStyle:{color:"#17e3f5"},areaStyle:{opacity:.1}}]},ot=Fe("bufferlyer",()=>{let i=new $({url:"https://services7.arcgis.com/R5nxHh77a68zEsEp/arcgis/rest/services/%E4%BD%8F%E5%AE%BF/FeatureServer"}),b;const r={type:"simple-fill",color:[140,140,222,.5],outline:{color:[0,0,0,.5],width:2}},A={type:"simple-marker",color:[255,0,0],outline:{color:[255,255,255],width:1},size:7},v={type:"simple-fill",color:[140,140,222,.5],outline:{color:[0,0,0,.5],width:2}},t={type:"simple-marker",color:[255,0,0],outline:{color:[255,255,255],width:1},size:7},u={type:"picture-marker",url:"image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAI7klEQVR4nO1bCXCV1RX+srzsJGbDNAmSBOhULUIISQgMaxLCEslCFggJRAGtVayjYuu02trRdqbKokg3Ox0ERLROLbZiCoxKO1WxbjCiZgytQFxAigvUSqHcznfzn5/7Xt4LeeR/Ly/CmTkzmT/33XPO9997tnt/4AJdoGDQxQAaAawC0AagHcBRACcsPmo9e8Yaw7GDMcApBcD1AHYBOA1A+cn8zYsAvg0gGQOIMgGsBHBcjEmIdKmZ2ZeonxQUqy2lM9Temkb1cVOr+s/CpZr595s1jeoPpTPUPQXFakbWEP0bA4xjAO4D8DWEMLkALBfDwwBtyOYp5erfLUvUqdZr/eLjLUvUo1PKVEXWED2XAcQtACIRYjQCwGvyxupy8tQbVfV+G+2LX5tTp2qG5por4hUAwxAiVAXgMyo2IjFJbauo9GnEvYUlGpyRyakqOSpaucLDNfPvK1JS9f/uKyxRr1fVeZ2jbfpsNTwxSYMQBnwO4Mr+Nn4JgFNUqClvhPp0wdVuCn+y4Gr1s8ISdWlSsr8OUF12UbIGw9uc8/KGy7iTABb3p/GnuT/vHlPkpuSXC5dq5VOio22DBg8erOY3Nas1a3+ptu14Xr3Vvk8deP+w5r3vdKg/b39OPfDgL/QYjpXfpUbHqJVF49WJRde4yfjxmELxDaf7A4QqvnkqsLZkopti9OajUlJtA0rGT1DrN25WnR8eUR8e/qRXfPCDj/VvxpWMt+cZk5qu3q6d5ybrwXETBYSTwdwOI2TPe775J0srVIKrK3zl5uapTZuf6LXRvnjjpsdVTk6XA0yMilJ/LJvpJvOu/EIB6dNgOEaXeHvueVORdROnqsjw8K4oUN+oOv7Z2WfjhTlX7dw6PTed5sZJpW6yG3KHmdEhoCFyuXh70znxzYvxty7/nmOGe/Ity79rg2CuhKMLrlLDBiUKCDcHMsM7RiFmqOOel2UfSOOFb771tq7t4IpS7xg+YWv5LAGA4TEjEACspIC5OXlu3l4cHpd9oI0Xlu1QkJbuFh2qL7GTpXsDUdgcp8c1MzyGOnF4+957P2gA0CcMHZqjZd9fPMHW59U5dRIVjjldQF0PK7c3ExKJ86a3LywsUkXF4wIOwoZHHtOy02Ji1GfNi229pmcNkVVwnZMA7OKkLGxEEDM8ifOmYhK3g7ESCDRlrSgab+v1yORS0eEFJ5sZpwe5XG5VnaS3fBP9BcDDGx7Vsr6ZnGLrdaxlsYqLjJQMMd0JABo9lz8LG0lvmbV5A8DkjIwMdcOym9SBzkOOAkDZaWnpWsae6gZbv/LMbJFd7wQAqzgZmxkigFWdToYWtHRTqqcChyA4vQoa5zXpuVcZzpAZqiVzhRMAPMPJ2MkRASxb+YyFjS8ATrW12rxzxUx7JTgNwOoH1uq5G3OHuyVmlh5/cgKADk72lpF0sJ7XCdGO53sFADlQvqFt27N63tEpaW7JmSWPjdY+0xFOdmj+IlsAS1QNSvs+v7bAuXJPPuTNt9/VY9JjYmz9Ppq3SH572AkATnCyLxYutQVEWXm/N4UCAUBPPmR/50f6f9EREbZ+jFbWb750AoAvOBnDiz8AfGvLKce4+qc7ffoQbwBQV0sP6t5nOsjJ9jc0+7UFnASA7MuH7NnbbmeEot979c0y/oATAOzmZLuNGkCcINtYwdwC3gB4um27fs6iTPRjU9Ua/7oTALRxsiemTe8WBtnD628AVq5eo5+zKSL6PT61XMZvdQKAuznZ7Vfk+5UIOR3ufM3LMtwzEbpt5GgZf5cTAMzhZEwvPZdYT6lwMABgRznF6keYqXBpZpaMr3QCgAwWFrERkW5lJ/v2FMLurWeFVjyuxHEAvM3723UbtA6XG8UQy/SYiAgphhw7YX7JsxyWbcDWtdPG9pYLCsZqHdiYEb02TS5zvByG1WhU9TlnHA2bohIO2boOtvHy9j0bIrVDuxw0gO/AQcoG8D8mQJ2NLbYwNiIojH17J9vgZ+P2jv0qK7ur5F1tOL8DDc26Y0xdrSauo/Q0Bd45usCtKcoihM/ZqAyG8R8cOqpmV86xT4vMpugPRo2Rt/8UAkBTteePjVWfG0tur9EWZ98+0AAsu/Emuy1uHpVxG6THxAoAkxEgeoUCeIvDPJnhzQ45GGHfPlBvXoynrKc8jsh4WGoZ/zICSNUUwvN8XmsxFXh44jQbBG6Hd/9x0NE9L8ueMtZPmuYmm+VvUlSUAMC8JaC0k4JuvGykmxJkdo3YPOX/2bf3bJieq7cXh8dl7/nmydd943Ix/lkEgcYyyYgIC1MvX1nbTRl2jvJTuxwjmQnMuvWbumWMPTEzPBoucd7X8Tj5hdk1KjwsTDx/PoJEv/Hmhc3owEsNkifoeJ2WrhuY96/5uW5j8VIE+wms59nV2dq2Qxc2zO0lvZU4z1DnS45xF+FXCCJdBKCTgn+YP7abYmayxIxR0mZ/mOmttysyJhthj3V/IoJMldophYWrv82u9qmkMIsVrgpmk3xrPFZjYkXmSuEzlrQcYxY2vvgvs6oUt6EFwCz0Ez1EBXg2f6TpqrMq7RQfnt+qchIG9cvS96QYAG9QkbLMbK/71Gn+76Jr9CmVZfweALHoZ7pUbofeMepMmhwo/v6Zfc+LEF9HiFAtwxDP5h+aMDlgxjPZMq7GNSDE6A6+GTqm30+rcNx43gmiw7Xe/u0IQQoDsJ4K8qb3rsruSdK58ouVNSq+68ibvM6SFZIUCWALFWVl1j53fp+NZ/bHYy/L+CdD8aa4J0XJifKQ+IQ+gdBR12SGux1W1BkQFAfgrwKCtxz+bMyaIjs+XoznlyMJGGCUBOBVGpARG9er7M5ssmTGxYnxuwfaJzMmpVkNCnVxbFyvPqLgmQPHWsa/ZF3RG9AUD2AbDYqPdOkbnb6M315RqS9EW8Y/B2AQviIUDeB3NIzFzwaPy87kx6aUy4GGsiLJgHF4vSWGr1/TQGZzP8ovVCdbr9V85+ix5odRLG4i8BWmZdYHDvqUmXePLcP57AacJzQJwCGjAfIvAGU4z2gYgL9bHDKfwF0gnGf0f67hItTldhtYAAAAAElFTkSuQmCC",width:"50px",height:"50px"};function c(n,C,w,f,I,_){const p=new dt({longitude:n,latitude:C,spatialReference:f.spatialReference});p&&d(p,w,I,_)}function d(n,C,w,f){if(n.hasZ=!1,f.graphics.length===0)f.add(new pe({geometry:n,symbol:A}));else{const h=f.graphics.getItemAt(0);h.geometry=n}const I=Ue(n,C,"kilometers");if(w.graphics.length===0)w.add(new pe({geometry:I,symbol:r}));else{const h=w.graphics.getItemAt(0);h.geometry=I}const _=i.createQuery();_.geometry=I;const p={type:"picture-marker",url:"image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAI7klEQVR4nO1bCXCV1RX+srzsJGbDNAmSBOhULUIISQgMaxLCEslCFggJRAGtVayjYuu02trRdqbKokg3Ox0ERLROLbZiCoxKO1WxbjCiZgytQFxAigvUSqHcznfzn5/7Xt4LeeR/Ly/CmTkzmT/33XPO9997tnt/4AJdoGDQxQAaAawC0AagHcBRACcsPmo9e8Yaw7GDMcApBcD1AHYBOA1A+cn8zYsAvg0gGQOIMgGsBHBcjEmIdKmZ2ZeonxQUqy2lM9Temkb1cVOr+s/CpZr595s1jeoPpTPUPQXFakbWEP0bA4xjAO4D8DWEMLkALBfDwwBtyOYp5erfLUvUqdZr/eLjLUvUo1PKVEXWED2XAcQtACIRYjQCwGvyxupy8tQbVfV+G+2LX5tTp2qG5por4hUAwxAiVAXgMyo2IjFJbauo9GnEvYUlGpyRyakqOSpaucLDNfPvK1JS9f/uKyxRr1fVeZ2jbfpsNTwxSYMQBnwO4Mr+Nn4JgFNUqClvhPp0wdVuCn+y4Gr1s8ISdWlSsr8OUF12UbIGw9uc8/KGy7iTABb3p/GnuT/vHlPkpuSXC5dq5VOio22DBg8erOY3Nas1a3+ptu14Xr3Vvk8deP+w5r3vdKg/b39OPfDgL/QYjpXfpUbHqJVF49WJRde4yfjxmELxDaf7A4QqvnkqsLZkopti9OajUlJtA0rGT1DrN25WnR8eUR8e/qRXfPCDj/VvxpWMt+cZk5qu3q6d5ybrwXETBYSTwdwOI2TPe775J0srVIKrK3zl5uapTZuf6LXRvnjjpsdVTk6XA0yMilJ/LJvpJvOu/EIB6dNgOEaXeHvueVORdROnqsjw8K4oUN+oOv7Z2WfjhTlX7dw6PTed5sZJpW6yG3KHmdEhoCFyuXh70znxzYvxty7/nmOGe/Ity79rg2CuhKMLrlLDBiUKCDcHMsM7RiFmqOOel2UfSOOFb771tq7t4IpS7xg+YWv5LAGA4TEjEACspIC5OXlu3l4cHpd9oI0Xlu1QkJbuFh2qL7GTpXsDUdgcp8c1MzyGOnF4+957P2gA0CcMHZqjZd9fPMHW59U5dRIVjjldQF0PK7c3ExKJ86a3LywsUkXF4wIOwoZHHtOy02Ji1GfNi229pmcNkVVwnZMA7OKkLGxEEDM8ifOmYhK3g7ESCDRlrSgab+v1yORS0eEFJ5sZpwe5XG5VnaS3fBP9BcDDGx7Vsr6ZnGLrdaxlsYqLjJQMMd0JABo9lz8LG0lvmbV5A8DkjIwMdcOym9SBzkOOAkDZaWnpWsae6gZbv/LMbJFd7wQAqzgZmxkigFWdToYWtHRTqqcChyA4vQoa5zXpuVcZzpAZqiVzhRMAPMPJ2MkRASxb+YyFjS8ATrW12rxzxUx7JTgNwOoH1uq5G3OHuyVmlh5/cgKADk72lpF0sJ7XCdGO53sFADlQvqFt27N63tEpaW7JmSWPjdY+0xFOdmj+IlsAS1QNSvs+v7bAuXJPPuTNt9/VY9JjYmz9Ppq3SH572AkATnCyLxYutQVEWXm/N4UCAUBPPmR/50f6f9EREbZ+jFbWb750AoAvOBnDiz8AfGvLKce4+qc7ffoQbwBQV0sP6t5nOsjJ9jc0+7UFnASA7MuH7NnbbmeEot979c0y/oATAOzmZLuNGkCcINtYwdwC3gB4um27fs6iTPRjU9Ua/7oTALRxsiemTe8WBtnD628AVq5eo5+zKSL6PT61XMZvdQKAuznZ7Vfk+5UIOR3ufM3LMtwzEbpt5GgZf5cTAMzhZEwvPZdYT6lwMABgRznF6keYqXBpZpaMr3QCgAwWFrERkW5lJ/v2FMLurWeFVjyuxHEAvM3723UbtA6XG8UQy/SYiAgphhw7YX7JsxyWbcDWtdPG9pYLCsZqHdiYEb02TS5zvByG1WhU9TlnHA2bohIO2boOtvHy9j0bIrVDuxw0gO/AQcoG8D8mQJ2NLbYwNiIojH17J9vgZ+P2jv0qK7ur5F1tOL8DDc26Y0xdrSauo/Q0Bd45usCtKcoihM/ZqAyG8R8cOqpmV86xT4vMpugPRo2Rt/8UAkBTteePjVWfG0tur9EWZ98+0AAsu/Emuy1uHpVxG6THxAoAkxEgeoUCeIvDPJnhzQ45GGHfPlBvXoynrKc8jsh4WGoZ/zICSNUUwvN8XmsxFXh44jQbBG6Hd/9x0NE9L8ueMtZPmuYmm+VvUlSUAMC8JaC0k4JuvGykmxJkdo3YPOX/2bf3bJieq7cXh8dl7/nmydd943Ix/lkEgcYyyYgIC1MvX1nbTRl2jvJTuxwjmQnMuvWbumWMPTEzPBoucd7X8Tj5hdk1KjwsTDx/PoJEv/Hmhc3owEsNkifoeJ2WrhuY96/5uW5j8VIE+wms59nV2dq2Qxc2zO0lvZU4z1DnS45xF+FXCCJdBKCTgn+YP7abYmayxIxR0mZ/mOmttysyJhthj3V/IoJMldophYWrv82u9qmkMIsVrgpmk3xrPFZjYkXmSuEzlrQcYxY2vvgvs6oUt6EFwCz0Ez1EBXg2f6TpqrMq7RQfnt+qchIG9cvS96QYAG9QkbLMbK/71Gn+76Jr9CmVZfweALHoZ7pUbofeMepMmhwo/v6Zfc+LEF9HiFAtwxDP5h+aMDlgxjPZMq7GNSDE6A6+GTqm30+rcNx43gmiw7Xe/u0IQQoDsJ4K8qb3rsruSdK58ouVNSq+68ibvM6SFZIUCWALFWVl1j53fp+NZ/bHYy/L+CdD8aa4J0XJifKQ+IQ+gdBR12SGux1W1BkQFAfgrwKCtxz+bMyaIjs+XoznlyMJGGCUBOBVGpARG9er7M5ssmTGxYnxuwfaJzMmpVkNCnVxbFyvPqLgmQPHWsa/ZF3RG9AUD2AbDYqPdOkbnb6M315RqS9EW8Y/B2AQviIUDeB3NIzFzwaPy87kx6aUy4GGsiLJgHF4vSWGr1/TQGZzP8ovVCdbr9V85+ix5odRLG4i8BWmZdYHDvqUmXePLcP57AacJzQJwCGjAfIvAGU4z2gYgL9bHDKfwF0gnGf0f67hItTldhtYAAAAAElFTkSuQmCC",width:"50px",height:"50px"};i.queryFeatures(_).then(h=>{const k=h.features;k.forEach(E=>{E.symbol=p}),w.addMany(k);const x=document.getElementById("hotel-details").querySelector("tbody");x.innerHTML="",k.forEach(E=>{const Q=E.attributes.name,S=E.attributes.rating,Y=E.attributes.price,X=E.attributes.id,P=document.createElement("tr");P.style.width="700px",P.style.marginBottom="10px",P.style.borderBottom="1px solid white";const U=document.createElement("td");U.style.width="220px",U.style.fontSize="20px",U.style.textAlign="center",U.textContent=Q,P.appendChild(U),U.dataset.hotelId=X;const V=document.createElement("td");V.style.width="220px",V.style.fontSize="20px",V.style.textAlign="center",V.textContent=Y,P.appendChild(V);const B=document.createElement("td");B.style.width="220px",B.style.fontSize="20px",B.style.textAlign="center",B.textContent=S,P.appendChild(B),x.appendChild(P)})})}function m(n,C,w,f,I,_){n.stopPropagation();const p=C.toMap(n);p&&o(p,w,f,I,_)}function o(n,C,w,f,I){if(!I){console.log("buffering not enabled. Hit the b key and click/drag to buffer.");return}if(n.hasZ=!1,n.z=void 0,w.graphics.length!=0&&w.remove(f.graphics.getItemAt(0)),f.graphics.length===0)f.add(new pe({geometry:n,symbol:t}));else{const p=f.graphics.getItemAt(0);p.geometry=n}const _=Ue(n,C,"kilometers");if(w.graphics.length===0)w.add(new pe({geometry:_,symbol:v}));else{const p=w.graphics.getItemAt(0);p.geometry=_;const h=i.createQuery();h.geometry=_,i.queryFeatures(h).then(k=>{const R=k.features;R.forEach(S=>{S.symbol=u});const x=f.graphics.toArray();for(let S=x.length-1;S>0;S--){const Y=x[S];f.remove(Y)}f.addMany(R);const Q=document.getElementById("hotel-details").querySelector("tbody");Q.innerHTML="",R.forEach(S=>{const Y=S.attributes.name,X=S.attributes.rating,P=S.attributes.price,U=S.attributes.id,V=document.createElement("tr");V.style.width="700px",V.style.marginBottom="10px",V.style.borderBottom="1px solid white";const B=document.createElement("td");B.style.width="220px",B.style.fontSize="20px",B.style.textAlign="center",B.textContent=Y,V.appendChild(B),B.dataset.hotelId=U;const F=document.createElement("td");F.style.width="220px",F.style.fontSize="20px",F.style.textAlign="center",F.textContent=P,V.appendChild(F);const T=document.createElement("td");T.style.width="220px",T.style.fontSize="20px",T.style.textAlign="center",T.textContent=X,V.appendChild(T),Q.appendChild(V)})})}}return{createBuffer:c,createBufferview:m,query:b}}),D=i=>(Ve("data-v-ace8ecae"),i=i(),Oe(),i),ft={class:"hotel"},ht={class:"hotel-panel line"},gt=D(()=>e("div",{class:"hotel-panel-title"},[e("span",null,"酒店信息查询")],-1)),yt=D(()=>e("option",{value:""},"请选择地区",-1)),bt=["value"],xt={class:"table-container"},wt={class:"table"},_t=D(()=>e("tr",null,[e("th",null,"Hotel Name"),e("th",null,"Price"),e("th",null,"Rating")],-1)),Et=D(()=>e("div",{class:"hotel-panel-footer"},null,-1)),St={class:"hotel-panel line"},Ct=D(()=>e("div",{class:"hotel-panel-title"},[e("span",null,"缓冲区分析")],-1)),kt={class:"container"},It={class:"buffer-analysis-module"},Tt={class:"label"},Bt={class:"input-section"},Mt=D(()=>e("label",{for:"longitude"},"经度:",-1)),Ft=["disabled"],Rt={class:"input-section"},Vt=D(()=>e("label",{for:"latitude"},"纬度:",-1)),Ot=["disabled"],Gt=D(()=>e("div",{class:"input-section"},[e("label",{for:"radius"},"缓冲半径:"),e("input",{type:"text",id:"radius",placeholder:"输入缓冲半径"})],-1)),Dt={id:"mode",style:{color:"rgb(192, 184, 184)","text-align":"end","font-family":"Arial, Helvetica, sans-serif","font-style":"italic","font-size":"5px","margin-bottom":"2px"}},zt=D(()=>e("div",{class:"hotel-panel-footer"},null,-1)),Pt={class:"hotel-panel line"},Ut=D(()=>e("div",{class:"hotel-panel-title"},[e("span",null,"酒店综合评价")],-1)),Lt=D(()=>e("option",{value:""},"请选择酒店",-1)),Ht=["value"],Qt=D(()=>e("div",{class:"hotel-panel-footer"},null,-1)),qt={id:"hotel-details",class:"details"},Yt={class:"hoteldetails"},Xt=D(()=>e("thead",null,[e("tr",null,[e("th",null,"名字"),e("th",null,"价格"),e("th",null,"评分")])],-1)),Jt=D(()=>e("tr",null,null,-1)),jt=[Jt],Zt=le({__name:"hotelpages",setup(i){let b=new $({url:"https://services7.arcgis.com/R5nxHh77a68zEsEp/arcgis/rest/services/%E4%BD%8F%E5%AE%BF/FeatureServer",outFields:["*"]});const r=new Ze({title:"{name}",content:[{type:"fields",fieldInfos:[{fieldName:"price",label:"Price"},{fieldName:"rating",label:"Rating"}]}]}),A=new We({style:"path",path:"M18.3,8.7c0,0-1.7-2.2-8.3-4.4S1.7,8.7,1.7,8.7S6,14.3,10,18c4-3.7,8.3-9.3,8.3-9.3",color:"#17e3f5",outline:{color:"#115687",width:2},size:7}),v=new Ne({symbol:A});let t=oe().getView(),u=tt(),c=!0;const d=y(null);$e().createOnlayer();const o=y(""),n=y(ze),C=[...new Set(n.value.map(l=>l.region))];function w(){n.value.sort((l,s)=>l.price-s.price)}function f(){n.value.sort((l,s)=>s.rating-l.rating)}const I=je(()=>o.value?(o.value==="察尔汗盐湖"&&t.goTo({center:[[94.933310210425,36.412371]],zoom:12}),o.value==="卓尔山风景区"&&t.goTo({center:[[100.27451,38.18467]],zoom:12}),o.value==="塔尔寺"&&t.goTo({center:[[101.5732,36.5332]],zoom:12}),n.value.filter(l=>l.region===o.value).sort()):n.value.sort()),_=ot(),p=y(""),h=new N,k=new N,R=new N,x=new N;t.map.addMany([h,k,R,x]);let E=!0;const Q=y("buffering"),S=y(!0),Y=()=>{S.value=!S.value};function X(l){E=l.key==="b"&&!E,Q.value=E?"navigation":"buffering"}async function P(){h.removeAll();const l=document.getElementById("longitude").value,s=document.getElementById("latitude").value,a=document.getElementById("radius").value;await _.createBuffer(l,s,a,t,h,k),t.goTo({center:[[l,s]],zoom:10})}function U(){t.map.remove(k),t.map.remove(h),t.map.add(x),t.map.add(R),t.on("key-down",X),t.on(["click","pointer-move"],async l=>{if(!c){t.removeHandles("key-down",X),t.map.remove(x),t.map.remove(R);return}const s=document.getElementById("radius").value;await _.createBufferview(l,t,s,R,x,E)})}function V(){t.map.remove(k),t.map.remove(h),t.map.remove(x),t.map.remove(R),d.value&&(d.value.innerHTML=""),t.goTo({center:[[96.945438,35.850631]],zoom:5})}const B=y(null);let F=null;const T=y(null);function J(){if(T.value){const{price:l=0,rating:s=0,location:a=0,hygiene:te=0,service:Ee=0,synthesis:Se=0}=T.value,Ce=[[l,s,a,te,Ee,Se]];q.series[0].data=Ce,F==null||F.setOption(q),ae(F,q)}}let we=y(null),ee=1,j=null;function ie(){j=setInterval(()=>{ee=ee+1,T.value=n.value[ee],J()},1e3)}function re(){j&&(clearInterval(j),j=null)}function _e(){re(),J(),T.value||ie()}return se(async()=>{t.map.add(b),t.goTo({center:[[101.5732,36.5332]],zoom:12}),b.popupTemplate=r,b.renderer=v,t.on("click",l=>{t.hitTest(l).then(s=>{const a=s.results[0];if(a&&a.graphic){const te=a.graphic.attributes;t.popup.open({title:te.name,content:r.content,location:l.mapPoint})}})}),B.value&&(F=be(B.value),q.toolbox={feature:{myTool2:{show:!0,title:"热力图",icon:"image://https://img.icons8.com/color/48/000000/fire-element.png",onclick:u.createHeatmap}}},ae(F,q),J(),ie()),fe(T,()=>{J()}),fe(p,l=>{l==="clickAnalysisEnabled"?(c=!0,U()):l==="inputAnalysisEnabled"&&(c=!1,t.map.add(k),t.map.add(h))})}),ue(()=>{t.map.removeAll(),re()}),(l,s)=>(M(),O(Z,null,[e("div",ft,[e("div",ht,[gt,W(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>o.value=a)},[yt,(M(),O(Z,null,ne(C,a=>e("option",{option:"",value:a},H(a),9,bt)),64))],512),[[he,o.value]]),G(Re,null,{default:L(()=>[e("div",xt,[e("table",wt,[e("thead",null,[e("tr",null,[e("th",{colspan:"3"},[e("button",{onClick:w},"按价格排序"),e("button",{onClick:f},"按评分排序")])]),_t]),e("tbody",null,[(M(!0),O(Z,null,ne(g(I),a=>(M(),O("tr",{key:a.id},[e("td",null,H(a.name),1),e("td",null,H(a.price),1),e("td",null,H(a.rating),1)]))),128))])])])]),_:1}),Et]),e("div",St,[Ct,e("div",kt,[e("div",It,[e("label",Tt,[W(e("input",{type:"radio",value:"clickAnalysisEnabled","onUpdate:modelValue":s[1]||(s[1]=a=>p.value=a)},null,512),[[ge,p.value]]),K("屏幕 ")]),e("label",null,[W(e("input",{type:"radio",value:"inputAnalysisEnabled","onUpdate:modelValue":s[2]||(s[2]=a=>p.value=a)},null,512),[[ge,p.value]]),K("参数 ")]),e("div",Bt,[Mt,e("input",{type:"text",id:"longitude",placeholder:"输入经度",disabled:p.value==="clickAnalysisEnabled"},null,8,Ft)]),e("div",Rt,[Vt,e("input",{type:"text",id:"latitude",placeholder:"输入纬度",disabled:p.value==="clickAnalysisEnabled"},null,8,Ot)]),Gt,e("button",{id:"analyze-btn",onClick:P},"确认分析"),e("button",{id:"cancel-btn",onClick:V},"结束分析"),e("div",Dt,H(Q.value),1)])]),zt]),e("div",Pt,[Ut,W(e("select",{"onUpdate:modelValue":s[3]||(s[3]=a=>T.value=a),onChange:_e,ref_key:"refHotelSelect",ref:we},[Lt,(M(!0),O(Z,null,ne(n.value,a=>(M(),O("option",{value:a},H(a.name),9,Ht))),256))],544),[[he,T.value]]),e("div",{class:"hotel-panel-chart",ref_key:"radarchart",ref:B},null,512),Qt])]),e("div",{id:"mytest",class:ye({"slide-in":S.value,"slide-out":!S.value})},[e("div",qt,[e("div",{class:"arrow-button",onClick:Y},[e("span",{class:ye(["arrow-icon",{up:!S.value}])},null,2)]),e("table",Yt,[Xt,e("tbody",{ref_key:"tbodyRef",ref:d},jt,512)])])],2)],64))}});const Wt=Ge(Zt,[["__scopeId","data-v-ace8ecae"]]),nt=Fe("roadcondition",()=>{const i=[];async function b(){const u="/api/traffic/v1/road?";try{const c=["金塔路","清泉路","林秀路","庄隆路","香安大道","团结南路","团结北路","通宁路","环城北路"];for(const d of c){const m=await mt.get(u,{params:{ak:"IzCONMfUjk7k3lTCIwe5w9shHHyXm5R3",road_name:d,city:"西宁",coord_type_input:"gcj02",coord_type_output:"gcj02"}}),o=m.data;console.log(o);const n={roadName:m.data.road_traffic[0].road_name,congestionEvaluation:m.data.evaluation.status};i.push(n),console.log(i[0])}}catch(c){console.error("Failed to fetch congestion evaluation data:",c)}}function r(u,c){const d="index_";for(const m of c){const o=m.roadName,n=m.congestionEvaluation;console.log(`Road Name: ${o}`),console.log(`Congestion Evaluation: ${n}`);const C=u.createQuery();C.where=`name = '${o}'`,u.queryFeatures(C).then(function(w){const f=w.features;f.forEach(I=>{I.attributes[d]=n}),u.applyEdits({updateFeatures:f}).then(()=>{console.log("成功！")}).catch(I=>{console.log("失败")})}).catch(w=>{})}}async function A(u){u.map(c=>{let d="blue";return c.index===0?d="blue":c.index===1?d="green":c.index===2&&(d="red"),{name:c.name,coords:c.coords,lineStyle:{normal:{color:d}}}})}async function v(u){return new Promise((c,d)=>{const m=[];u.queryFeatures().then(o=>{o.features.forEach(n=>{const C=n.geometry;C.type==="polyline"&&C.paths.forEach(f=>{const I=f.map(_=>{const[p,h]=Pe(_[0],_[1]);return[p,h]});m.push({coords:I})})}),c(m)}).catch(o=>{d(o)})})}async function t(u){return new Promise((c,d)=>{const m=[];u.queryFeatures().then(o=>{o.features.forEach(n=>{const C=n.geometry,w="index_";C.type==="polyline"&&C.paths.forEach(I=>{const _=I.map(p=>{const[h,k]=Pe(p[0],p[1]);return[h,k]});m.push({coords:_,index:n.attributes[w]})})}),c(m)}).catch(o=>{d(o)})})}return{fetchCongestionEvaluationData:b,renderFeatureLayer:A,updateFeatureLayerAttributes:r,roadDataList:i,extractRoadNetworkData:v,fieldRoadNetworkData:t}}),Nt=le({__name:"roadline",setup(i){const b=oe();let r=null,A=nt(),v=new $({url:"https://services7.arcgis.com/R5nxHh77a68zEsEp/arcgis/rest/services/%E5%A1%94%E5%B0%94%E5%AF%BA%E5%91%A8%E8%BE%B9%E8%B7%AF%E7%BD%91/FeatureServer"}),t=[];return se(async()=>{let u=oe().getView();t=await A.extractRoadNetworkData(v);let c=300/(t.length-1);const d=t.map((o,n)=>({name:o.name,coords:o.coords,lineStyle:{normal:{color:ut("#5A94DF",Math.round(c*n))}}})),m={series:[{type:"lines",coordinateSystem:"arcgis",polyline:!0,silent:!0,zlevel:1,lineStyle:{curveness:.8,opacity:.4,width:2},progressiveThreshold:300,progressive:300,data:d},{type:"lines",coordinateSystem:"arcgis",polyline:!0,data:d,lineStyle:{width:0},effect:{constantSpeed:20,show:!0,trailLength:.2,symbolSize:3}}]};r=new et(u,m)}),ue(()=>{r==null||r.destroy(),r=null,b.isViewType()}),(u,c)=>(M(),O("div"))}});De();function Kt(){return["西宁","海东","德令哈","格尔木","玉树"]}const de={baseOption:{toolbox:{show:!0,orient:"vertical",left:"10",top:"-10",feature:{},itemSize:25},legend:{left:"9%",top:"0px",orient:"vertical",itemWidth:30,itemHeight:20,itemGap:.2,data:[{name:"拥堵",icon:"image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAaUlEQVR4nO3X0QnAMAgEUGe8/Sfxp9mhFA6a98AFPKNkBgAAAAAAAAAAAAAAAAAAAIDf2ORRed0DAaQ7QAKIAK5eYeMGRADtKVwvoN+ItYL6zdhClX8RAAAAAAAAAAAAAAAAAAAAAMx3Drl3iNud/LkQAAAAAElFTkSuQmCC"},{name:"通畅",icon:"image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAaklEQVR4nO3XgQnAMAgEQJdzJsd1lHSHUnho7sAFfKOkCgAAAAAAAAAAAAAAAAAAAIDf6J2j5nUPBLDZARLACuDqFVZuwAggPYXtBeQb0VZQvhkdqPAvAgAAAAAAAAAAAAAAAAAAAID6zgMM5oFbSrb6AwAAAABJRU5ErkJggg=="},{name:"未知",icon:"image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAY0lEQVR4nO3UwRGAQAgEQfJPesxBH3jaXUUAsMAMAAAAAAAAAAAAAAAAAAAAAN9Rqe7PQADtLpAAEsCvX9hj2w10eAkgAaxvYS5gfxCd+oIAAAAAAAAAAAAAAAAAAAAAmJe4AAcpeOouzH0EAAAAAElFTkSuQmCC"}],textStyle:{fontSize:10,color:"#4c9bfd"}},animation:!0,timeline:{data:[],axisType:"category",orient:"vertical",right:"0%",top:"center",width:"15%",height:"200px",autoPlay:!0,playInterval:1500,label:{fontSize:12,color:"#4c9bfd"},tooltip:{show:!1}},tooltip:{trigger:"axis"},radar:{indicator:[{name:"路网高延时运行时间占比",max:300,color:"#4c9bfd"},{name:"路网拥堵路段里程比",max:250,color:"#4c9bfd"},{name:"常发拥堵路段里程比",max:300,color:"#4c9bfd"},{name:"路网高峰行程延时指数",max:5,color:"#4c9bfd"},{name:"骨干道路运行速度偏差率",max:200,color:"#4c9bfd"},{name:"高峰平均速度",max:100,color:"#4c9bfd"}],center:["42%","52%"]},series:[{name:"拥堵",type:"radar",data:[]},{name:"通畅",type:"radar",data:[]},{name:"未知",type:"radar",data:[]}]},options:[]},ce=Kt(),Le={[ce[0]]:[180,100,200,3,80,10,10],[ce[1]]:[150,100,200,2,50,20,40],[ce[2]]:[180,100,200,3,80,10,10],[ce[3]]:[180,100,200,3,80,10,10],[ce[4]]:[180,100,200,3,80,10,10]};var Qe;const He=(Qe=de.baseOption)==null?void 0:Qe.radar;var qe,Ye,Xe,Je;for(let i in Le){let b=Le[i];console.log(i);let r={series:{data:[{value:b,name:i,itemStyle:{color:"#17e3f5"}}]},tooltip:{trigger:"item",backgroundColor:"#115687",borderColor:"#ccc",borderWidth:1,padding:[5,10],textStyle:{color:"#fff",fontSize:12},extraCssText:"box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);max-width: 200px; max-height: 130px;",formatter:function(A){let v='<div style="font-size: 18px; font-weight: bold;height: 30px; ">'+A.name+"</div>";if(He.indicator)for(let t=0;t<A.value.length;t++)v+='<span style="display: inline-block; width: 10px; height: 10px; margin-right: 5px;font-size: 18px; border-radius: 50%; background-color: '+A.color+';"></span>'+He.indicator[t].name+"："+A.value[t]+"<br>";return v}}};(qe=de.options)==null||qe.push(r),(Je=(Xe=(Ye=de.baseOption)==null?void 0:Ye.timeline)==null?void 0:Xe.data)==null||Je.push(i)}De();const $t={width:2,opacity:.5},me={backgroundColor:"",color:["#00f2f1","#ed3f35"],tooltip:{trigger:"axis",formatter:function(i,b,r){for(var A="",v=0;v<i.length;v++){var t=i[v],u=t.name,c=t.seriesName,d=t.value,m=t.color;v===0&&(A+=u+"<br/>"),A+='<span style="margin-right:2px;display:inline-block;width:5px;height:5px;border-radius:2px;background-color:'+m+';"></span>',A+=c+"："+d}return A}},legend:{left:"5%",top:"0%",data:[{name:"客流量",icon:""}],textStyle:{color:"#4c9bfd"}},xAxis:{type:"category",boundaryGap:!1,data:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"],axisTick:{show:!0,alignWithLabel:!0},axisLabel:{color:"#4c9bfd"},splitLine:{show:!1},axisPointer:{show:!0,type:"line",lineStyle:{color:"#4c9bfd"}}},yAxis:{type:"value",axisTick:{show:!1},axisLabel:{color:"#4c9bfd"},splitLine:{lineStyle:{type:"solid",color:"#4c9bfd"},show:!0}},grid:{top:"15%",left:"3%",right:"5%",bottom:"3%",show:!0,borderColor:"#4c9bfd",containLabel:!0},series:[{name:"客流量",data:[],type:"line",lineStyle:$t,smooth:!0,itemStyle:{color:"#00FFFF"}}]},eo={id:"main"},to=le({__name:"roadcondition",setup(i){let b=nt(),r=[],A=null;return se(async()=>{let v=new $({url:"https://services7.arcgis.com/R5nxHh77a68zEsEp/arcgis/rest/services/%E5%A1%94%E5%B0%94%E5%AF%BA%E5%91%A8%E8%BE%B9%E8%B7%AF%E7%BD%91/FeatureServer"}),t=oe().getView();await b.fetchCongestionEvaluationData(),await b.updateFeatureLayerAttributes(v,b.roadDataList),r=await b.fieldRoadNetworkData(v);const u=r.map(d=>{let m="#00FFFF";return d.index===0?m="#00FFFF":d.index===1?m="#7FFF00":d.index===2&&(m="#EE2C2C"),{coords:d.coords,lineStyle:{color:m}}}),c={series:[{type:"lines",coordinateSystem:"arcgis",polyline:!0,silent:!0,zlevel:1,lineStyle:{curveness:.8,opacity:.4,width:2},progressiveThreshold:5e3,progressive:2e3,data:u},{type:"lines",coordinateSystem:"arcgis",polyline:!0,data:u,lineStyle:{width:0},effect:{constantSpeed:20,show:!0,trailLength:.2,symbolSize:3}}]};A=new et(t,c)}),ue(()=>{A==null||A.destroy(),A=null}),(v,t)=>(M(),O("div",eo,[at(v.$slots,"default")]))}}),xe=i=>(Ve("data-v-09285cbb"),i=i(),Oe(),i),oo={class:"device"},no=lt('<div class="device-panel line" data-v-09285cbb><span class="device-panel-title" data-v-09285cbb>城市拥堵指数</span><section class="device-card" data-v-09285cbb><div class="device-card-cityname" data-v-09285cbb><p data-v-09285cbb>当前城市</p><span data-v-09285cbb>西宁</span></div><span class="device-card-line" data-v-09285cbb></span><div class="device-card-order" data-v-09285cbb><p data-v-09285cbb>排名</p><span data-v-09285cbb>52</span></div><div class="device-card-index" data-v-09285cbb><p data-v-09285cbb>拥堵指数</p><p class="device-card-indexVal" data-v-09285cbb><span class="device-card-indexNum" data-v-09285cbb>1.83</span><span class="device-card-indexArrow" data-v-09285cbb></span></p><p class="device-card-indexProcess" data-v-09285cbb><span class="device-card-Proval" data-v-09285cbb></span><span class="device-card-Proline" data-v-09285cbb></span></p></div></section><div class="device-panel-footer" data-v-09285cbb></div></div>',1),ao={class:"device-panel line"},lo=xe(()=>e("span",null,"景区实时路况",-1)),so=[lo],io=xe(()=>e("div",{class:"device-panel-footer"},null,-1)),ro={class:"device-panel line"},co=xe(()=>e("div",{class:"device-panel-title"},[e("span",null,"景区今日实时客流")],-1)),uo=xe(()=>e("div",{class:"device-panel-footer"},null,-1)),po=le({__name:"roadpages",setup(i){const b=De();let r=y(!1);const A=y(null);Ke(A),y(null);const v=y(null),t=y(null);let u=oe().getView();function c(){return{congestionIndex:1.83,ranking:52}}function d(){const o=c(),n=document.querySelector(".device-card-indexNum");n.textContent=o.congestionIndex.toString();const C=document.querySelector(".device-card-order span");C.textContent=o.ranking.toString()}setInterval(d,5e3);const m=()=>{r.value=!r.value};return se(()=>{var h;d();let o=null;o=be(v.value),((h=de.baseOption)==null?void 0:h.toolbox).feature={myTool2:{show:!0,top:"0%",left:"10%",title:"实时路况",icon:"image://https://img.icons8.com/doodle/96/traffic-lights-sign.png",onclick:m}},ae(o,de);let n=null;n=be(t.value);const w=new Date().toLocaleString("en-US",{timeZone:"Asia/Shanghai"}).split(", ");new Date(w[0]);const f=b.hour.value,I=Math.floor(Math.random()*1e3),_=[],p=["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"];console.log(f);for(let k=0;k<p.length;k++){const R=p[k],x=parseInt(R.split(":")[0]);if(f>x||f===x){let E=0;x>=0&&x<6?E=Math.floor(I*50/1e3):(x===6||x===9||x===12||x===15)&&(E=Math.floor(Math.random()*1e3+80)),_.push(E)}else _.push(null)}Array.isArray(me.series)&&me.series.length>0&&(me.series[0].data=_),ae(n,me),u.goTo({center:[[101.57777119,36.49234074]],zoom:14})}),ue(()=>{u.map.removeAll()}),(o,n)=>(M(),O(Z,null,[e("div",oo,[no,e("div",ao,[e("div",{class:"device-panel-title",onClick:m},so),e("div",{ref_key:"roadchart",ref:v,class:"device-panel-chart"},null,512),io]),e("div",ro,[co,e("div",{ref_key:"visitorschart",ref:t,class:"device-panel-chart"},null,512),uo])]),G(Nt),g(r)?(M(),Ae(to,{key:0})):ve("",!0)],64))}});const mo=Ge(po,[["__scopeId","data-v-09285cbb"]]),z=i=>(Ve("data-v-422f5d19"),i=i(),Oe(),i),Ao={class:"hotel"},vo={class:"hotel-panel line"},fo=z(()=>e("div",{class:"hotel-panel-title"},[e("span",null,"餐厅信息查询"),K("> ")],-1)),ho=z(()=>e("option",{value:""},"请选择地区",-1)),go=["value"],yo={class:"table-container"},bo={class:"table"},xo=z(()=>e("tr",null,[e("th",null,"Hotel Name"),e("th",null,"Price"),e("th",null,"Rating")],-1)),wo=z(()=>e("div",{class:"hotel-panel-footer"},null,-1)),_o={class:"hotel-panel line"},Eo=z(()=>e("div",{class:"hotel-panel-title"},[e("span",null,"缓冲区分析")],-1)),So={class:"container"},Co={class:"buffer-analysis-module"},ko={class:"label"},Io={class:"input-section"},To=z(()=>e("label",{for:"longitude"},"经度:",-1)),Bo=["disabled"],Mo={class:"input-section"},Fo=z(()=>e("label",{for:"latitude"},"纬度:",-1)),Ro=["disabled"],Vo=z(()=>e("div",{class:"input-section"},[e("label",{for:"radius"},"缓冲半径:"),e("input",{type:"text",id:"radius",placeholder:"输入缓冲半径"})],-1)),Oo={id:"mode",style:{color:"rgb(192, 184, 184)","text-align":"end","font-family":"Arial, Helvetica, sans-serif","font-style":"italic","font-size":"5px","margin-bottom":"2px"}},Go=z(()=>e("div",{class:"hotel-panel-footer"},null,-1)),Do={class:"hotel-panel line"},zo=z(()=>e("div",{class:"hotel-panel-title"},[e("span",null,"餐厅综合评价")],-1)),Po=z(()=>e("option",{value:""},"请选择餐厅",-1)),Uo=["value"],Lo=z(()=>e("div",{class:"hotel-panel-footer"},null,-1)),Ho=[Lo],Qo={id:"hotel-details",class:"details"},qo={class:"hoteldetails"},Yo=z(()=>e("thead",null,[e("tr",null,[e("th",null,"名字"),e("th",null,"价格"),e("th",null,"评分")])],-1)),Xo=z(()=>e("tr",null,null,-1)),Jo=[Xo],jo=le({__name:"restpages",setup(i){let b=new $({url:"https://services7.arcgis.com/R5nxHh77a68zEsEp/arcgis/rest/services/%E4%BD%8F%E5%AE%BF/FeatureServer",outFields:["*"]});const r=new Ze({title:"{name}",content:[{type:"fields",fieldInfos:[{fieldName:"price",label:"Price"},{fieldName:"rating",label:"Rating"}]}]}),A=new We({style:"path",path:"M18.3,8.7c0,0-1.7-2.2-8.3-4.4S1.7,8.7,1.7,8.7S6,14.3,10,18c4-3.7,8.3-9.3,8.3-9.3",color:"#17e3f5",outline:{color:"#115687",width:2},size:7}),v=new Ne({symbol:A});let t=oe().getView(),u=tt(),c=!0;const d=y(null);$e().createOnlayer();const o=y(""),n=y(ze),C=[...new Set(n.value.map(l=>l.region))];function w(){n.value.sort((l,s)=>l.price-s.price)}function f(){n.value.sort((l,s)=>s.rating-l.rating)}const I=je(()=>o.value?(o.value==="察尔汗盐湖"&&t.goTo({center:[[94.933310210425,36.412371]],zoom:12}),o.value==="卓尔山风景区"&&t.goTo({center:[[100.27451,38.18467]],zoom:12}),o.value==="塔尔寺"&&t.goTo({center:[[101.5732,36.5332]],zoom:12}),n.value.filter(l=>l.region===o.value).sort()):n.value.sort()),_=ot(),p=y(""),h=new N,k=new N,R=new N,x=new N;t.map.addMany([h,k,R,x]);let E=!0;const Q=y("buffering"),S=y(!0),Y=()=>{S.value=!S.value};function X(l){E=l.key==="b"&&!E,Q.value=E?"navigation":"buffering"}async function P(){h.removeAll();const l=document.getElementById("longitude").value,s=document.getElementById("latitude").value,a=document.getElementById("radius").value;await _.createBuffer(l,s,a,t,h,k),t.goTo({center:[[l,s]],zoom:10})}function U(){t.map.remove(k),t.map.remove(h),t.map.add(x),t.map.add(R),t.on("key-down",X),t.on(["click","pointer-move"],l=>{if(!c){t.removeHandles("key-down",X),t.map.remove(x),t.map.remove(R);return}const s=document.getElementById("radius").value;_.createBufferview(l,t,s,R,x,E)})}function V(){t.map.remove(k),t.map.remove(h),t.map.remove(x),t.map.remove(x),d.value&&(d.value.innerHTML=""),t.goTo({center:[[96.945438,35.850631]],zoom:5})}const B=y(null);let F=null;const T=y(null);function J(){if(T.value){const{price:l=0,rating:s=0,location:a=0,hygiene:te=0,service:Ee=0,synthesis:Se=0}=T.value,Ce=[[l,s,a,te,Ee,Se]];q.series[0].data=Ce,F==null||F.setOption(q),ae(F,q)}}let we=y(null),ee=1,j=null;function ie(){j=setInterval(()=>{ee=ee+1,T.value=n.value[ee],J()},2e3)}function re(){j&&(clearInterval(j),j=null)}function _e(){re(),J(),T.value||ie()}return se(async()=>{t.map.add(b),t.goTo({center:[[101.5732,36.5332]],zoom:12}),b.popupTemplate=r,b.renderer=v,t.on("click",l=>{t.hitTest(l).then(s=>{const a=s.results[0];if(a&&a.graphic){const te=a.graphic.attributes;t.popup.open({title:te.name,content:r.content,location:l.mapPoint})}})}),B.value&&(F=be(B.value),q.toolbox={feature:{myTool2:{show:!0,title:"热力图",icon:"image://https://img.icons8.com/color/48/000000/fire-element.png",onclick:u.createHeatmap}}},ae(F,q),J(),ie()),fe(T,()=>{J()}),fe(p,l=>{l==="clickAnalysisEnabled"?(c=!0,U()):l==="inputAnalysisEnabled"&&(c=!1,t.map.add(k),t.map.add(h))})}),ue(()=>{t.map.removeAll(),re()}),(l,s)=>(M(),O(Z,null,[e("div",Ao,[e("div",vo,[fo,W(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>o.value=a)},[ho,(M(),O(Z,null,ne(C,a=>e("option",{option:"",value:a},H(a),9,go)),64))],512),[[he,o.value]]),G(Re,null,{default:L(()=>[e("div",yo,[e("table",bo,[e("thead",null,[e("tr",null,[e("th",{colspan:"3"},[e("button",{onClick:w},"按价格排序"),e("button",{onClick:f},"按评分排序")])]),xo]),e("tbody",null,[(M(!0),O(Z,null,ne(g(I),a=>(M(),O("tr",{key:a.id},[e("td",null,H(a.name),1),e("td",null,H(a.price),1),e("td",null,H(a.rating),1)]))),128))])])])]),_:1}),wo]),e("div",_o,[Eo,e("div",So,[e("div",Co,[e("label",ko,[W(e("input",{type:"radio",value:"clickAnalysisEnabled","onUpdate:modelValue":s[1]||(s[1]=a=>p.value=a)},null,512),[[ge,p.value]]),K("屏幕 ")]),e("label",null,[W(e("input",{type:"radio",value:"inputAnalysisEnabled","onUpdate:modelValue":s[2]||(s[2]=a=>p.value=a)},null,512),[[ge,p.value]]),K("参数 ")]),e("div",Io,[To,e("input",{type:"text",id:"longitude",placeholder:"输入经度",disabled:p.value==="clickAnalysisEnabled"},null,8,Bo)]),e("div",Mo,[Fo,e("input",{type:"text",id:"latitude",placeholder:"输入纬度",disabled:p.value==="clickAnalysisEnabled"},null,8,Ro)]),Vo,e("button",{id:"analyze-btn",onClick:P},"确认分析"),e("button",{id:"cancel-btn",onClick:V},"结束分析"),e("div",Oo,H(Q.value),1)])]),Go]),e("div",Do,[zo,W(e("select",{"onUpdate:modelValue":s[3]||(s[3]=a=>T.value=a),onChange:_e,ref_key:"refHotelSelect",ref:we},[Po,(M(!0),O(Z,null,ne(n.value,a=>(M(),O("option",{value:a},H(a.name),9,Uo))),256))],544),[[he,T.value]]),e("div",{class:"hotel-panel-chart",ref_key:"radarchart",ref:B},Ho,512)])]),e("div",{id:"mytest",class:ye({"slide-in":S.value,"slide-out":!S.value})},[e("div",Qo,[e("div",{class:"arrow-button",onClick:Y},[e("span",{class:ye(["arrow-icon",{up:!S.value}])},null,2)]),e("table",qo,[Yo,e("tbody",{ref_key:"tbodyRef",ref:d},Jo,512)])])],2)],64))}});const Zo=Ge(jo,[["__scopeId","data-v-422f5d19"]]),Wo=e("span",null,"设施管理",-1),hn=le({__name:"index",setup(i){const b=y(!1),r=y(!1),A=y(!1),v=y(null);Ke(v);let t=[b,r,A];function u(m){for(let o=0;o<t.length;o++)o!==m&&(t[o].value=!1)}const c=y(!1),d=()=>{c.value=!0};return se(()=>{var m;console.log((m=v.value)==null?void 0:m.clientHeight),setTimeout(()=>{d()},100)}),(m,o)=>(M(),O("div",{ref_key:"screenRef",ref:v,class:"screen"},[G(Re,{name:"right-slide-in"},{default:L(()=>[G(g(it),{class:"box-card",style:st({left:c.value?"0.5%":"-380px"})},{header:L(()=>[Wo]),default:L(()=>[G(g(rt),null,{default:L(()=>[G(g(ke),null,{default:L(()=>[G(g(Ie),null,{default:L(()=>[K("查看酒店住宿")]),_:1}),G(g(Te),{modelValue:g(t)[0].value,"onUpdate:modelValue":o[0]||(o[0]=n=>g(t)[0].value=n),size:"large",class:"mt-2",style:{"margin-left":"24px"},"inline-prompt":"","active-icon":g(Be),"inactive-icon":g(Me),onChange:o[1]||(o[1]=n=>u(0))},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),G(g(ke),null,{default:L(()=>[G(g(Ie),null,{default:L(()=>[K("查看餐饮")]),_:1}),G(g(Te),{modelValue:g(t)[1].value,"onUpdate:modelValue":o[2]||(o[2]=n=>g(t)[1].value=n),size:"large",class:"mt-2",style:{"margin-left":"24px"},"inline-prompt":"","active-icon":g(Be),"inactive-icon":g(Me),onChange:o[3]||(o[3]=n=>u(1))},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),G(g(ke),null,{default:L(()=>[G(g(Ie),null,{default:L(()=>[K("查看路网信息")]),_:1}),G(g(Te),{modelValue:g(t)[2].value,"onUpdate:modelValue":o[4]||(o[4]=n=>g(t)[2].value=n),size:"large",class:"mt-2",style:{"margin-left":"24px"},"inline-prompt":"","active-icon":g(Be),"inactive-icon":g(Me),onChange:o[5]||(o[5]=n=>u(2))},null,8,["modelValue","active-icon","inactive-icon"])]),_:1})]),_:1})]),_:1},8,["style"])]),_:1}),g(t)[0].value?(M(),Ae(Wt,{key:0})):ve("",!0),g(t)[1].value?(M(),Ae(Zo,{key:1})):ve("",!0),g(t)[2].value?(M(),Ae(mo,{key:2})):ve("",!0)],512))}});export{hn as default};
