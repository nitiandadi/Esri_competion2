import{b3 as d,r as m}from"./mapviewstore-8a6f290e.js";async function p(n){var w;await n.whenReady();const a=((w=n.basemapView)==null?void 0:w.baseLayerViews.map(e=>e.layer).toArray())??[];if(!a.length){const e=getComputedStyle(n.container).backgroundColor,u=e&&new d(e);return n.get("background.color")||(u&&u.a!==0?u:null)||null}const r=(await n.takeScreenshot({format:"png",layers:a})).data.data,o=r.length;let t=0,l=0,s=0,g=0,c=0,f=0;for(let e=0;e<o;e+=4){const u=r[e],M=r[e+1],b=r[e+2],h=r[e+3],i=h/255;t+=u*u*i,l+=M*M*i,s+=b*b*i,c+=i,h&&(g+=h,f++)}return t=Math.round(Math.sqrt(t/c)),l=Math.round(Math.sqrt(l/c)),s=Math.round(Math.sqrt(s/c)),new d([t,l,s,g/f/255])}async function C(n){if(!n)return null;const a=await p(n);return m(a)?k(a):null}function k(n){return y(n).isBright?"light":"dark"}function y(n){let{r:a,g:r,b:o,a:t}=n;return t<1&&(a=Math.round(t*a+255*(1-t)),r=Math.round(t*r+255*(1-t)),o=Math.round(t*o+255*(1-t))),new d({r:a,g:r,b:o})}function S(n){const{r:a,g:r,b:o}=y(n);return .2126*a+.7152*r+.0722*o}export{C as a,S as u};
