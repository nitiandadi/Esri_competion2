import {
  e as e4
} from "./chunk-2WS4DQ5K.js";
import {
  j as j3
} from "./chunk-KS4KMM5S.js";
import {
  s as s8
} from "./chunk-OVTZY4DK.js";
import {
  a as a8
} from "./chunk-WCDQWDOM.js";
import {
  s as s6
} from "./chunk-D4SYZIFV.js";
import {
  e as e3,
  r as r4,
  t as t3
} from "./chunk-BITXW4TL.js";
import {
  W,
  e2
} from "./chunk-VPGE46JA.js";
import {
  f,
  h as h2,
  n2 as n,
  p,
  v as v2
} from "./chunk-2DA2JOWA.js";
import {
  He
} from "./chunk-JPG2AHMD.js";
import {
  c
} from "./chunk-C5E4KZMK.js";
import {
  a as a7
} from "./chunk-SJOFHDQC.js";
import {
  d
} from "./chunk-424YCWGU.js";
import {
  v as v3
} from "./chunk-K7L4V6NL.js";
import {
  m as m2,
  x
} from "./chunk-TEBHEW3L.js";
import {
  a as a6
} from "./chunk-PELFA5QO.js";
import {
  s as s5
} from "./chunk-JLHQIHZ7.js";
import {
  a as a4,
  h,
  l as l2
} from "./chunk-FXMJJBXP.js";
import {
  a as a5
} from "./chunk-6YBCJ6DZ.js";
import {
  g as g2
} from "./chunk-MS6YQPPG.js";
import {
  l as l3
} from "./chunk-BHQVXYUV.js";
import {
  U as U2
} from "./chunk-YT74S35I.js";
import {
  a as a3
} from "./chunk-JT54I3AY.js";
import {
  I,
  c2,
  c3,
  c4,
  i2 as i3,
  i3 as i4,
  i4 as i5,
  u as u3
} from "./chunk-CNEENAOZ.js";
import {
  s as s7
} from "./chunk-7OAHPHOV.js";
import {
  j as j2
} from "./chunk-SZO7ZKE4.js";
import {
  i as i2
} from "./chunk-YMLMMCYX.js";
import {
  L,
  S,
  m,
  u as u2
} from "./chunk-UADQEL54.js";
import {
  l
} from "./chunk-6K5VVUVI.js";
import {
  he,
  ie,
  xe
} from "./chunk-YHZVWABO.js";
import {
  i as i6
} from "./chunk-WATRS3LJ.js";
import {
  s as s4
} from "./chunk-S47644HM.js";
import {
  a2,
  e,
  t2,
  v2 as v,
  y3 as y2
} from "./chunk-7GTATSRF.js";
import {
  r as r3
} from "./chunk-PXVSWY3C.js";
import {
  E,
  U,
  g,
  i,
  j,
  y
} from "./chunk-QLY5H3XF.js";
import {
  s as s2,
  s2 as s3
} from "./chunk-UG2OEDEE.js";
import {
  r as r2
} from "./chunk-HSFMVUPO.js";
import {
  u
} from "./chunk-MGJMBJDY.js";
import {
  a,
  r,
  s,
  t
} from "./chunk-WHB7G7RI.js";

// node_modules/@arcgis/core/core/unitFormatUtils.js
var U3 = ["B", "kB", "MB", "GB", "TB"];
function v4(n9, i11) {
  let o7 = 0 === i11 ? 0 : Math.floor(Math.log(i11) / Math.log(s6.KILOBYTES));
  o7 = a3(o7, 0, U3.length - 1);
  const u10 = m(i11 / s6.KILOBYTES ** o7, { maximumFractionDigits: 2 });
  return r2(n9.units.bytes[U3[o7]], { fileSize: u10 });
}

// node_modules/@arcgis/core/widgets/Feature/support/featureUtils.js
var p2 = "esri.widgets.Feature.support.featureUtils";
var m3 = s2.getLogger(p2);
var y3 = /href=(""|'')/gi;
var g3 = /(\{([^\{\r\n]+)\})/g;
var h3 = /\'/g;
var I2 = /^\s*expression\//i;
var b = /(\n)/gi;
var F = /[\u00A0-\u9999<>\&]/gim;
var w = /href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi;
var N2 = /^(?:mailto:|tel:)/;
var E2 = "relationships/";
var T2 = S("short-date-short-time");
function j4(e10) {
  if (!t(e10))
    return e10.get("sourceLayer") || e10.get("layer");
}
async function x2(e10, t6) {
  return "function" == typeof e10 ? e10.call(null, t6) : e10;
}
function C(e10 = "") {
  if (e10)
    return !N2.test(e10.trim().toLowerCase());
}
function M(e10) {
  return !!e10 && I2.test(e10);
}
function q(e10, t6) {
  if (!M(t6) || !e10)
    return null;
  const r9 = t6.replace(I2, "").toLowerCase();
  let n9 = null;
  return e10.some((e11) => e11.name.toLowerCase() === r9 && (n9 = e11, true)), n9;
}
function R2(e10, t6) {
  const r9 = q(t6, e10 == null ? void 0 : e10.fieldName);
  return r9 ? r9.title || null : e10 ? e10.label || e10.fieldName : null;
}
function v5(e10, t6) {
  const r9 = t6.get(e10.toLowerCase());
  return `{${r9 && r9.fieldName || e10}}`;
}
function D(e10) {
  return e10.replace(y3, "");
}
function L2(e10, t6) {
  const r9 = A2(t6, e10);
  return r9 ? r9.name : e10;
}
function U4(e10, t6) {
  return e10 && e10.map((e11) => L2(e11, t6));
}
function A2(e10, t6) {
  return e10 && "function" == typeof e10.getField && t6 ? e10.getField(t6) ?? null : null;
}
function $(e10) {
  return `${e10}`.trim();
}
function S2({ attributes: e10, globalAttributes: t6, layer: r9, text: n9, expressionAttributes: i11, fieldInfoMap: o7 }) {
  return n9 ? G({ formattedAttributes: t6, template: z(n9, { ...t6, ...i11, ...e10 }, r9), fieldInfoMap: o7 }) : "";
}
function G({ formattedAttributes: e10, template: t6, fieldInfoMap: r9 }) {
  return $(D(r2(r2(t6, (e11) => v5(e11, r9)), e10)));
}
function k(e10, t6, r9 = false) {
  const n9 = t6[e10];
  if ("string" == typeof n9) {
    const i11 = "%27", o7 = (r9 ? encodeURIComponent(n9) : n9).replace(h3, i11);
    t6[e10] = o7;
  }
}
function O2(e10, t6 = false) {
  const r9 = { ...e10 };
  return Object.keys(r9).forEach((e11) => k(e11, r9, t6)), r9;
}
function P(e10, t6, r9) {
  const i11 = (t6 = $(t6)) && "{" !== t6[0];
  return r2(e10, O2(r9, i11 || false));
}
function _(e10, t6) {
  return e10.replace(g3, (e11, r9, n9) => {
    const i11 = A2(t6, n9);
    return i11 ? `{${i11.name}}` : r9;
  });
}
function z(e10, t6, r9) {
  const n9 = _(e10, r9);
  return n9 ? n9.replace(w, (e11, r10, n10) => P(e11, r10 || n10, t6)) : n9;
}
function H(e10, t6) {
  if ("string" == typeof e10 && t6 && null == t6.dateFormat && (null != t6.places || null != t6.digitSeparator)) {
    const t7 = Number(e10);
    if (!isNaN(t7))
      return t7;
  }
  return e10;
}
function Q(e10) {
  return "feature" === (e10 == null ? void 0 : e10.type);
}
function Z(e10) {
  return !!(e10 == null ? void 0 : e10.layer);
}
function V(e10) {
  return "map-image" === (e10 == null ? void 0 : e10.type);
}
function B(e10, t6) {
  var _a;
  const r9 = t6.fieldInfos, n9 = t6.fieldName, i11 = (_a = J2(r9, n9)) == null ? void 0 : _a.clone(), o7 = t6.preventPlacesFormatting, s14 = t6.layer, f8 = A2(s14, n9);
  if (i11 && "date" === (f8 == null ? void 0 : f8.type)) {
    const e11 = i11.format || new u3();
    e11.dateFormat = e11.dateFormat || "short-date-short-time", e11.dateTimeFormatOptions = !Z(s14) && Q(s14) && s14.datesInUnknownTimezone || Z(s14) && V(s14.layer) && s14.layer.datesInUnknownTimezone ? { timeZone: "UTC" } : null, i11.format = e11;
  }
  const d5 = i11 && i11.format;
  return "string" == typeof e10 && he(n9) && d5 ? d5.formatRasterPixelValue(e10) : "string" == typeof (e10 = H(e10, d5)) || null == e10 || null == d5 ? re(e10) : o7 ? m(e10, { ...u2(d5), minimumFractionDigits: 0, maximumFractionDigits: 20 }) : d5.format(e10);
}
function J2(e10, t6) {
  if (!e10 || !e10.length || !t6)
    return;
  const r9 = t6.toLowerCase();
  let n9;
  return e10.some((e11) => !(!e11.fieldName || e11.fieldName.toLowerCase() !== r9) && (n9 = e11, true)), n9;
}
function K2({ fieldName: e10, graphic: t6, layer: r9 }) {
  if (ue(e10))
    return null;
  if (!r9 || "function" != typeof r9.getFeatureType)
    return null;
  const { typeIdField: n9 } = r9;
  if (!n9 || e10 !== n9)
    return null;
  const i11 = r9.getFeatureType(t6);
  return i11 ? i11.name : null;
}
function W2({ fieldName: e10, value: t6, graphic: r9, layer: n9 }) {
  if (ue(e10))
    return null;
  if (!n9 || "function" != typeof n9.getFieldDomain)
    return null;
  const i11 = r9 && n9.getFieldDomain(e10, { feature: r9 });
  return i11 && "coded-value" === i11.type ? i11.getName(t6) : null;
}
function X(e10, t6) {
  const { creatorField: r9, creationDateField: n9, editorField: o7, editDateField: a11 } = e10;
  if (!t6)
    return;
  const l10 = t6[a11];
  if ("number" == typeof l10) {
    const e11 = t6[o7];
    return { type: "edit", date: L(l10, T2), user: e11 };
  }
  const u10 = t6[n9];
  if ("number" == typeof u10) {
    const e11 = t6[r9];
    return { type: "create", date: L(u10, T2), user: e11 };
  }
  return null;
}
function Y(e10, t6) {
  const r9 = /* @__PURE__ */ new Map();
  return e10 ? (e10.forEach((e11) => {
    const n9 = L2(e11.fieldName, t6);
    e11.fieldName = n9, r9.set(n9.toLowerCase(), e11);
  }), r9) : r9;
}
function ee(e10) {
  const t6 = [];
  if (!e10)
    return t6;
  const { fieldInfos: r9, content: n9 } = e10;
  return r9 && t6.push(...r9), n9 && Array.isArray(n9) ? (n9.forEach((e11) => {
    if ("fields" === e11.type) {
      const r10 = e11 && e11.fieldInfos;
      r10 && t6.push(...r10);
    }
  }), t6) : t6;
}
function te(e10) {
  return e10.replace(F, (e11) => `&#${e11.charCodeAt(0)};`);
}
function re(e10) {
  return "string" == typeof e10 ? e10.replace(b, '<br class="esri-text-new-line" />') : e10;
}
function ne(e10) {
  const { value: t6, fieldName: r9, fieldInfos: n9, fieldInfoMap: o7, layer: a11, graphic: l10 } = e10;
  if (null == t6)
    return "";
  const u10 = W2({ fieldName: r9, value: t6, graphic: l10, layer: a11 });
  if (u10)
    return u10;
  const s14 = K2({ fieldName: r9, graphic: l10, layer: a11 });
  if (s14)
    return s14;
  if (o7.get(r9.toLowerCase()))
    return B(t6, { fieldInfos: n9 || Array.from(o7.values()), fieldName: r9, layer: a11 });
  const f8 = a11 && a11.fieldsIndex;
  return f8 && f8.isDateField(r9) ? L(t6, T2) : re(t6);
}
function ie2({ fieldInfos: e10, attributes: t6, layer: r9, graphic: n9, fieldInfoMap: i11, relatedInfos: o7 }) {
  const a11 = {};
  return o7 == null ? void 0 : o7.forEach((t7) => ce({ attributes: a11, relatedInfo: t7, fieldInfoMap: i11, fieldInfos: e10, layer: r9 })), t6 && Object.keys(t6).forEach((o8) => {
    const l10 = t6[o8];
    a11[o8] = ne({ fieldName: o8, fieldInfos: e10, fieldInfoMap: i11, layer: r9, value: l10, graphic: n9 });
  }), a11;
}
async function oe(e10, t6) {
  var _a, _b;
  const { layer: r9, graphic: n9, outFields: i11, objectIds: o7, returnGeometry: a11, spatialReference: l10 } = e10, u10 = o7[0];
  if ("number" != typeof u10 && "string" != typeof u10) {
    const e11 = "Could not query required fields for the specified feature. The feature's ID is invalid.", t7 = { layer: r9, graphic: n9, objectId: u10, requiredFields: i11 };
    return m3.warn(e11, t7), null;
  }
  if (!((_b = (_a = v3(r9)) == null ? void 0 : _a.operations) == null ? void 0 : _b.supportsQuery)) {
    const e11 = "The specified layer cannot be queried. The following fields will not be available.", t7 = { layer: r9, graphic: n9, requiredFields: i11, returnGeometry: a11 };
    return m3.warn(e11, t7), null;
  }
  const s14 = r9.createQuery();
  s14.objectIds = o7, s14.outFields = (i11 == null ? void 0 : i11.length) ? i11 : [r9.objectIdField], s14.returnGeometry = !!a11, s14.returnZ = !!a11, s14.returnM = !!a11, s14.outSpatialReference = l10;
  return (await r9.queryFeatures(s14, t6)).features[0];
}
async function ae(e10) {
  var _a;
  if (!((_a = e10.expressionInfos) == null ? void 0 : _a.length))
    return false;
  const t6 = await i6(), { arcadeUtils: { hasGeometryFunctions: r9 } } = t6;
  return r9(e10);
}
async function le({ graphic: e10, popupTemplate: t6, layer: r9, spatialReference: n9 }, i11) {
  if (!r9 || !t6)
    return;
  if ("function" == typeof r9.load && await r9.load(i11), !e10.attributes)
    return;
  const o7 = e10.attributes[r9.objectIdField];
  if (null == o7)
    return;
  const a11 = [o7], l10 = await t6.getRequiredFields(r9.fieldsIndex), u10 = xe(l10, e10), f8 = u10 ? [] : l10, c15 = t6.returnGeometry || await ae(t6);
  if (u10 && !c15)
    return;
  const d5 = await oe({ layer: r9, graphic: e10, outFields: f8, objectIds: a11, returnGeometry: c15, spatialReference: n9 }, i11);
  d5 && (d5.geometry && (e10.geometry = d5.geometry), d5.attributes && (e10.attributes = { ...e10.attributes, ...d5.attributes }));
}
function ue(e10 = "") {
  return !!e10 && e10.includes(E2);
}
function se(e10) {
  return e10 ? `${E2}${e10.layerId}/${e10.fieldName}` : "";
}
function fe({ attributes: e10, graphic: t6, relatedInfo: r9, fieldInfos: n9, fieldInfoMap: i11, layer: o7 }) {
  e10 && t6 && r9 && Object.keys(t6.attributes).forEach((a11) => {
    const l10 = se({ layerId: r9.relation.id.toString(), fieldName: a11 }), u10 = t6.attributes[a11];
    e10[l10] = ne({ fieldName: l10, fieldInfos: n9, fieldInfoMap: i11, layer: o7, value: u10, graphic: t6 });
  });
}
function ce({ attributes: e10, relatedInfo: t6, fieldInfoMap: r9, fieldInfos: n9, layer: i11 }) {
  e10 && t6 && (t6.relatedFeatures && t6.relatedFeatures && t6.relatedFeatures.forEach((o7) => fe({ attributes: e10, graphic: o7, relatedInfo: t6, fieldInfoMap: r9, fieldInfos: n9, layer: i11 })), t6.relatedStatsFeatures && t6.relatedStatsFeatures && t6.relatedStatsFeatures.forEach((o7) => fe({ attributes: e10, graphic: o7, relatedInfo: t6, fieldInfoMap: r9, fieldInfos: n9, layer: i11 })));
}
var de = (e10) => {
  if (!e10)
    return false;
  const t6 = e10.toUpperCase();
  return t6.includes("CURRENT_TIMESTAMP") || t6.includes("CURRENT_DATE") || t6.includes("CURRENT_TIME");
};
var pe = ({ layer: e10, method: t6, query: n9, definitionExpression: i11 }) => {
  var _a, _b;
  if (!((_b = (_a = e10.capabilities) == null ? void 0 : _a.query) == null ? void 0 : _b.supportsCacheHint) || "attachments" === t6)
    return;
  const o7 = r(n9.where) ? n9.where : null, a11 = r(n9.geometry) ? n9.geometry : null;
  de(i11) || de(o7) || "extent" === (a11 == null ? void 0 : a11.type) || "tile" === n9.resultType || (n9.cacheHint = true);
};
var me = ({ query: e10, layer: t6, method: r9 }) => {
  pe({ layer: t6, method: r9, query: e10, definitionExpression: `${t6.definitionExpression} ${t6.serviceDefinitionExpression}` });
};
var ye = ({ queryPayload: e10, layer: t6, method: r9 }) => {
  pe({ layer: t6, method: r9, query: e10, definitionExpression: `${t6.definitionExpression} ${t6.serviceDefinitionExpression}` });
};
function ge(e10, t6, r9) {
  return e10 && t6 && r9 ? he2(e10.allLayers, t6, r9) || he2(e10.allTables, t6, r9) : null;
}
function he2(e10, t6, r9) {
  return e10.find((e11) => e11 !== t6 && "feature" === e11.type && e11.url === t6.url && e11.layerId === r9.relatedTableId);
}

// node_modules/@arcgis/core/widgets/Attachments/AttachmentsViewModel.js
var f2 = { editing: false, operations: { add: true, update: true, delete: true } };
var u4 = j2.ofType(a8);
var y4 = class extends v {
  constructor(t6) {
    super(t6), this._getAttachmentsPromise = null, this._attachmentLayer = null, this.abilities = { ...f2 }, this.activeAttachmentInfo = null, this.activeFileInfo = null, this.attachmentInfos = new u4(), this.fileInfos = new j2(), this.graphic = null, this.mode = "view", this.filesEnabled = false, this.addHandles(l2(() => this.graphic, () => this._graphicChanged(), h));
  }
  destroy() {
    this._attachmentLayer = null, this.graphic = null;
  }
  castAbilities(t6) {
    return { ...f2, ...t6 };
  }
  get state() {
    return this._getAttachmentsPromise ? "loading" : this.graphic ? "ready" : "disabled";
  }
  get supportsResizeAttachments() {
    const { graphic: t6 } = this;
    if (!t6)
      return false;
    const e10 = t6.layer || t6.sourceLayer;
    return (e10 == null ? void 0 : e10.loaded) && "capabilities" in e10 && e10.capabilities && "operations" in e10.capabilities && "supportsResizeAttachments" in e10.capabilities.operations && e10.capabilities.operations.supportsResizeAttachments || false;
  }
  async getAttachments() {
    const { _attachmentLayer: t6, attachmentInfos: e10 } = this;
    if (!t6 || "function" != typeof t6.queryAttachments)
      throw new s3("invalid-layer", "getAttachments(): A valid layer is required.");
    const i11 = this._getObjectId(), a11 = new c({ objectIds: [i11], returnMetadata: true }), r9 = [], s14 = t6.queryAttachments(a11).then((t7) => t7[i11] || r9).catch(() => r9);
    this._getAttachmentsPromise = s14, this.notifyChange("state");
    const o7 = await s14;
    return e10.removeAll(), o7.length && e10.addMany(o7), this._getAttachmentsPromise = null, this.notifyChange("state"), o7;
  }
  async addAttachment(t6, e10 = this.graphic) {
    var _a;
    const { _attachmentLayer: i11, attachmentInfos: a11, abilities: r9 } = this;
    if (!e10)
      throw new s3("invalid-graphic", "addAttachment(): A valid graphic is required.", { graphic: e10 });
    if (!t6)
      throw new s3("invalid-attachment", "addAttachment(): An attachment is required.", { attachment: t6 });
    if (!((_a = r9.operations) == null ? void 0 : _a.add))
      throw new s3("invalid-abilities", "addAttachment(): add abilities are required.");
    if (!i11 || "function" != typeof i11.addAttachment)
      throw new s3("invalid-layer", "addAttachment(): A valid layer is required.");
    const s14 = i11.addAttachment(e10, t6).then((t7) => this._queryAttachment(t7.objectId, e10)), o7 = await s14;
    return a11.add(o7), o7;
  }
  async deleteAttachment(t6) {
    var _a;
    const { _attachmentLayer: e10, attachmentInfos: i11, graphic: a11, abilities: r9 } = this;
    if (!t6)
      throw new s3("invalid-attachment-info", "deleteAttachment(): An attachmentInfo is required.", { attachmentInfo: t6 });
    if (!((_a = r9.operations) == null ? void 0 : _a.delete))
      throw new s3("invalid-abilities", "deleteAttachment(): delete abilities are required.");
    if (!e10 || "function" != typeof e10.deleteAttachments)
      throw new s3("invalid-layer", "deleteAttachment(): A valid layer is required.");
    if (!a11)
      throw new s3("invalid-graphic", "deleteAttachment(): A graphic is required.");
    const s14 = e10.deleteAttachments(a11, [t6.id]).then(() => t6), o7 = await s14;
    return i11.remove(o7), o7;
  }
  async updateAttachment(t6, e10 = this.activeAttachmentInfo) {
    var _a;
    const { _attachmentLayer: i11, attachmentInfos: a11, graphic: r9, abilities: s14 } = this;
    if (!t6)
      throw new s3("invalid-attachment", "updateAttachment(): An attachment is required.", { attachment: t6 });
    if (!e10)
      throw new s3("invalid-attachment-info", "updateAttachment(): An attachmentInfo is required.", { attachmentInfo: e10 });
    if (!((_a = s14.operations) == null ? void 0 : _a.update))
      throw new s3("invalid-abilities", "updateAttachment(): Update abilities are required.");
    const o7 = a11.findIndex((t7) => t7 === e10);
    if (!i11 || "function" != typeof i11.updateAttachment)
      throw new s3("invalid-layer", "updateAttachment(): A valid layer is required.");
    if (!r9)
      throw new s3("invalid-graphic", "updateAttachment(): A graphic is required.");
    const c15 = i11.updateAttachment(r9, e10.id, t6).then((t7) => this._queryAttachment(t7.objectId)), h8 = await c15;
    return a11.splice(o7, 1, h8), h8;
  }
  async commitFiles() {
    return await Promise.all(this.fileInfos.items.map((t6) => this.addAttachment(t6.form))), this.fileInfos.removeAll(), this.getAttachments();
  }
  addFile(t6, e10) {
    if (!t6 || !e10)
      return null;
    const i11 = { file: t6, form: e10 };
    return this.fileInfos.add(i11), i11;
  }
  updateFile(t6, e10, i11 = this.activeFileInfo) {
    if (!t6 || !e10 || !i11)
      return null;
    const a11 = this.fileInfos.findIndex((t7) => i11 === t7);
    return a11 > -1 && this.fileInfos.splice(a11, 1, { file: t6, form: e10 }), this.fileInfos.items[a11];
  }
  deleteFile(t6) {
    const e10 = this.fileInfos.find((e11) => e11.file === t6);
    return e10 ? (this.fileInfos.remove(e10), e10) : null;
  }
  async _queryAttachment(t6, e10) {
    const { _attachmentLayer: i11 } = this;
    if (!t6 || !(i11 == null ? void 0 : i11.queryAttachments))
      throw new s3("invalid-attachment-id", "Could not query attachment.");
    const a11 = this._getObjectId(e10), r9 = new c({ objectIds: [a11], attachmentsWhere: `AttachmentId=${t6}`, returnMetadata: true });
    return i11.queryAttachments(r9).then((t7) => t7[a11][0]);
  }
  _getObjectId(t6 = this.graphic) {
    return (t6 == null ? void 0 : t6.getObjectId()) ?? null;
  }
  _graphicChanged() {
    this.graphic && (this._setAttachmentLayer(), this.getAttachments().catch(() => {
    }));
  }
  _setAttachmentLayer() {
    const { graphic: t6 } = this, e10 = j4(t6);
    this._attachmentLayer = e10 ? "scene" === e10.type && r(e10.associatedLayer) ? e10.associatedLayer : e10 : null;
  }
};
e([y2()], y4.prototype, "abilities", void 0), e([s4("abilities")], y4.prototype, "castAbilities", null), e([y2()], y4.prototype, "activeAttachmentInfo", void 0), e([y2()], y4.prototype, "activeFileInfo", void 0), e([y2({ readOnly: true, type: u4 })], y4.prototype, "attachmentInfos", void 0), e([y2()], y4.prototype, "fileInfos", void 0), e([y2({ type: g2 })], y4.prototype, "graphic", void 0), e([y2()], y4.prototype, "mode", void 0), e([y2({ readOnly: true })], y4.prototype, "state", null), e([y2()], y4.prototype, "filesEnabled", void 0), e([y2({ readOnly: true })], y4.prototype, "supportsResizeAttachments", null), y4 = e([a2("esri.widgets.Attachments.AttachmentsViewModel")], y4);
var A3 = y4;

// node_modules/@arcgis/core/widgets/Attachments/support/attachmentUtils.js
function e5(i11) {
  const e10 = i11.toLowerCase();
  return "image/bmp" === e10 || "image/emf" === e10 || "image/exif" === e10 || "image/gif" === e10 || "image/x-icon" === e10 || "image/jpeg" === e10 || "image/png" === e10 || "image/tiff" === e10 || "image/x-wmf" === e10;
}
function p3(e10) {
  const p9 = a5("esri/themes/base/images/files/");
  return e10 ? "text/plain" === e10 ? `${p9}text-32.svg` : "application/pdf" === e10 ? `${p9}pdf-32.svg` : "text/csv" === e10 ? `${p9}csv-32.svg` : "application/gpx+xml" === e10 ? `${p9}gpx-32.svg` : "application/x-dwf" === e10 ? `${p9}cad-32.svg` : "application/postscript" === e10 || "application/json" === e10 || "text/xml" === e10 || "model/vrml" === e10 ? `${p9}code-32.svg` : "application/x-zip-compressed" === e10 || "application/x-7z-compressed" === e10 || "application/x-gzip" === e10 || "application/x-tar" === e10 || "application/x-gtar" === e10 || "application/x-bzip2" === e10 || "application/gzip" === e10 || "application/x-compress" === e10 || "application/x-apple-diskimage" === e10 || "application/x-rar-compressed" === e10 || "application/zip" === e10 ? `${p9}zip-32.svg` : e10.includes("image/") ? `${p9}image-32.svg` : e10.includes("audio/") ? `${p9}sound-32.svg` : e10.includes("video/") ? `${p9}video-32.svg` : e10.includes("msexcel") || e10.includes("ms-excel") || e10.includes("spreadsheetml") ? `${p9}excel-32.svg` : e10.includes("msword") || e10.includes("ms-word") || e10.includes("wordprocessingml") ? `${p9}word-32.svg` : e10.includes("powerpoint") || e10.includes("presentationml") ? `${p9}report-32.svg` : `${p9}generic-32.svg` : `${p9}generic-32.svg`;
}

// node_modules/@arcgis/core/widgets/Attachments.js
var v6 = { addButton: true, addSubmitButton: true, cancelAddButton: true, cancelUpdateButton: true, deleteButton: true, errorMessage: true, progressBar: true, updateButton: true };
var y5 = "esri-attachments";
var w2 = "esri-button";
var A4 = { base: y5, loaderContainer: `${y5}__loader-container`, loader: `${y5}__loader`, fadeIn: `${y5}--fade-in`, container: `${y5}__container`, containerList: `${y5}__container--list`, containerPreview: `${y5}__container--preview`, actions: `${y5}__actions`, deleteButton: `${y5}__delete-button`, addAttachmentButton: `${y5}__add-attachment-button`, errorMessage: `${y5}__error-message`, items: `${y5}__items`, item: `${y5}__item`, itemButton: `${y5}__item-button`, itemMask: `${y5}__item-mask`, itemMaskIcon: `${y5}__item-mask--icon`, itemImage: `${y5}__image`, itemImageResizable: `${y5}__image--resizable`, itemLabel: `${y5}__label`, itemFilename: `${y5}__filename`, itemChevronIcon: `${y5}__item-chevron-icon`, itemLink: `${y5}__item-link`, itemLinkOverlay: `${y5}__item-link-overlay`, itemLinkOverlayIcon: `${y5}__item-link-overlay-icon`, itemEditIcon: `${y5}__item-edit-icon`, itemAddIcon: `${y5}__item-add-icon`, itemAddButton: `${y5}__item-add-button`, formNode: `${y5}__form-node`, fileFieldset: `${y5}__file-fieldset`, fileLabel: `${y5}__file-label`, fileName: `${y5}__file-name`, fileInput: `${y5}__file-input`, metadata: `${y5}__metadata`, metadataFieldset: `${y5}__metadata-fieldset`, progressBar: `${y5}__progress-bar`, esriWidget: "esri-widget", esriButton: w2, buttonDisabled: `${w2}--disabled`, esriButtonSecondary: `${w2}--secondary`, esriButtonTertiary: `${w2}--tertiary`, esriButtonThird: `${w2}--third`, esriButtonSmall: `${w2}--small`, esriButtonHalf: `${w2}--half`, empty: "esri-widget__content--empty", iconExternalLink: "esri-icon-link-external", iconEdit: "esri-icon-edit", iconRight: "esri-icon-right", iconLeft: "esri-icon-left", iconPlus: "esri-icon-plus" };
var F2 = window.CSS;
var k2 = class extends W {
  constructor(e10, t6) {
    super(e10, t6), this.displayType = "auto", this.messages = null, this.messagesUnits = null, this.selectedFile = null, this.submitting = false, this.viewModel = null, this.visibleElements = { ...v6 }, this._supportsImageOrientation = F2 && F2.supports && F2.supports("image-orientation", "from-image"), this._addAttachmentForm = null, this._updateAttachmentForm = null;
  }
  initialize() {
    this.viewModel || (this.viewModel = new A3()), this.addHandles([a4(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.attachmentInfos;
    }, "change", () => this.scheduleRender()), a4(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.fileInfos;
    }, "change", () => this.scheduleRender()), l2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.mode;
    }, () => this._modeChanged(), h)]);
  }
  loadDependencies() {
    return Promise.all([import("./calcite-icon-XAFZ5NNH.js")]);
  }
  get abilities() {
    return this.viewModel.abilities;
  }
  set abilities(e10) {
    this.viewModel.abilities = e10;
  }
  get effectiveDisplayType() {
    const { displayType: e10 } = this;
    return e10 && "auto" !== e10 ? e10 : this.viewModel.supportsResizeAttachments ? "preview" : "list";
  }
  get graphic() {
    return this.viewModel.graphic;
  }
  set graphic(e10) {
    this.viewModel.graphic = e10;
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(e10) {
    this._overrideIfSome("label", e10);
  }
  castVisibleElements(e10) {
    return { ...v6, ...e10 };
  }
  addAttachment() {
    const { _addAttachmentForm: e10, viewModel: s14 } = this;
    return this._set("submitting", true), this._set("error", null), s14.addAttachment(e10).then((e11) => (this._set("submitting", false), this._set("error", null), s14.mode = "view", e11)).catch((e11) => {
      throw this._set("submitting", false), this._set("error", new s3("attachments:add-attachment", this.messages.addErrorMessage, e11)), e11;
    });
  }
  deleteAttachment(e10) {
    const { viewModel: s14 } = this;
    return this._set("submitting", true), this._set("error", null), s14.deleteAttachment(e10).then((e11) => (this._set("submitting", false), this._set("error", null), s14.mode = "view", e11)).catch((e11) => {
      throw this._set("submitting", false), this._set("error", new s3("attachments:delete-attachment", this.messages.deleteErrorMessage, e11)), e11;
    });
  }
  updateAttachment() {
    const { viewModel: e10 } = this, { _updateAttachmentForm: s14 } = this;
    return this._set("submitting", true), this._set("error", null), e10.updateAttachment(s14).then((t6) => (this._set("submitting", false), this._set("error", null), e10.mode = "view", t6)).catch((e11) => {
      throw this._set("submitting", false), this._set("error", new s3("attachments:update-attachment", this.messages.updateErrorMessage, e11)), e11;
    });
  }
  addFile() {
    const e10 = this.viewModel.addFile(this.selectedFile, this._addAttachmentForm);
    return this.viewModel.mode = "view", e10;
  }
  updateFile() {
    const { viewModel: e10 } = this, t6 = e10.updateFile(this.selectedFile, this._updateAttachmentForm, e10.activeFileInfo);
    return e10.mode = "view", t6;
  }
  deleteFile(e10) {
    var _a;
    const t6 = this.viewModel.deleteFile(e10 || ((_a = this.viewModel.activeFileInfo) == null ? void 0 : _a.file));
    return this.viewModel.mode = "view", t6;
  }
  render() {
    const { submitting: e10, viewModel: t6 } = this, { state: s14 } = t6;
    return n("div", { class: this.classes(A4.base, A4.esriWidget) }, e10 ? this.renderProgressBar() : null, "loading" === s14 ? this.renderLoading() : this.renderAttachments(), this.renderErrorMessage());
  }
  renderErrorMessage() {
    const { error: e10, visibleElements: t6 } = this;
    return e10 && t6.errorMessage ? n("div", { key: "error-message", class: A4.errorMessage }, e10.message) : null;
  }
  renderAttachments() {
    const { activeFileInfo: e10, mode: t6, activeAttachmentInfo: s14 } = this.viewModel;
    return "add" === t6 ? this.renderAddForm() : "edit" === t6 ? this.renderDetailsForm(s14 || e10) : this.renderAttachmentContainer();
  }
  renderLoading() {
    return n("div", { class: A4.loaderContainer, key: "loader" }, n("div", { class: A4.loader }));
  }
  renderProgressBar() {
    return this.visibleElements.progressBar ? n("div", { class: A4.progressBar, key: "progress-bar" }) : null;
  }
  renderAddForm() {
    const { submitting: e10, selectedFile: t6 } = this, s14 = e10 || !t6, i11 = this.visibleElements.cancelAddButton ? n("button", { type: "button", bind: this, disabled: e10, onclick: this._cancelForm, class: this.classes(A4.esriButton, A4.esriButtonTertiary, A4.esriButtonSmall, A4.esriButtonHalf, e10 && A4.buttonDisabled) }, this.messages.cancel) : null, a11 = this.visibleElements.addSubmitButton ? n("button", { type: "submit", disabled: s14, class: this.classes(A4.esriButton, A4.esriButtonSecondary, A4.esriButtonSmall, A4.esriButtonHalf, { [A4.buttonDisabled]: s14 }) }, this.messages.add) : null, n9 = t6 ? n("span", { key: "file-name", class: A4.fileName }, t6.name) : null, r9 = n("form", { bind: this, afterCreate: v2, afterRemoved: h2, "data-node-ref": "_addAttachmentForm", onsubmit: this._submitAddAttachment }, n("fieldset", { class: A4.fileFieldset }, n9, n("label", { class: this.classes(A4.fileLabel, A4.esriButton, A4.esriButtonSecondary) }, t6 ? this.messages.changeFile : this.messages.selectFile, n("input", { class: A4.fileInput, type: "file", name: "attachment", bind: this, onchange: this._handleFileInputChange }))), a11, i11);
    return n("div", { key: "add-form-container", class: A4.formNode }, r9);
  }
  renderDetailsForm(e10) {
    var _a, _b, _c;
    const { visibleElements: t6, viewModel: i11, selectedFile: a11, submitting: n9 } = this, { abilities: l10 } = i11, o7 = n9 || !a11;
    let d5, c15, m11, h8;
    a11 ? (d5 = a11.type, c15 = a11.name, m11 = a11.size) : e10 && "file" in e10 ? (d5 = e10.file.type, c15 = e10.file.name, m11 = e10.file.size) : e10 && "contentType" in e10 && (d5 = e10.contentType, c15 = e10.name, m11 = e10.size, h8 = e10.url);
    const u10 = l10.editing && ((_a = l10.operations) == null ? void 0 : _a.delete) && t6.deleteButton ? n("button", { key: "delete-button", type: "button", disabled: n9, bind: this, onclick: (t7) => this._submitDeleteAttachment(t7, e10), class: this.classes(A4.esriButton, A4.esriButtonSmall, A4.esriButtonTertiary, A4.deleteButton, { [A4.buttonDisabled]: n9 }) }, this.messages.delete) : void 0, b9 = l10.editing && ((_b = l10.operations) == null ? void 0 : _b.update) && t6.updateButton ? n("button", { disabled: o7, key: "update-button", type: "submit", class: this.classes(A4.esriButton, A4.esriButtonSmall, A4.esriButtonThird, { [A4.buttonDisabled]: o7 }) }, this.messages.update) : void 0, f8 = this.visibleElements.cancelUpdateButton ? n("button", { disabled: n9, key: "cancel-button", type: "button", bind: this, onclick: this._cancelForm, class: this.classes(A4.esriButton, A4.esriButtonSmall, A4.esriButtonTertiary, A4.esriButtonThird, { [A4.buttonDisabled]: n9 }) }, this.messages.cancel) : void 0, v8 = l10.editing && ((_c = l10.operations) == null ? void 0 : _c.update) ? n("fieldset", { key: "file", class: A4.fileFieldset }, n("span", { key: "file-name", class: A4.fileName }, c15), n("label", { class: this.classes(A4.fileLabel, A4.esriButton, A4.esriButtonSecondary) }, this.messages.changeFile, n("input", { class: A4.fileInput, type: "file", name: "attachment", bind: this, onchange: this._handleFileInputChange }))) : void 0, y10 = n("fieldset", { key: "size", class: A4.metadataFieldset }, n("label", null, v4(this.messagesUnits, m11 ?? 0))), w7 = n("fieldset", { key: "content-type", class: A4.metadataFieldset }, n("label", null, d5)), F6 = r(h8) ? n("a", { class: A4.itemLink, href: h8, rel: "noreferrer", target: "_blank" }, this.renderImageMask(e10, 400), n("div", { class: A4.itemLinkOverlay }, n("span", { class: A4.itemLinkOverlayIcon }, n("calcite-icon", { icon: "launch" })))) : this.renderImageMask(e10, 400), k3 = n("form", { bind: this, afterCreate: v2, afterRemoved: h2, "data-node-ref": "_updateAttachmentForm", onsubmit: (t7) => this._submitUpdateAttachment(t7, e10) }, n("div", { class: A4.metadata }, y10, w7), v8, n("div", { class: A4.actions }, u10, f8, b9));
    return n("div", { key: "edit-form-container", class: A4.formNode }, F6, k3);
  }
  renderImageMask(e10, t6) {
    return e10 ? "file" in e10 ? this.renderGenericImageMask(e10.file.name, e10.file.type) : this.renderImageMaskForAttachment(e10, t6) : null;
  }
  renderGenericImageMask(e10, t6) {
    const { supportsResizeAttachments: s14 } = this.viewModel, i11 = p3(t6), a11 = { [A4.itemImageResizable]: s14 };
    return n("div", { class: this.classes(A4.itemMaskIcon, A4.itemMask) }, n("img", { title: e10, alt: e10, src: i11, class: this.classes(a11, A4.itemImage) }));
  }
  renderImageMaskForAttachment(e10, t6) {
    const { supportsResizeAttachments: s14 } = this.viewModel;
    if (!e10)
      return null;
    const { contentType: i11, name: a11, url: n9 } = e10;
    if (!s14 || !e5(i11))
      return this.renderGenericImageMask(a11, i11);
    const r9 = this._getCSSTransform(e10), l10 = r9 ? { transform: r9, "image-orientation": "none" } : {}, o7 = `${n9}${(n9 == null ? void 0 : n9.includes("?")) ? "&" : "?"}w=${t6}`, d5 = { [A4.itemImageResizable]: s14 };
    return n("div", { class: this.classes(A4.itemMask) }, n("img", { styles: l10, alt: a11, title: a11, src: o7, class: this.classes(d5, A4.itemImage) }));
  }
  renderFile(e10) {
    const { file: t6 } = e10;
    return n("li", { class: A4.item, key: t6 }, n("button", { key: "details-button", bind: this, class: A4.itemButton, title: this.messages.attachmentDetails, "aria-label": this.messages.attachmentDetails, onclick: () => this._startEditFile(e10), type: "button" }, this.renderImageMask(e10), n("label", { class: A4.itemLabel }, n("span", { class: A4.itemFilename }, t6.name || this.messages.noTitle), n("span", { "aria-hidden": "true", class: this.classes(A4.itemChevronIcon, f(this.container) ? A4.iconLeft : A4.iconRight) }))));
  }
  renderAttachmentInfo({ attachmentInfo: e10, displayType: t6 }) {
    const { viewModel: s14, effectiveDisplayType: i11 } = this, { abilities: a11, supportsResizeAttachments: n9 } = s14, { contentType: r9, name: l10, url: o7 } = e10, d5 = this.renderImageMask(e10, "list" === t6 ? 48 : 400), c15 = a11.editing ? n("span", { "aria-hidden": "true", class: this.classes(A4.itemChevronIcon, f(this.container) ? A4.iconLeft : A4.iconRight) }) : null, m11 = [d5, "preview" === i11 && n9 && e5(r9) ? null : n("label", { class: A4.itemLabel }, n("span", { class: A4.itemFilename }, l10 || this.messages.noTitle), c15)], h8 = a11.editing ? n("button", { key: "details-button", bind: this, class: A4.itemButton, title: this.messages.attachmentDetails, "aria-label": this.messages.attachmentDetails, "data-attachment-info-id": e10.id, onclick: () => this._startEditAttachment(e10), type: "button" }, m11) : n("a", { key: "details-link", class: A4.itemButton, href: o7 ?? void 0, target: "_blank" }, m11);
    return n("li", { class: A4.item, key: e10 }, h8);
  }
  renderAttachmentContainer() {
    var _a;
    const { effectiveDisplayType: e10, viewModel: t6, visibleElements: s14 } = this, { attachmentInfos: i11, abilities: a11, fileInfos: n9 } = t6, r9 = !!(i11 == null ? void 0 : i11.length), l10 = !!(n9 == null ? void 0 : n9.length), o7 = { [A4.containerList]: "preview" !== e10, [A4.containerPreview]: "preview" === e10 }, d5 = a11.editing && ((_a = a11.operations) == null ? void 0 : _a.add) && s14.addButton ? n("button", { bind: this, onclick: () => this._startAddAttachment(), class: this.classes(A4.esriButton, A4.esriButtonTertiary, A4.addAttachmentButton), type: "button" }, n("span", { "aria-hidden": "true", class: this.classes(A4.itemAddIcon, A4.iconPlus) }), this.messages.add) : void 0, c15 = r9 ? n("ul", { key: "attachments-list", class: A4.items }, i11.toArray().map((t7) => this.renderAttachmentInfo({ attachmentInfo: t7, displayType: e10 }))) : void 0, m11 = l10 ? n("ul", { key: "file-list", class: A4.items }, n9.toArray().map((e11) => this.renderFile(e11))) : void 0, h8 = l10 || r9 ? void 0 : n("div", { class: A4.empty }, this.messages.noAttachments);
    return n("div", { key: "attachments-container", class: this.classes(A4.container, o7) }, c15, m11, h8, d5);
  }
  _modeChanged() {
    this._set("error", null), this._set("selectedFile", null);
  }
  _handleFileInputChange(e10) {
    const t6 = e10.target, s14 = t6 && t6.files && t6.files.item(0);
    this._set("selectedFile", s14);
  }
  _submitDeleteAttachment(e10, t6) {
    e10.preventDefault(), t6 && ("file" in t6 ? this.deleteFile(t6.file) : t6 && this.deleteAttachment(t6));
  }
  _submitAddAttachment(e10) {
    e10.preventDefault(), this.viewModel.filesEnabled ? this.addFile() : this.addAttachment();
  }
  _submitUpdateAttachment(e10, t6) {
    e10.preventDefault(), t6 && "file" in t6 ? this.updateFile() : this.updateAttachment();
  }
  _startEditAttachment(e10) {
    const { viewModel: t6 } = this;
    t6.activeFileInfo = null, t6.activeAttachmentInfo = e10, t6.mode = "edit";
  }
  _startEditFile(e10) {
    const { viewModel: t6 } = this;
    t6.activeAttachmentInfo = null, t6.activeFileInfo = e10, t6.mode = "edit";
  }
  _startAddAttachment() {
    this.viewModel.mode = "add";
  }
  _cancelForm(e10) {
    e10.preventDefault(), this.viewModel.mode = "view";
  }
  _getCSSTransform(e10) {
    const { orientationInfo: t6 } = e10;
    return !this._supportsImageOrientation && t6 ? [t6.rotation ? `rotate(${t6.rotation}deg)` : "", t6.mirrored ? "scaleX(-1)" : ""].join(" ") : "";
  }
};
e([y2()], k2.prototype, "abilities", null), e([y2()], k2.prototype, "displayType", void 0), e([y2({ readOnly: true })], k2.prototype, "effectiveDisplayType", null), e([y2()], k2.prototype, "graphic", null), e([y2()], k2.prototype, "label", null), e([y2(), e2("esri/widgets/Attachments/t9n/Attachments")], k2.prototype, "messages", void 0), e([y2(), e2("esri/core/t9n/Units")], k2.prototype, "messagesUnits", void 0), e([y2({ readOnly: true })], k2.prototype, "selectedFile", void 0), e([y2({ readOnly: true })], k2.prototype, "submitting", void 0), e([y2({ readOnly: true })], k2.prototype, "error", void 0), e([y2({ type: A3 })], k2.prototype, "viewModel", void 0), e([y2()], k2.prototype, "visibleElements", void 0), e([s4("visibleElements")], k2.prototype, "castVisibleElements", null), k2 = e([a2("esri.widgets.Attachments")], k2);
var B2 = k2;

// node_modules/@arcgis/core/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel.js
var o = class extends A3 {
  constructor(t6) {
    super(t6), this.description = null, this.title = null;
  }
};
e([y2()], o.prototype, "description", void 0), e([y2()], o.prototype, "title", void 0), o = e([a2("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")], o);
var c5 = o;

// node_modules/@arcgis/core/widgets/support/Heading.js
var i7 = { heading: "esri-widget__heading" };
function n2({ level: t6, class: n9, ...s14 }, a11) {
  const c15 = o2(t6);
  return n(`h${c15}`, { ...s14, class: p(i7.heading, n9), role: "heading", "aria-level": String(c15) }, a11);
}
function o2(r9) {
  return a3(Math.ceil(r9), 1, 6);
}

// node_modules/@arcgis/core/widgets/Feature/support/FeatureElementInfo.js
var p4 = "esri-feature-element-info";
var n3 = { base: p4, title: `${p4}__title`, description: `${p4}__description` };
var c6 = class extends W {
  constructor(e10, t6) {
    super(e10, t6), this.description = null, this.headingLevel = 2, this.title = null;
  }
  render() {
    return n("div", { class: n3.base }, this.renderTitle(), this.renderDescription());
  }
  renderTitle() {
    const { title: e10 } = this;
    return e10 ? n(n2, { level: this.headingLevel, class: n3.title }, e10) : null;
  }
  renderDescription() {
    const { description: e10 } = this;
    return e10 ? n("div", { key: "description", class: n3.description }, e10) : null;
  }
};
e([y2()], c6.prototype, "description", void 0), e([y2()], c6.prototype, "headingLevel", void 0), e([y2()], c6.prototype, "title", void 0), c6 = e([a2("esri.widgets.Feature.support.FeatureElementInfo")], c6);
var l5 = c6;

// node_modules/@arcgis/core/widgets/Feature/FeatureAttachments.js
var d2 = { base: "esri-feature-attachments" };
var c7 = class extends W {
  constructor(e10, t6) {
    super(e10, t6), this._featureElementInfo = null, this.attachmentsWidget = new B2(), this.headingLevel = 2, this.viewModel = new c5();
  }
  initialize() {
    this._featureElementInfo = new l5(), this.addHandles([l2(() => {
      var _a, _b;
      return [(_a = this.viewModel) == null ? void 0 : _a.description, (_b = this.viewModel) == null ? void 0 : _b.title, this.headingLevel];
    }, () => this._setupFeatureElementInfo(), h), l2(() => this.viewModel, (e10) => this.attachmentsWidget.viewModel = e10, h)]);
  }
  destroy() {
    var _a;
    this.attachmentsWidget.destroy(), (_a = this._featureElementInfo) == null ? void 0 : _a.destroy();
  }
  get description() {
    return this.viewModel.description;
  }
  set description(e10) {
    this.viewModel.description = e10;
  }
  get displayType() {
    return this.attachmentsWidget.displayType;
  }
  set displayType(e10) {
    this.attachmentsWidget.displayType = e10;
  }
  get graphic() {
    return this.viewModel.graphic;
  }
  set graphic(e10) {
    this.viewModel.graphic = e10;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e10) {
    this.viewModel.title = e10;
  }
  render() {
    var _a;
    const { attachmentsWidget: e10 } = this;
    return n("div", { class: d2.base }, (_a = this._featureElementInfo) == null ? void 0 : _a.render(), e10 == null ? void 0 : e10.render());
  }
  _setupFeatureElementInfo() {
    var _a;
    const { description: e10, title: t6, headingLevel: i11 } = this;
    (_a = this._featureElementInfo) == null ? void 0 : _a.set({ description: e10, title: t6, headingLevel: i11 });
  }
};
e([y2({ readOnly: true })], c7.prototype, "attachmentsWidget", void 0), e([y2()], c7.prototype, "description", null), e([y2()], c7.prototype, "displayType", null), e([y2()], c7.prototype, "graphic", null), e([y2()], c7.prototype, "headingLevel", void 0), e([y2()], c7.prototype, "title", null), e([y2({ type: c5 })], c7.prototype, "viewModel", void 0), c7 = e([a2("esri.widgets.Feature.FeatureAttachments")], c7);
var h4 = c7;

// node_modules/@arcgis/core/widgets/Feature/FeatureContent/FeatureContentViewModel.js
var p5 = class extends a6(v) {
  constructor(t6) {
    super(t6), this._loadingPromise = null, this.created = null, this.creator = null, this.destroyer = null, this.graphic = null, this.handles.add(l2(() => this.creator, (t7) => {
      this._destroyContent(), this._createContent(t7);
    }, h));
  }
  destroy() {
    this._destroyContent();
  }
  get state() {
    return this._loadingPromise ? "loading" : "ready";
  }
  _destroyContent() {
    const { created: t6, graphic: e10, destroyer: r9 } = this;
    t6 && e10 && (x2(r9, { graphic: e10 }).catch(() => null), this._set("created", null));
  }
  async _createContent(t6) {
    const e10 = this.graphic;
    if (!e10 || !t6)
      return;
    const r9 = x2(t6, { graphic: e10 }).catch(() => null);
    this._loadingPromise = r9, this.notifyChange("state");
    const o7 = await r9;
    r9 === this._loadingPromise && (this._loadingPromise = null, this.notifyChange("state"), this._set("created", o7));
  }
};
e([y2({ readOnly: true })], p5.prototype, "created", void 0), e([y2()], p5.prototype, "creator", void 0), e([y2()], p5.prototype, "destroyer", void 0), e([y2({ type: g2 })], p5.prototype, "graphic", void 0), e([y2({ readOnly: true })], p5.prototype, "state", null), p5 = e([a2("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")], p5);
var l6 = p5;

// node_modules/@arcgis/core/widgets/Feature/FeatureContent.js
var n4 = "esri-feature-content";
var c8 = { base: n4, loaderContainer: `${n4}__loader-container`, loader: `${n4}__loader` };
var l7 = class extends W {
  constructor(e10, r9) {
    super(e10, r9), this.viewModel = null, this._addTargetToAnchors = (e11) => {
      Array.from(e11.querySelectorAll("a")).forEach((e12) => {
        C(e12.href) && !e12.hasAttribute("target") && e12.setAttribute("target", "_blank");
      });
    };
  }
  get creator() {
    var _a;
    return (_a = this.viewModel) == null ? void 0 : _a.creator;
  }
  set creator(e10) {
    this.viewModel && (this.viewModel.creator = e10);
  }
  get graphic() {
    var _a;
    return (_a = this.viewModel) == null ? void 0 : _a.graphic;
  }
  set graphic(e10) {
    this.viewModel && (this.viewModel.graphic = e10);
  }
  renderLoading() {
    return n("div", { class: c8.loaderContainer, key: "loader" }, n("div", { class: c8.loader }));
  }
  renderCreated() {
    var _a;
    const e10 = (_a = this.viewModel) == null ? void 0 : _a.created;
    return e10 ? e10 instanceof HTMLElement ? n("div", { key: e10, bind: e10, afterCreate: this._attachToNode }) : e3(e10) ? n("div", { key: e10 }, !e10.destroyed && e10.render()) : n("div", { key: e10, innerHTML: e10, afterCreate: this._addTargetToAnchors }) : null;
  }
  render() {
    var _a;
    const e10 = (_a = this.viewModel) == null ? void 0 : _a.state;
    return n("div", { class: c8.base }, "loading" === e10 ? this.renderLoading() : this.renderCreated());
  }
  _attachToNode(e10) {
    const r9 = this;
    e10.appendChild(r9);
  }
};
e([y2()], l7.prototype, "creator", null), e([y2()], l7.prototype, "graphic", null), e([y2({ type: l6 })], l7.prototype, "viewModel", void 0), l7 = e([a2("esri.widgets.Feature.FeatureContent")], l7);
var p6 = l7;

// node_modules/@arcgis/core/widgets/Feature/FeatureFields/FeatureFieldsViewModel.js
var l8 = class extends v {
  constructor(o7) {
    super(o7), this.attributes = null, this.expressionInfos = null, this.description = null, this.fieldInfos = null, this.title = null;
  }
  get formattedFieldInfos() {
    const { expressionInfos: o7, fieldInfos: e10 } = this, s14 = [];
    return e10 == null ? void 0 : e10.forEach((e11) => {
      if (!(!e11.hasOwnProperty("visible") || e11.visible))
        return;
      const t6 = e11.clone();
      t6.label = R2(t6, o7), s14.push(t6);
    }), s14;
  }
};
e([y2()], l8.prototype, "attributes", void 0), e([y2({ type: [i5] })], l8.prototype, "expressionInfos", void 0), e([y2()], l8.prototype, "description", void 0), e([y2({ type: [c2] })], l8.prototype, "fieldInfos", void 0), e([y2({ readOnly: true })], l8.prototype, "formattedFieldInfos", null), e([y2()], l8.prototype, "title", void 0), l8 = e([a2("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")], l8);
var n5 = l8;

// node_modules/@arcgis/core/widgets/support/uriUtils.js
var s10 = [{ pattern: /^\s*(https?:\/\/([^\s]+))\s*$/i, target: "_blank", label: "{messages.view}" }, { pattern: /^\s*(tel:([^\s]+))\s*$/i, label: "{hierPart}" }, { pattern: /^\s*(mailto:([^\s]+))\s*$/i, label: "{hierPart}" }, { pattern: /^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "App Studio Player" }, { pattern: /^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Collector" }, { pattern: /^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Explorer" }, { pattern: /^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Navigator" }, { pattern: /^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Survey123" }, { pattern: /^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Trek2There" }, { pattern: /^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Workforce" }, { pattern: /^\s*(iform:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "iForm" }, { pattern: /^\s*(flow:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "FlowFinity" }, { pattern: /^\s*(lfmobile:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Laserfische" }, { pattern: /^\s*(mspbi:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Microsoft Power Bi" }];
function a9(e10) {
  let a11 = null;
  return s10.some((s14) => (s14.pattern.test(e10) && (a11 = s14), !!a11)), a11;
}
function p7(s14, p9) {
  if ("string" != typeof p9 || !p9)
    return p9;
  const r9 = a9(p9);
  if (!r9)
    return p9;
  const t6 = p9.match(r9.pattern), n9 = t6 && t6[2], l10 = r2(r2(r9.label, { messages: s14, hierPart: n9 }), { appName: r9.appName }), i11 = r9.target ? ` target="${r9.target}"` : "", o7 = "_blank" === r9.target ? ' rel="noreferrer"' : "";
  return p9.replace(r9.pattern, `<a${i11} href="$1"${o7}>${l10}</a>`);
}

// node_modules/@arcgis/core/widgets/Feature/FeatureFields.js
var f3 = "esri-feature-fields";
var u5 = { base: f3, fieldHeader: `${f3}__field-header`, fieldData: `${f3}__field-data`, fieldDataDate: `${f3}__field-data--date`, esriTable: "esri-widget__table" };
var m4 = class extends W {
  constructor(e10, t6) {
    super(e10, t6), this._featureElementInfo = null, this.viewModel = new n5(), this.messages = null, this.messagesURIUtils = null;
  }
  initialize() {
    this._featureElementInfo = new l5(), this.addHandles(l2(() => {
      var _a, _b;
      return [(_a = this.viewModel) == null ? void 0 : _a.description, (_b = this.viewModel) == null ? void 0 : _b.title];
    }, () => this._setupFeatureElementInfo(), h));
  }
  destroy() {
    var _a;
    (_a = this._featureElementInfo) == null ? void 0 : _a.destroy();
  }
  get attributes() {
    return this.viewModel.attributes;
  }
  set attributes(e10) {
    this.viewModel.attributes = e10;
  }
  get description() {
    return this.viewModel.description;
  }
  set description(e10) {
    this.viewModel.description = e10;
  }
  get expressionInfos() {
    return this.viewModel.expressionInfos;
  }
  set expressionInfos(e10) {
    this.viewModel.expressionInfos = e10;
  }
  get fieldInfos() {
    return this.viewModel.fieldInfos;
  }
  set fieldInfos(e10) {
    this.viewModel.fieldInfos = e10;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e10) {
    this.viewModel.title = e10;
  }
  renderFieldInfo(e10, t6) {
    const { attributes: s14 } = this.viewModel, i11 = e10.fieldName, r9 = e10.label || i11, o7 = s14 ? null == s14[i11] ? "" : s14[i11] : "", l10 = !(!e10.format || !e10.format.dateFormat), n9 = "number" == typeof o7 && !l10 ? this._forceLTR(o7) : p7(this.messagesURIUtils, o7), a11 = { [u5.fieldDataDate]: l10 };
    return n("tr", { key: `fields-element-info-row-${i11}-${t6}` }, n("th", { key: `fields-element-info-row-header-${i11}-${t6}`, class: u5.fieldHeader, innerHTML: r9 }), n("td", { key: `fields-element-info-row-data-${i11}-${t6}`, class: this.classes(u5.fieldData, a11), innerHTML: n9 }));
  }
  renderFields() {
    const { formattedFieldInfos: e10 } = this.viewModel;
    return (e10 == null ? void 0 : e10.length) ? n("table", { class: u5.esriTable, summary: this.messages.fieldsSummary }, n("tbody", null, e10.map((e11, t6) => this.renderFieldInfo(e11, t6)))) : null;
  }
  render() {
    var _a;
    return n("div", { class: u5.base }, (_a = this._featureElementInfo) == null ? void 0 : _a.render(), this.renderFields());
  }
  _setupFeatureElementInfo() {
    var _a;
    const { description: e10, title: t6 } = this;
    (_a = this._featureElementInfo) == null ? void 0 : _a.set({ description: e10, title: t6 });
  }
  _forceLTR(e10) {
    return `&lrm;${e10}`;
  }
};
e([y2()], m4.prototype, "attributes", null), e([y2()], m4.prototype, "description", null), e([y2()], m4.prototype, "expressionInfos", null), e([y2()], m4.prototype, "fieldInfos", null), e([y2()], m4.prototype, "title", null), e([y2({ type: n5, nonNullable: true })], m4.prototype, "viewModel", void 0), e([y2(), e2("esri/widgets/Feature/t9n/Feature")], m4.prototype, "messages", void 0), e([y2(), e2("esri/widgets/support/t9n/uriUtils")], m4.prototype, "messagesURIUtils", void 0), m4 = e([a2("esri.widgets.Feature.FeatureFields")], m4);
var c9 = m4;

// node_modules/@arcgis/core/renderers/support/numberUtils.js
var s11 = { maximumFractionDigits: 20 };
function c10(n9) {
  return m(n9, s11);
}

// node_modules/@arcgis/core/widgets/Legend/support/utils.js
var s12 = "<";
var i8 = ">";
var r5 = S("short-date");
function o3(l10, a11, o7, n9) {
  let e10 = "";
  0 === a11 ? e10 = `${s12} ` : a11 === o7 && (e10 = `${i8} `);
  let u10 = null;
  return u10 = n9 ? L(l10, r5) : c10(l10), e10 + u10;
}

// node_modules/@arcgis/core/widgets/Legend/support/colorRampUtils.js
var o4 = new l3([64, 64, 64]);
function n6(l10, o7) {
  const n9 = [], r9 = l10.length - 1;
  return 5 === l10.length ? n9.push(0, 2, 4) : n9.push(0, r9), l10.map((l11, t6) => n9.includes(t6) ? o3(l11, t6, r9, o7) : null);
}
async function r6(l10, e10, o7) {
  let r9 = false, a11 = [], u10 = [];
  if (l10.stops) {
    const e11 = l10.stops;
    a11 = e11.map((l11) => l11.value), r9 = e11.some((l11) => !!l11.label), r9 && (u10 = e11.map((l11) => l11.label));
  }
  const s14 = a11[0], i11 = a11[a11.length - 1];
  if (null == s14 && null == i11)
    return null;
  const c15 = r9 ? null : n6(a11, o7 ?? false);
  return (await Promise.all(a11.map(async (o8, n9) => ({ value: o8, color: "opacity" === l10.type ? await t4(o8, l10, e10) : (await import("./visualVariableUtils-4JO3L6WA.js")).getColor(l10, o8), label: r9 ? u10[n9] : (c15 == null ? void 0 : c15[n9]) ?? "" })))).reverse();
}
async function t4(e10, n9, r9 = o4) {
  const t6 = new l3(r9), a11 = (await import("./visualVariableUtils-4JO3L6WA.js")).getOpacity(n9, e10);
  return null != a11 && (t6.a = a11), t6;
}

// node_modules/@arcgis/core/widgets/Legend/support/heatmapRampUtils.js
function r7(r9) {
  if (!r9.colorStops)
    return [];
  const e10 = [...r9.colorStops].filter((o7) => {
    var _a;
    return ((_a = o7.color) == null ? void 0 : _a.a) > 0;
  });
  let t6 = e10.length - 1;
  if (e10 && e10[0]) {
    const r10 = e10[t6];
    r10 && 1 !== r10.ratio && (e10.push(new a7({ ratio: 1, color: r10.color })), t6++);
  }
  return e10.map((o7, e11) => {
    var _a, _b;
    let l10 = "";
    return 0 === e11 ? l10 = ((_a = r9.legendOptions) == null ? void 0 : _a.minLabel) || "low" : e11 === t6 && (l10 = ((_b = r9.legendOptions) == null ? void 0 : _b.maxLabel) || "high"), { color: o7.color, label: l10, ratio: o7.ratio };
  }).reverse();
}

// node_modules/@arcgis/core/renderers/support/utils.js
var m6 = s2.getLogger("esri.renderers.support.utils");
var g4 = S("short-date");
async function h5(e10, t6, i11) {
  r3(e10, t6, () => []).push(...i11);
}
async function b2(t6) {
  var _a, _b;
  const l10 = /* @__PURE__ */ new Map();
  if (!t6)
    return l10;
  if ("visualVariables" in t6 && t6.visualVariables) {
    const e10 = t6.visualVariables.filter((e11) => "color" === e11.type);
    for (const t7 of e10) {
      const e11 = (await r6(t7) ?? []).map((e12) => e12.color);
      await h5(l10, t7.field || t7.valueExpression, e11);
    }
  }
  if ("heatmap" === t6.type) {
    const e10 = r7(t6).map((e11) => e11.color);
    await h5(l10, t6.field || t6.valueExpression, e10);
  } else if ("pie-chart" === t6.type) {
    for (const e10 of t6.attributes)
      await h5(l10, e10.field || e10.valueExpression, [e10.color]);
    await h5(l10, "default", [(_a = t6 == null ? void 0 : t6.othersCategory) == null ? void 0 : _a.color, j3(t6.backgroundFillSymbol, null)]);
  } else if ("dot-density" === t6.type) {
    for (const e10 of t6.attributes)
      await h5(l10, e10.field || e10.valueExpression, [e10.color]);
    await h5(l10, "default", [t6.backgroundColor]);
  } else if ("unique-value" === t6.type)
    if ("predominance" === ((_b = t6.authoringInfo) == null ? void 0 : _b.type))
      for (const e10 of t6.uniqueValueInfos ?? [])
        await h5(l10, e10.value.toString(), [j3(e10.symbol, null)]);
    else {
      const e10 = (t6.uniqueValueInfos ?? []).map((e11) => j3(e11.symbol, null)), { field: i11, field2: o7, field3: n9, valueExpression: a11 } = t6;
      (i11 || a11) && await h5(l10, i11 || a11, e10), o7 && await h5(l10, o7, e10), n9 && await h5(l10, n9, e10);
    }
  else if ("class-breaks" === t6.type) {
    const e10 = t6.classBreakInfos.map((e11) => j3(e11.symbol, null)), { field: i11, valueExpression: o7 } = t6;
    await h5(l10, i11 ?? o7, e10);
  } else
    "simple" === t6.type && await h5(l10, "default", [j3(t6.symbol, null)]);
  return "defaultSymbol" in t6 && t6.defaultSymbol && await h5(l10, "default", [j3(t6.defaultSymbol, null)]), l10.forEach((t7, i11) => {
    const o7 = u(t7.filter(Boolean), (e10, t8) => JSON.stringify(e10) === JSON.stringify(t8));
    l10.set(i11, o7);
  }), l10;
}

// node_modules/@arcgis/core/widgets/Feature/support/relatedFeatureUtils.js
var c11 = "esri.widgets.Feature.support.relatedFeatureUtils";
var f4 = s2.getLogger(c11);
var d3 = /* @__PURE__ */ new Map();
function m7(e10) {
  if (!ue(e10))
    return null;
  const [t6, r9] = e10.split("/").slice(1);
  return { layerId: t6, fieldName: r9 };
}
function y6(e10, t6) {
  if (!t6.relationships)
    return null;
  let r9 = null;
  const { relationships: s14 } = t6;
  return s14.some((t7) => t7.id === parseInt(e10, 10) && (r9 = t7, true)), r9;
}
function j5({ originRelationship: e10, relationships: t6, layerId: r9 }) {
  let s14 = null;
  return t6 && t6.some((t7) => (`${t7.relatedTableId}` === r9 && t7.id === (e10 == null ? void 0 : e10.id) && (s14 = t7), !!s14)), s14;
}
function h6(e10, t6) {
  const r9 = t6.toLowerCase();
  for (const s14 in e10)
    if (s14.toLowerCase() === r9)
      return e10[s14];
  return null;
}
function g5(e10, t6) {
  const r9 = y6(e10, t6);
  if (!r9)
    return;
  return { url: `${t6.url}/${r9.relatedTableId}`, sourceSpatialReference: t6.spatialReference, relation: r9, relatedFields: [], outStatistics: [] };
}
function F3(e10, t6) {
  if (!t6)
    return;
  if (!e10)
    return;
  const { features: r9, statsFeatures: s14 } = e10, o7 = r9 && r9.value;
  t6.relatedFeatures = o7 ? o7.features : [];
  const i11 = s14 && s14.value;
  t6.relatedStatsFeatures = i11 ? i11.features : [];
}
function I3(e10, t6, r9, s14) {
  var _a;
  const o7 = new d();
  return o7.outFields = ["*"], o7.relationshipId = "number" == typeof t6.id ? t6.id : parseInt(t6.id, 10), o7.objectIds = [e10.attributes[r9.objectIdField]], ((_a = r9.queryRelatedFeatures) == null ? void 0 : _a.call(r9, o7, s14)) ?? Promise.resolve({});
}
function S3(e10, t6, r9) {
  let s14 = 0;
  const o7 = [];
  for (; s14 < t6.length; )
    o7.push(`${e10} IN (${t6.slice(s14, r9 + s14)})`), s14 += r9;
  return o7.join(" OR ");
}
async function w3(e10, t6, r9, s14) {
  const l10 = r9.layerId.toString(), { layerInfo: u10, relation: p9, relatedFields: c15, outStatistics: f8, url: d5, sourceSpatialReference: m11 } = t6;
  if (!u10 || !p9)
    return null;
  const y10 = j5({ originRelationship: p9, relationships: u10.relationships, layerId: l10 });
  if ((y10 == null ? void 0 : y10.relationshipTableId) && y10.keyFieldInRelationshipTable) {
    const t7 = (await I3(e10, y10, r9, s14))[e10.attributes[r9.objectIdField]];
    if (!t7)
      return null;
    const i11 = t7.features.map((e11) => e11.attributes[u10.objectIdField]);
    if ((f8 == null ? void 0 : f8.length) && u10.supportsStatistics) {
      const e11 = new x();
      e11.where = S3(u10.objectIdField, i11, 1e3), e11.outFields = c15, e11.outStatistics = f8, e11.sourceSpatialReference = m11;
      const r10 = { features: Promise.resolve(t7), statsFeatures: s8(d5, e11) };
      return E(r10);
    }
  }
  const g9 = y10 == null ? void 0 : y10.keyField;
  if (g9) {
    const r10 = ie(T3(u10.fields, g9)), l11 = h6(e10.attributes, p9.keyField), c16 = r10 ? `${g9}=${l11}` : `${g9}='${l11}'`, f9 = s8(d5, new x({ where: c16, outFields: t6.relatedFields, sourceSpatialReference: m11 }), s14), y11 = t6.outStatistics && t6.outStatistics.length > 0 && u10.supportsStatistics ? s8(d5, new x({ where: c16, outFields: t6.relatedFields, outStatistics: t6.outStatistics, sourceSpatialReference: m11 }), s14) : null, j7 = { features: f9 };
    return y11 && (j7.statsFeatures = y11), E(j7);
  }
  return null;
}
function b3(t6, r9) {
  return U2(t6, { query: { f: "json" }, signal: r9 && r9.signal });
}
function R3({ relatedInfos: e10, layer: r9 }, i11) {
  const n9 = {};
  return e10.forEach((e11, s14) => {
    const { relation: o7 } = e11;
    if (!o7) {
      const e12 = new s3("relation-required", "A relation is required on a layer to retrieve related records.");
      throw f4.error(e12), e12;
    }
    const { relatedTableId: i12 } = o7;
    if ("number" != typeof i12) {
      const e12 = new s3("A related table ID is required on a layer to retrieve related records.");
      throw f4.error(e12), e12;
    }
    const a11 = `${r9.url}/${i12}`, l10 = d3.get(a11), u10 = l10 || b3(a11);
    l10 || d3.set(a11, u10), n9[s14] = u10;
  }), y(E(n9), i11);
}
function $2({ graphic: e10, relatedInfos: t6, layer: r9 }, s14) {
  const i11 = {};
  return t6.forEach((t7, o7) => {
    t7.layerInfo && (i11[o7] = w3(e10, t7, r9, s14));
  }), E(i11);
}
function U5({ relatedInfo: e10, fieldName: t6, fieldInfo: r9 }) {
  var _a, _b;
  if ((_a = e10.relatedFields) == null ? void 0 : _a.push(t6), r9.statisticType) {
    const s14 = new m2({ statisticType: r9.statisticType, onStatisticField: t6, outStatisticFieldName: t6 });
    (_b = e10.outStatistics) == null ? void 0 : _b.push(s14);
  }
}
function T3(e10, t6) {
  if (null != e10) {
    t6 = t6.toLowerCase();
    for (const r9 of e10)
      if (r9 && r9.name.toLowerCase() === t6)
        return r9;
  }
  return null;
}

// node_modules/@arcgis/core/widgets/Feature/FeatureMedia/FeatureMediaViewModel.js
var I4 = { chartAnimation: true };
var v7 = class extends v {
  constructor(t6) {
    super(t6), this.abilities = { ...I4 }, this.activeMediaInfoIndex = 0, this.attributes = null, this.description = null, this.fieldInfoMap = null, this.formattedAttributes = null, this.expressionAttributes = null, this.isAggregate = false, this.layer = null, this.mediaInfos = null, this.popupTemplate = null, this.relatedInfos = null, this.title = null;
  }
  castAbilities(t6) {
    return { ...I4, ...t6 };
  }
  get activeMediaInfo() {
    return this.formattedMediaInfos[this.activeMediaInfoIndex] || null;
  }
  get formattedMediaInfos() {
    return this._formatMediaInfos() || [];
  }
  get formattedMediaInfoCount() {
    return this.formattedMediaInfos.length;
  }
  setActiveMedia(t6) {
    this._setContentElementMedia(t6);
  }
  next() {
    this._pageContentElementMedia(1);
  }
  previous() {
    this._pageContentElementMedia(-1);
  }
  _setContentElementMedia(t6) {
    const { formattedMediaInfoCount: e10 } = this, i11 = (t6 + e10) % e10;
    this.activeMediaInfoIndex = i11;
  }
  _pageContentElementMedia(t6) {
    const { activeMediaInfoIndex: e10 } = this, i11 = e10 + t6;
    this._setContentElementMedia(i11);
  }
  _formatMediaInfos() {
    const { mediaInfos: t6, layer: e10 } = this, o7 = this.attributes ?? {}, r9 = this.formattedAttributes ?? {}, a11 = this.expressionAttributes ?? {}, s14 = this.fieldInfoMap ?? /* @__PURE__ */ new Map();
    return (t6 == null ? void 0 : t6.map((t7) => {
      const i11 = t7 == null ? void 0 : t7.clone();
      if (!i11)
        return null;
      if (i11.title = S2({ attributes: o7, fieldInfoMap: s14, globalAttributes: r9, expressionAttributes: a11, layer: e10, text: i11.title }), i11.caption = S2({ attributes: o7, fieldInfoMap: s14, globalAttributes: r9, expressionAttributes: a11, layer: e10, text: i11.caption }), i11.altText = S2({ attributes: o7, fieldInfoMap: s14, globalAttributes: r9, expressionAttributes: a11, layer: e10, text: i11.altText }), "image" === i11.type) {
        const { value: t8 } = i11;
        return this._setImageValue({ value: t8, formattedAttributes: r9, layer: e10 }), i11.value.sourceURL ? i11 : void 0;
      }
      if ("pie-chart" === i11.type || "line-chart" === i11.type || "column-chart" === i11.type || "bar-chart" === i11.type) {
        const { value: t8 } = i11;
        return this._setChartValue({ value: t8, chartType: i11.type, attributes: o7, formattedAttributes: r9, layer: e10, expressionAttributes: a11 }), i11;
      }
      return null;
    }).filter(r)) ?? [];
  }
  _setImageValue(t6) {
    const e10 = this.fieldInfoMap ?? /* @__PURE__ */ new Map(), { value: i11, formattedAttributes: o7, layer: r9 } = t6, { linkURL: a11, sourceURL: s14 } = i11;
    if (s14) {
      const t7 = _(s14, r9);
      i11.sourceURL = G({ formattedAttributes: o7, template: t7, fieldInfoMap: e10 });
    }
    if (a11) {
      const t7 = _(a11, r9);
      i11.linkURL = G({ formattedAttributes: o7, template: t7, fieldInfoMap: e10 });
    }
  }
  _setChartValue(t6) {
    const { value: e10, attributes: i11, formattedAttributes: o7, chartType: r9, layer: a11, expressionAttributes: s14 } = t6, { popupTemplate: l10, relatedInfos: n9 } = this, { fields: p9, normalizeField: d5 } = e10, c15 = a11;
    e10.fields = U4(p9, c15), d5 && (e10.normalizeField = L2(d5, c15));
    if (!p9.some((t7) => !!(null != o7[t7] || ue(t7) && (n9 == null ? void 0 : n9.size))))
      return;
    const h8 = (l10 == null ? void 0 : l10.fieldInfos) ?? [];
    p9.forEach((t7) => {
      if (ue(t7))
        return void (e10.series = [...e10.series, ...this._getRelatedChartInfos({ fieldInfos: h8, fieldName: t7, formattedAttributes: o7, chartType: r9, value: e10 })]);
      const a12 = this._getChartOption({ value: e10, attributes: i11, chartType: r9, formattedAttributes: o7, expressionAttributes: s14, fieldName: t7, fieldInfos: h8 });
      e10.series.push(a12);
    });
  }
  _getRelatedChartInfos(t6) {
    var _a;
    const { fieldInfos: e10, fieldName: i11, formattedAttributes: o7, chartType: r9, value: a11 } = t6, s14 = [], l10 = m7(i11), n9 = l10 && ((_a = this.relatedInfos) == null ? void 0 : _a.get(l10.layerId.toString()));
    if (!n9)
      return s14;
    const { relatedFeatures: p9, relation: d5 } = n9;
    if (!d5 || !p9)
      return s14;
    const { cardinality: u10 } = d5;
    p9.forEach((t7) => {
      const { attributes: n10 } = t7;
      n10 && Object.keys(n10).forEach((t8) => {
        t8 === l10.fieldName && s14.push(this._getChartOption({ value: a11, attributes: n10, formattedAttributes: o7, fieldName: i11, chartType: r9, relatedFieldName: t8, hasMultipleRelatedFeatures: (p9 == null ? void 0 : p9.length) > 1, fieldInfos: e10 }));
      });
    });
    return "one-to-many" === u10 || "many-to-many" === u10 ? s14 : [s14[0]];
  }
  _getTooltip({ label: t6, value: e10, chartType: i11 }) {
    return "pie-chart" === i11 ? `${t6}` : `${t6}: ${e10}`;
  }
  _getChartOption(t6) {
    var _a;
    const { value: e10, attributes: i11, formattedAttributes: o7, expressionAttributes: r9, fieldName: a11, relatedFieldName: n9, fieldInfos: p9, chartType: d5, hasMultipleRelatedFeatures: u10 } = t6, I6 = this.layer, v8 = this.fieldInfoMap ?? /* @__PURE__ */ new Map(), { normalizeField: M4, tooltipField: A5 } = e10, g9 = M4 ? ue(M4) ? i11[m7(M4).fieldName] : i11[M4] : null, x4 = M(a11) && r9 && void 0 !== r9[a11] ? r9[a11] : n9 && void 0 !== i11[n9] ? i11[n9] : void 0 !== i11[a11] ? i11[a11] : o7[a11], _4 = new i4({ fieldName: a11, value: void 0 === x4 ? null : x4 && g9 ? x4 / g9 : x4 });
    if (ue(a11)) {
      const t7 = v8.get(a11.toLowerCase()), e11 = A5 && v8.get(A5.toLowerCase()), r10 = (t7 == null ? void 0 : t7.fieldName) ?? a11, s14 = u10 && A5 ? m7(A5).fieldName : (e11 == null ? void 0 : e11.fieldName) ?? A5, l10 = u10 && s14 ? i11[s14] : o7[s14] ?? (t7 == null ? void 0 : t7.label) ?? (t7 == null ? void 0 : t7.fieldName) ?? n9, p10 = u10 && n9 ? i11[n9] : o7[r10];
      return _4.tooltip = this._getTooltip({ label: l10, value: p10, chartType: d5 }), _4;
    }
    const C5 = J2(p9, a11), T5 = L2(a11, I6), N3 = A5 && void 0 !== o7[A5] ? o7[A5] : R2(C5 || new c2({ fieldName: T5 }), (_a = this.popupTemplate) == null ? void 0 : _a.expressionInfos), F6 = o7[T5];
    return _4.tooltip = this._getTooltip({ label: N3, value: F6, chartType: d5 }), _4;
  }
};
e([y2()], v7.prototype, "abilities", void 0), e([s4("abilities")], v7.prototype, "castAbilities", null), e([y2()], v7.prototype, "activeMediaInfoIndex", void 0), e([y2({ readOnly: true })], v7.prototype, "activeMediaInfo", null), e([y2()], v7.prototype, "attributes", void 0), e([y2()], v7.prototype, "description", void 0), e([y2()], v7.prototype, "fieldInfoMap", void 0), e([y2()], v7.prototype, "formattedAttributes", void 0), e([y2()], v7.prototype, "expressionAttributes", void 0), e([y2({ readOnly: true })], v7.prototype, "formattedMediaInfos", null), e([y2()], v7.prototype, "isAggregate", void 0), e([y2()], v7.prototype, "layer", void 0), e([y2({ readOnly: true })], v7.prototype, "formattedMediaInfoCount", null), e([y2()], v7.prototype, "mediaInfos", void 0), e([y2()], v7.prototype, "popupTemplate", void 0), e([y2()], v7.prototype, "relatedInfos", void 0), e([y2()], v7.prototype, "title", void 0), v7 = e([a2("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")], v7);
var M2 = v7;

// node_modules/@esri/calcite-colors/dist/colors.module.js
var f5 = ["#ffffff", "#858585", "#ffbebe", "#ffebbe", "#ffebaf", "#ffffbe", "#e9ffbe", "#d3ffbe", "#beffe8", "#bee8ff", "#bed2ff", "#e8beff", "#ffbee8", "#ebebeb", "#707070", "#ff7f7f", "#ffa77f", "#ffd37f", "#ffff73", "#d1ff73", "#a3ff73", "#73ffdf", "#73dfff", "#73b2ff", "#df73ff", "#ff73df", "#d6d6d6", "#5c5c5c", "#ff0000", "#ff5500", "#ffaa00", "#ffff00", "#aaff00", "#55ff00", "#00ffc5", "#00c5ff", "#0070ff", "#c500ff", "#ff00c5", "#c2c2c2", "#474747", "#e60000", "#e64c00", "#e69800", "#e6e600", "#98e600", "#4ce600", "#00e6a9", "#00a9e6", "#005ce6", "#a900e6", "#e600a9", "#adadad", "#242424", "#a80000", "#a83800", "#a87000", "#a8a800", "#70a800", "#38a800", "#00a884", "#0084a8", "#004da8", "#8400a8", "#a80084", "#999999", "#1a1a1a", "#730000", "#732600", "#734c00", "#737300", "#4c7300", "#267300", "#00734c", "#004c73", "#002673", "#4c0073", "#73004"];
var b4 = [].concat(f5.slice(30, 39), f5.slice(28, 30).reverse());
var e6 = [{ name: "default", colors: b4 }, { name: "cat-dark", colors: ["#ed5151", "#149ece", "#a7c636", "#9e559c", "#fc921f", "#ffde3e", "#f789d8", "#b7814a", "#3caf99", "#6b6bd6", "#b54779", "#7f7f7f"] }, { name: "tropical-bliss", colors: ["#fce138", "#ff9399", "#fcd27e", "#f1983c", "#a553b7", "#b1a9d0", "#6ecffc", "#4c81cd", "#fc6f84", "#fc3e5a", "#6af689", "#48885c"] }, { name: "desert-blooms", colors: ["#102432", "#144d59", "#ffc730", "#ed9310", "#a64f1b", "#661510", "#d9351a", "#b31515", "#4a0932", "#8c213f", "#18382e", "#2c6954"] }, { name: "under-the-sea", colors: ["#bf9727", "#607100", "#00734c", "#704489", "#01acca", "#024e76", "#f09100", "#ea311f", "#c6004b", "#7570b3", "#666666", "#333333"] }, { name: "vibrant-rainbow", colors: ["#fffb00", "#f5cb11", "#9fd40c", "#46e39c", "#32b8a6", "#7ff2fa", "#ac08cc", "#dd33ff", "#eb7200", "#e8a784", "#bf2e2e", "#6c7000"] }, { name: "ocean-bay", colors: ["#191921", "#11495c", "#78b1c2", "#454f4b", "#8f8f82", "#9be0c0", "#87b051", "#f7ec88", "#ebdcc1", "#dbb658", "#c43541", "#75351e"] }, { name: "prairie-summer", colors: ["#332424", "#751555", "#d47013", "#d68989", "#211173", "#82aad6", "#7bfaeb", "#6ec9a8", "#6b6408", "#eada40", "#ccc54a", "#1fc235"] }, { name: "pastel-chalk", colors: ["#fffd99", "#f5e6a4", "#c1d48c", "#b8e3d0", "#a0b8b5", "#cbf7fa", "#d791f2", "#dfc1eb", "#f2b983", "#e8c4b2", "#bf8e8e", "#94995c"] }, { name: "seq-yellow-orange-red-bright", colors: ["#910000", "#b1260b", "#c0370f", "#e05919", "#ef6a1d", "#ff7b22", "#ffa143", "#ffb454", "#ffda74", "#ffed85"] }, { name: "seq-reds-bright", colors: ["#57453b", "#7b4238", "#9f4036", "#c23d33", "#d7483c", "#ec5244", "#f3696c", "#f9816c", "#ffc4ae", "#fff0dc"] }, { name: "seq-purples-bright", colors: ["#4e465c", "#5a4a78", "#695291", "#775baa", "#8663c3", "#946bdc", "#aa89e8", "#c1a6f3", "#d7c4ff", "#e6e1ff"] }, { name: "seq-blues-bright", colors: ["#404d54", "#435c6c", "#48799d", "#4b88b6", "#4d96ce", "#50a5e7", "#74bbed", "#98d0f3", "#bce6f9", "#e6faff"] }, { name: "seq-greens-bright", colors: ["#39544c", "#386757", "#368165", "#359b73", "#33b581", "#4bc392", "#64d2a2", "#7ce0b3", "#cbf6d9", "#f4ffea"] }, { name: "seq-browns-bright", colors: ["#524834", "#715b38", "#8f6e3c", "#ae8140", "#cc9444", "#eba748", "#eeb664", "#f0c47f", "#f9e0b7", "#fff8eb"] }];

// node_modules/@arcgis/core/widgets/support/chartUtils.js
var n7 = "en-us";
var h7 = /* @__PURE__ */ new Map([["ar", () => import("./ar-53IQ2NVA.js").then((t6) => t6.a)], ["bg-bg", () => import("./bg_BG-KGWL2B3H.js").then((t6) => t6.b)], ["bs-ba", () => import("./bs_BA-FKCSRIBL.js").then((t6) => t6.b)], ["ca-es", () => import("./ca_ES-BHZVV2SX.js").then((t6) => t6.c)], ["cs-cz", () => import("./cs_CZ-HR7TEMUB.js").then((t6) => t6.c)], ["da-dk", () => import("./da_DK-YSHSIDEX.js").then((t6) => t6.d)], ["de-de", () => import("./de_DE-4IDOLXAB.js").then((t6) => t6.d)], ["de-ch", () => import("./de_CH-Z32JP2IF.js").then((t6) => t6.d)], ["el-gr", () => import("./el_GR-UA6FJGCZ.js").then((t6) => t6.e)], ["en-us", () => import("./en_US-DNAU7NHT.js").then((t6) => t6.e)], ["en-ca", () => import("./en_CA-2B2YVRQY.js").then((t6) => t6.e)], ["es-es", () => import("./es_ES-JPOTIYON.js").then((t6) => t6.e)], ["et-ee", () => import("./et_EE-35UHX2N5.js").then((t6) => t6.e)], ["fi-fi", () => import("./fi_FI-5GSKVEPA.js").then((t6) => t6.f)], ["fr-fr", () => import("./fr_FR-FUHGJ3GU.js").then((t6) => t6.f)], ["he-il", () => import("./he_IL-JVDXTSC2.js").then((t6) => t6.h)], ["hr-hr", () => import("./hr_HR-VQVI4XLH.js").then((t6) => t6.h)], ["hu-hu", () => import("./hu_HU-5VNU33EO.js").then((t6) => t6.h)], ["id-id", () => import("./id_ID-BV3ILNCJ.js").then((t6) => t6.i)], ["it-it", () => import("./it_IT-65IVLQHI.js").then((t6) => t6.i)], ["ja-jp", () => import("./ja_JP-LM3BAKM5.js").then((t6) => t6.j)], ["ko-kr", () => import("./ko_KR-OZBLEPXX.js").then((t6) => t6.k)], ["lt-lt", () => import("./lt_LT-JWEFIWQF.js").then((t6) => t6.l)], ["lv-lv", () => import("./lv_LV-BROKC6WH.js").then((t6) => t6.l)], ["nb-no", () => import("./nb_NO-5BXRWRME.js").then((t6) => t6.n)], ["nl-nl", () => import("./nl_NL-PAXC5JNZ.js").then((t6) => t6.n)], ["pl-pl", () => import("./pl_PL-HGD3B76D.js").then((t6) => t6.p)], ["pt-br", () => import("./pt_BR-GT4VDB35.js").then((t6) => t6.p)], ["pt-pt", () => import("./pt_PT-4S2KZQSB.js").then((t6) => t6.p)], ["ro-ro", () => import("./ro_RO-YPFPGJTC.js").then((t6) => t6.r)], ["ru-ru", () => import("./ru_RU-C4JIRPF3.js").then((t6) => t6.r)], ["sk-sk", () => import("./sk_SK-N2GXPOHZ.js").then((t6) => t6.s)], ["sl-sl", () => import("./sl_SL-OQ4M5HZ4.js").then((t6) => t6.s)], ["sr-rs", () => import("./sr_RS-H6R6LUP7.js").then((t6) => t6.s)], ["sv-se", () => import("./sv_SE-QJ4HXVKQ.js").then((t6) => t6.s)], ["th-th", () => import("./th_TH-2D7DSOQP.js").then((t6) => t6.t)], ["tr-tr", () => import("./tr_TR-T5CFATSW.js").then((t6) => t6.t)], ["uk-ua", () => import("./uk_UA-3W654E2X.js").then((t6) => t6.u)], ["vi-vn", () => import("./vi_VN-KHOPKXDG.js").then((t6) => t6.v)], ["zh-cn", () => import("./zh_Hans-HOEGIU6P.js").then((t6) => t6.z)], ["zh-hk", () => import("./zh_Hant-NADJPIBT.js").then((t6) => t6.z)], ["zh-tw", () => import("./zh_Hant-NADJPIBT.js").then((t6) => t6.z)]]);
function e7(t6) {
  const s14 = t6.split("-")[0].toLowerCase();
  let n9 = null;
  for (const e10 of h7.keys())
    if (e10.startsWith(s14)) {
      n9 = e10;
      break;
    }
  return n9;
}
function r8(t6) {
  return t6 ? h7.has(t6.toLowerCase()) ? t6.toLowerCase() : e7(t6) || n7 : n7;
}
var o5 = null;
var i9 = null;
async function u7(t6 = l()) {
  if (t6 = r8(t6), o5 && t6 === i9)
    return o5;
  o5 = import("./chunks-IWLPDVF2.js").then((t7) => t7.i), i9 = t6;
  try {
    const [s14, n9] = await Promise.all([o5, h7.get(i9)()]);
    i9 === t6 && (s14.am4core.options.defaultLocale = n9.default), s14.am4core.options.suppressWarnings = true, s14.am4core.options.autoDispose = true;
  } catch {
    return o5 = null, i9 = null, null;
  }
  return o5;
}
function c12(s14, n9 = "default") {
  const h8 = e6.find((t6) => t6.name === n9);
  return h8 ? h8.colors.map((t6) => s14.color(t6)) : null;
}

// node_modules/@arcgis/core/widgets/Feature/FeatureMedia.js
var M3 = "esri-feature-media";
var I5 = { base: M3, mediaContainer: `${M3}__container`, mediaItemContainer: `${M3}__item-container`, mediaItem: `${M3}__item`, mediaItemTitle: `${M3}__item-title`, mediaItemCaption: `${M3}__item-caption`, mediaPrevious: `${M3}__previous`, mediaPreviousIconLTR: `${M3}__previous-icon`, mediaPreviousIconRTL: `${M3}__previous-icon--rtl`, mediaNext: `${M3}__next`, mediaNextIconLTR: `${M3}__next-icon`, mediaNextIconRTL: `${M3}__next-icon--rtl`, mediaChart: `${M3}__chart`, mediaButton: `${M3}__button`, mediaIcon: `${M3}__icon`, iconLeftTriangleArrow: "esri-icon-left-triangle-arrow", iconRightTriangleArrow: "esri-icon-right-triangle-arrow" };
var _2 = 0.05;
var g6 = 0.95;
var w4 = 15;
var y7 = "color";
var T4 = "tooltip";
var b5 = "value";
var C2 = "default-line-value";
var x3 = class extends W {
  constructor(e10, t6) {
    super(e10, t6), this._refreshTimer = null, this._refreshIntervalInfo = null, this._featureElementInfo = null, this.viewModel = new M2(), this.messages = null, this._getChartDependencies = async (e11) => {
      const t7 = await u7(), { destroyed: i11, viewModel: r9 } = this;
      if (i11 || !r9 || !e11)
        return;
      const { activeMediaInfo: s14 } = r9, a11 = await this._getRendererColors(t7);
      this._renderChart({ chartDiv: e11, mediaInfo: s14, chartsModule: t7, colorMap: a11 });
    };
  }
  initialize() {
    this._featureElementInfo = new l5(), this.addHandles([l2(() => {
      var _a, _b;
      return [(_a = this.viewModel) == null ? void 0 : _a.activeMediaInfo, (_b = this.viewModel) == null ? void 0 : _b.activeMediaInfoIndex];
    }, () => this._setupMediaRefreshTimer(), h), l2(() => {
      var _a, _b;
      return [(_a = this.viewModel) == null ? void 0 : _a.description, (_b = this.viewModel) == null ? void 0 : _b.title];
    }, () => this._setupFeatureElementInfo(), h)]);
  }
  destroy() {
    var _a;
    this._clearMediaRefreshTimer(), (_a = this._featureElementInfo) == null ? void 0 : _a.destroy();
  }
  get attributes() {
    return this.viewModel.attributes;
  }
  set attributes(e10) {
    this.viewModel.attributes = e10;
  }
  get activeMediaInfoIndex() {
    return this.viewModel.activeMediaInfoIndex;
  }
  set activeMediaInfoIndex(e10) {
    this.viewModel.activeMediaInfoIndex = e10;
  }
  get description() {
    return this.viewModel.description;
  }
  set description(e10) {
    this.viewModel.description = e10;
  }
  get fieldInfoMap() {
    return this.viewModel.fieldInfoMap;
  }
  set fieldInfoMap(e10) {
    this.viewModel.fieldInfoMap = e10;
  }
  get layer() {
    return this.viewModel.layer;
  }
  set layer(e10) {
    this.viewModel.layer = e10;
  }
  get mediaInfos() {
    return this.viewModel.mediaInfos;
  }
  set mediaInfos(e10) {
    this.viewModel.mediaInfos = e10;
  }
  get popupTemplate() {
    return this.viewModel.popupTemplate;
  }
  set popupTemplate(e10) {
    this.viewModel.popupTemplate = e10;
  }
  get relatedInfos() {
    return this.viewModel.relatedInfos;
  }
  set relatedInfos(e10) {
    this.viewModel.relatedInfos = e10;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e10) {
    this.viewModel.title = e10;
  }
  render() {
    var _a;
    return n("div", { bind: this, class: I5.base, onkeyup: this._handleMediaKeyup }, (_a = this._featureElementInfo) == null ? void 0 : _a.render(), this.renderMedia());
  }
  renderMedia() {
    const { formattedMediaInfoCount: e10 } = this.viewModel;
    return e10 ? n("div", { key: "media-element-container", class: I5.mediaContainer }, this.renderMediaPageButton("previous"), this.renderMediaInfo(), this.renderMediaPageButton("next")) : null;
  }
  renderImageMediaInfo(e10) {
    const { _refreshIntervalInfo: t6 } = this, { activeMediaInfoIndex: i11, formattedMediaInfoCount: r9 } = this.viewModel, { value: s14, refreshInterval: a11, altText: o7, title: n9, type: l10 } = e10, { sourceURL: d5, linkURL: u10 } = s14, m11 = C(u10 ?? void 0) ? "_blank" : "_self", h8 = "_blank" === m11 ? "noreferrer" : "", p9 = a11 ? t6 : null, v8 = p9 ? p9.timestamp : 0, M4 = p9 ? p9.sourceURL : d5, I6 = n("img", { alt: o7 || n9, key: `media-${l10}-${i11}-${r9}-${v8}`, src: M4 ?? void 0 }), _4 = u10 ? n("a", { title: n9, href: u10, rel: h8, target: m11 }, I6) : null;
    return _4 || I6;
  }
  renderChartMediaInfo(e10) {
    const { activeMediaInfoIndex: t6, formattedMediaInfoCount: i11 } = this.viewModel;
    return n("div", { key: `media-${e10.type}-${t6}-${i11}`, bind: this, class: I5.mediaChart, afterCreate: this._getChartDependencies });
  }
  renderMediaInfoType() {
    const { activeMediaInfo: e10 } = this.viewModel;
    return e10 ? "image" === e10.type ? this.renderImageMediaInfo(e10) : e10.type.includes("chart") ? this.renderChartMediaInfo(e10) : null : null;
  }
  renderMediaInfo() {
    const { activeMediaInfo: e10 } = this.viewModel;
    if (!e10)
      return null;
    const t6 = e10.title ? n("div", { key: "media-title", class: I5.mediaItemTitle, innerHTML: e10.title }) : null, i11 = e10.caption ? n("div", { key: "media-caption", class: I5.mediaItemCaption, innerHTML: e10.caption }) : null;
    return n("div", { key: "media-container", class: I5.mediaItemContainer }, n("div", { key: "media-item-container", class: I5.mediaItem }, this.renderMediaInfoType()), t6, i11);
  }
  renderMediaPageButton(e10) {
    if (this.viewModel.formattedMediaInfoCount < 2)
      return null;
    const t6 = "previous" === e10, i11 = t6 ? this.messages.previous : this.messages.next, r9 = t6 ? this.classes(I5.mediaButton, I5.mediaPrevious) : this.classes(I5.mediaButton, I5.mediaNext), s14 = t6 ? this.classes(I5.mediaIcon, I5.mediaPreviousIconLTR, I5.iconLeftTriangleArrow) : this.classes(I5.mediaIcon, I5.mediaNextIconLTR, I5.iconRightTriangleArrow), a11 = t6 ? this.classes(I5.mediaIcon, I5.mediaPreviousIconRTL, I5.iconRightTriangleArrow) : this.classes(I5.mediaIcon, I5.mediaNextIconRTL, I5.iconLeftTriangleArrow), o7 = t6 ? "media-previous" : "media-next", n9 = t6 ? this._previous : this._next;
    return n("button", { type: "button", key: o7, title: i11, "aria-label": i11, tabIndex: 0, class: r9, bind: this, onclick: n9 }, n("span", { "aria-hidden": "true", class: s14 }), n("span", { "aria-hidden": "true", class: a11 }));
  }
  _setupFeatureElementInfo() {
    var _a;
    const { description: e10, title: t6 } = this;
    (_a = this._featureElementInfo) == null ? void 0 : _a.set({ description: e10, title: t6 });
  }
  _next() {
    this.viewModel.next();
  }
  _previous() {
    this.viewModel.previous();
  }
  _getRenderer() {
    const { isAggregate: e10, layer: t6 } = this.viewModel;
    return e10 && (t6 == null ? void 0 : t6.featureReduction) && "renderer" in t6.featureReduction ? t6.featureReduction.renderer : t6 == null ? void 0 : t6.renderer;
  }
  async _getRendererColors(e10) {
    const { am4core: t6 } = e10, i11 = /* @__PURE__ */ new Map(), r9 = this._getRenderer(), s14 = "default";
    if (!r9)
      return i11;
    const a11 = await b2(r9);
    a11.delete(s14);
    return Array.from(a11.values()).every((e11) => 1 === (e11 == null ? void 0 : e11.length)) ? (i11.set(C2, t6.color({ r: 50, g: 50, b: 50, a: 1 })), Array.from(a11.keys()).forEach((e11) => {
      var _a;
      e11 && i11.set(e11, t6.color((_a = a11.get(e11)) == null ? void 0 : _a[0].toCss(true)));
    }), i11) : i11;
  }
  _handleMediaKeyup(e10) {
    const i11 = i(e10);
    "ArrowLeft" === i11 && (e10.stopPropagation(), this.viewModel.previous()), "ArrowRight" === i11 && (e10.stopPropagation(), this.viewModel.next());
  }
  _renderChart(e10) {
    const { abilities: t6 } = this.viewModel, { chartsModule: i11, chartDiv: r9, mediaInfo: s14, colorMap: a11 } = e10, { value: o7, type: n9 } = s14, { am4core: l10 } = i11, d5 = c12(l10);
    function c15(e11) {
      e11 instanceof l10.ColorSet && d5 && (e11.list = d5);
    }
    r4() && l10.useTheme(i11.am4themes_dark);
    const u10 = window.matchMedia("(prefers-reduced-motion: reduce)");
    t6.chartAnimation && !u10.matches ? l10.useTheme(i11.am4themes_animated) : l10.unuseTheme(i11.am4themes_animated), l10.useTheme(c15);
    const h8 = "pie-chart" === n9 ? this._createPieChart(e10) : this._createXYChart(e10);
    r9.setAttribute("aria-label", s14.altText || s14.title), h8.data = o7.series.map((e11) => ({ [T4]: e11.tooltip, [b5]: e11.value, [y7]: a11.get(e11.fieldName) })).filter((e11) => "pie-chart" !== n9 || null != e11.value && e11.value > 0);
  }
  _customizeChartTooltip(e10, t6) {
    e10 && (e10.label.wrap = true, e10.label.maxWidth = 200, e10.autoTextColor = false, e10.getFillFromObject = false, e10.label.fill = t6.color("#ffffff"), e10.background.fill = t6.color({ r: 0, g: 0, b: 0, a: 0.7 }));
  }
  _createPieChart(e10) {
    const { chartDiv: t6, chartsModule: i11 } = e10, { am4core: r9, am4charts: s14 } = i11, a11 = r9.create(t6, s14.PieChart);
    a11.rtl = f(this.container);
    const o7 = a11.series.push(new s14.PieSeries());
    return o7.labels.template.disabled = true, o7.ticks.template.disabled = true, o7.dataFields.value = b5, o7.dataFields.category = T4, this._customizeChartTooltip(o7.tooltip, r9), o7.slices.template.propertyFields.fill = y7, o7.slices.template.propertyFields.stroke = y7, a11;
  }
  _getMinSeriesValue(e10) {
    let t6 = 0;
    return e10.forEach((e11) => t6 = Math.min(e11.value, t6)), t6;
  }
  _createColumnChart(e10, t6) {
    const { chartsModule: i11, mediaInfo: r9 } = t6, { value: s14 } = r9, { am4core: a11, am4charts: o7 } = i11, n9 = e10.xAxes.push(new o7.CategoryAxis());
    n9.dataFields.category = T4, n9.renderer.labels.template.disabled = true;
    const l10 = n9.tooltip;
    this._customizeChartTooltip(l10, a11), l10.events.on("sizechanged", () => {
      l10.dy = -l10.contentHeight;
    });
    const d5 = e10.yAxes.push(new o7.ValueAxis()), c15 = d5.renderer.labels.template;
    d5.renderer.minLabelPosition = _2, d5.renderer.maxLabelPosition = g6, d5.min = this._getMinSeriesValue(s14.series), this._customizeChartTooltip(d5.tooltip, a11), c15.wrap = true;
    const u10 = e10.series.push(new o7.ColumnSeries());
    u10.dataFields.valueY = b5, u10.dataFields.categoryX = T4, u10.columns.template.propertyFields.fill = y7, u10.columns.template.propertyFields.stroke = y7, e10.cursor = new o7.XYCursor(), s14.series.length > w4 && (e10.scrollbarX = new a11.Scrollbar());
  }
  _createBarChart(e10, t6) {
    const { chartsModule: i11, mediaInfo: r9 } = t6, { value: s14 } = r9, { am4core: a11, am4charts: o7 } = i11, n9 = e10.yAxes.push(new o7.CategoryAxis());
    n9.dataFields.category = T4, n9.renderer.inversed = true, n9.renderer.labels.template.disabled = true;
    const l10 = n9.tooltip;
    this._customizeChartTooltip(l10, a11), l10.events.on("sizechanged", () => {
      l10.dx = l10.contentWidth;
    });
    const d5 = e10.xAxes.push(new o7.ValueAxis()), c15 = d5.renderer.labels.template;
    d5.renderer.minLabelPosition = _2, d5.renderer.maxLabelPosition = g6, d5.min = this._getMinSeriesValue(s14.series), this._customizeChartTooltip(d5.tooltip, a11), c15.wrap = true;
    const u10 = e10.series.push(new o7.ColumnSeries());
    u10.dataFields.valueX = b5, u10.dataFields.categoryY = T4, u10.columns.template.propertyFields.fill = y7, u10.columns.template.propertyFields.stroke = y7, e10.cursor = new o7.XYCursor(), s14.series.length > w4 && (e10.scrollbarY = new a11.Scrollbar());
  }
  _createLineChart(e10, t6) {
    const { chartsModule: i11, mediaInfo: r9, colorMap: s14 } = t6, { value: a11 } = r9, { am4core: o7, am4charts: n9 } = i11, l10 = e10.xAxes.push(new n9.CategoryAxis());
    l10.dataFields.category = T4, l10.renderer.labels.template.disabled = true;
    const d5 = l10.tooltip;
    this._customizeChartTooltip(d5, o7), d5.events.on("sizechanged", () => {
      d5.dy = -d5.contentHeight;
    });
    const c15 = e10.yAxes.push(new n9.ValueAxis()), u10 = c15.renderer.labels.template;
    c15.renderer.minLabelPosition = _2, c15.renderer.maxLabelPosition = g6, c15.min = this._getMinSeriesValue(a11.series), this._customizeChartTooltip(c15.tooltip, o7), u10.wrap = true;
    const m11 = e10.series.push(new n9.LineSeries());
    m11.dataFields.categoryX = T4, m11.dataFields.valueY = b5, m11.strokeWidth = 1;
    const h8 = s14.get(C2);
    h8 && (m11.stroke = h8);
    const p9 = m11.bullets.push(new n9.CircleBullet());
    p9.propertyFields.fill = y7, p9.propertyFields.stroke = y7, e10.cursor = new n9.XYCursor(), a11.series.length > w4 && (e10.scrollbarX = new o7.Scrollbar());
  }
  _createXYChart(e10) {
    const { chartDiv: t6, chartsModule: i11, mediaInfo: r9 } = e10, { type: s14 } = r9, { am4core: a11, am4charts: o7 } = i11, n9 = a11.create(t6, o7.XYChart);
    return n9.rtl = f(this.container), "column-chart" === s14 && this._createColumnChart(n9, e10), "bar-chart" === s14 && this._createBarChart(n9, e10), "line-chart" === s14 && this._createLineChart(n9, e10), n9;
  }
  _clearMediaRefreshTimer() {
    const { _refreshTimer: e10 } = this;
    e10 && (clearTimeout(e10), this._refreshTimer = null);
  }
  _updateMediaInfoTimestamp(e10) {
    const t6 = Date.now();
    this._refreshIntervalInfo = { timestamp: t6, sourceURL: e10 && this._getImageSource(e10, t6) }, this.scheduleRender();
  }
  _setupMediaRefreshTimer() {
    this._clearMediaRefreshTimer();
    const { activeMediaInfo: e10 } = this.viewModel;
    e10 && "image" === e10.type && e10.refreshInterval && this._setRefreshTimeout(e10);
  }
  _setRefreshTimeout(e10) {
    const { refreshInterval: t6, value: i11 } = e10;
    if (!t6)
      return;
    const r9 = 6e4 * t6;
    this._updateMediaInfoTimestamp(i11.sourceURL);
    const s14 = setInterval(() => {
      this._updateMediaInfoTimestamp(i11.sourceURL);
    }, r9);
    this._refreshTimer = s14;
  }
  _getImageSource(e10, t6) {
    const i11 = e10.includes("?") ? "&" : "?", [r9, s14 = ""] = e10.split("#");
    return `${r9}${i11}timestamp=${t6}${s14 ? "#" : ""}${s14}`;
  }
};
e([y2()], x3.prototype, "attributes", null), e([y2()], x3.prototype, "activeMediaInfoIndex", null), e([y2()], x3.prototype, "description", null), e([y2()], x3.prototype, "fieldInfoMap", null), e([y2()], x3.prototype, "layer", null), e([y2()], x3.prototype, "mediaInfos", null), e([y2()], x3.prototype, "popupTemplate", null), e([y2()], x3.prototype, "relatedInfos", null), e([y2()], x3.prototype, "title", null), e([y2({ type: M2 })], x3.prototype, "viewModel", void 0), e([y2(), e2("esri/widgets/Feature/t9n/Feature")], x3.prototype, "messages", void 0), x3 = e([a2("esri.widgets.Feature.FeatureMedia")], x3);
var R4 = x3;

// node_modules/@arcgis/core/widgets/Feature/support/arcadeFeatureUtils.js
var n8 = ["$datastore", "$map", "$layer", "$aggregatedfeatures"];
var s13 = "esri.widgets.Feature.support.arcadeFeatureUtils";
var o6 = s2.getLogger(s13);
function c13(e10) {
  return "string" == typeof e10 ? re(te(e10)) : Array.isArray(e10) ? p8(e10) : "esri.arcade.Dictionary" === (e10 == null ? void 0 : e10.declaredClass) ? l9(e10) : e10;
}
function p8(e10) {
  return `<ul class="esri-widget__list">${e10.map((e11) => `<li>${"string" == typeof e11 ? re(te(e11)) : e11}</li>`).join("")}</ul>`;
}
function l9(e10) {
  return `<table class="esri-widget__table">${e10.keys().map((r9) => {
    const t6 = e10.field(r9);
    return `<tr><th>${r9}</th><td>${"string" == typeof t6 ? re(te(t6)) : t6}</td></tr>`;
  }).join("")}</table>`;
}
function u8({ aggregatedFeatures: e10, arcadeUtils: r9, featureSetVars: a11, context: i11, viewInfo: n9, map: s14, graphic: o7, interceptor: c15 }) {
  a11.forEach((a12) => {
    const p9 = a12.toLowerCase(), l10 = n9.sr, u10 = { map: s14, spatialReference: l10, interceptor: c15 };
    if ("$map" === p9 && (i11.vars[p9] = r9.convertMapToFeatureSetCollection(u10)), "$layer" === p9 && (i11.vars[p9] = r9.convertFeatureLayerToFeatureSet({ layer: o7.sourceLayer, spatialReference: l10, interceptor: c15 })), "$datastore" === p9 && (i11.vars[p9] = r9.convertServiceUrlToWorkspace({ url: o7.sourceLayer.url, spatialReference: l10, interceptor: c15 })), "$aggregatedfeatures" === p9) {
      const a13 = o7.layer, { fields: n10, objectIdField: s15, geometryType: l11, spatialReference: u11, displayField: f8 } = a13, g9 = new He({ fields: n10, objectIdField: s15, geometryType: l11, spatialReference: u11, displayField: f8, ..."feature" === a13.type ? { templates: a13.templates, typeIdField: a13.typeIdField, types: a13.types } : null, source: e10 });
      i11.vars[p9] = r9.convertFeatureLayerToFeatureSet({ layer: g9, spatialReference: u11, interceptor: c15 });
    }
  });
}
function f6() {
  return import("./arcadeUtils-BLK7ANKX.js");
}
function g7(e10) {
  return "createQuery" in e10 && "queryFeatures" in e10;
}
async function y8({ graphic: e10, view: r9 }) {
  const { isAggregate: t6, layer: a11 } = e10;
  if (!t6 || !a11 || "2d" !== (r9 == null ? void 0 : r9.type))
    return [];
  const i11 = await r9.whenLayerView(a11);
  if (!g7(i11))
    return [];
  const n9 = i11.createQuery(), s14 = e10.getObjectId();
  n9.aggregateIds = null != s14 ? [s14] : [];
  const { features: o7 } = await i11.queryFeatures(n9);
  return o7;
}
async function d4({ expressionInfo: e10, arcadeUtils: r9, interceptor: t6, spatialReference: a11, map: i11, graphic: s14, view: c15 }) {
  if (!e10 || !e10.expression)
    return null;
  const p9 = r9.createSyntaxTree(e10.expression), l10 = n8.filter((e11) => r9.hasVariable(p9, e11)), [f8] = await Promise.all([y8({ graphic: s14, view: c15 }), r9.loadScriptDependencies(p9, true, l10)]), g9 = r9.getViewInfo({ spatialReference: a11 }), d5 = r9.createExecContext(s14, g9);
  d5.interceptor = t6, d5.useAsync = true, u8({ aggregatedFeatures: f8, arcadeUtils: r9, featureSetVars: l10, context: d5, viewInfo: g9, map: i11, graphic: s14, interceptor: t6 });
  const m11 = r9.createFunction(p9, d5);
  return r9.executeAsyncFunction(m11, d5).catch((r10) => o6.error("arcade-execution-error", { error: r10, graphic: s14, expressionInfo: e10 }));
}
async function m8({ expressionInfos: e10, spatialReference: t6, graphic: a11, interceptor: i11, map: n9, view: s14 }) {
  if (!e10 || !e10.length)
    return {};
  const o7 = await f6(), p9 = {};
  for (const r9 of e10)
    p9[`expression/${r9.name}`] = d4({ expressionInfo: r9, arcadeUtils: o7, interceptor: i11, spatialReference: t6, map: n9, graphic: a11, view: s14 });
  const l10 = await E(p9), u10 = {};
  for (const r9 in l10)
    u10[r9] = c13(l10[r9].value);
  return u10;
}

// node_modules/@arcgis/core/widgets/Feature/FeatureExpression/FeatureExpressionViewModel.js
var w5 = 1;
var j6 = class extends a6(v) {
  constructor(t6) {
    super(t6), this._abortController = null, this.expressionInfo = null, this.graphic = null, this.contentElement = null, this.contentElementViewModel = null, this.interceptor = null, this.view = null, this._cancelQuery = () => {
      const { _abortController: t7 } = this;
      t7 && t7.abort(), this._abortController = null;
    }, this._createVM = () => {
      var _a, _b;
      const t7 = (_a = this.contentElement) == null ? void 0 : _a.type;
      (_b = this.contentElementViewModel) == null ? void 0 : _b.destroy();
      const e10 = "fields" === t7 ? new n5() : "media" === t7 ? new M2() : "text" === t7 ? new l6() : null;
      this._set("contentElementViewModel", e10);
    }, this._compile = async () => {
      this._cancelQuery();
      const t7 = new AbortController();
      this._abortController = t7, await this._compileExpression(), this._abortController === t7 && (this._abortController = null);
    }, this._compileThrottled = e4(this._compile, w5, this), this._compileExpression = async () => {
      const { expressionInfo: t7, graphic: e10, interceptor: o7, spatialReference: r9, map: n9, view: s14, _abortController: i11 } = this;
      if (!(t7 && e10 && r9 && n9))
        return void this._set("contentElement", null);
      const l10 = await f6();
      if (i11 !== this._abortController)
        return;
      const p9 = await d4({ arcadeUtils: l10, expressionInfo: t7, graphic: e10, interceptor: o7, map: n9, spatialReference: r9, view: s14 });
      if (!p9 || "esri.arcade.Dictionary" !== p9.declaredClass)
        return void this._set("contentElement", null);
      const h8 = await p9.castAsJsonAsync(i11 == null ? void 0 : i11.signal), u10 = h8 == null ? void 0 : h8.type, d5 = "media" === u10 ? I.fromJSON(h8) : "text" === u10 ? c4.fromJSON(h8) : "fields" === u10 ? c3.fromJSON(h8) : null;
      this._set("contentElement", d5);
    }, this.handles.add([l2(() => [this.expressionInfo, this.graphic, this.map, this.spatialReference, this.view], () => this._compileThrottled(), h), l2(() => [this.contentElement], () => this._createVM(), h)]);
  }
  destroy() {
    var _a;
    this._cancelQuery(), (_a = this.contentElementViewModel) == null ? void 0 : _a.destroy(), this._set("contentElementViewModel", null), this._set("contentElement", null);
  }
  get spatialReference() {
    var _a;
    return ((_a = this.view) == null ? void 0 : _a.spatialReference) ?? null;
  }
  set spatialReference(t6) {
    this._override("spatialReference", t6);
  }
  get state() {
    const { _abortController: t6, contentElement: e10, contentElementViewModel: o7 } = this;
    return t6 ? "loading" : e10 || o7 ? "ready" : "disabled";
  }
  get map() {
    var _a;
    return ((_a = this.view) == null ? void 0 : _a.map) ?? null;
  }
  set map(t6) {
    this._override("map", t6);
  }
};
e([y2()], j6.prototype, "_abortController", void 0), e([y2({ type: i3 })], j6.prototype, "expressionInfo", void 0), e([y2({ type: g2 })], j6.prototype, "graphic", void 0), e([y2({ readOnly: true })], j6.prototype, "contentElement", void 0), e([y2({ readOnly: true })], j6.prototype, "contentElementViewModel", void 0), e([y2()], j6.prototype, "interceptor", void 0), e([y2()], j6.prototype, "spatialReference", null), e([y2({ readOnly: true })], j6.prototype, "state", null), e([y2()], j6.prototype, "map", null), e([y2()], j6.prototype, "view", void 0), j6 = e([a2("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")], j6);
var C3 = j6;

// node_modules/@arcgis/core/widgets/Feature/FeatureExpression.js
var c14 = { iconLoading: "esri-icon-loading-indicator esri-rotating", base: "esri-feature-expression", loadingSpinnerContainer: "esri-feature__loading-container", spinner: "esri-feature__loading-spinner" };
var u9 = class extends W {
  constructor(e10, t6) {
    super(e10, t6), this._contentWidget = null, this.viewModel = new C3();
  }
  initialize() {
    this.addHandles(l2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.contentElementViewModel;
    }, () => this._setupExpressionWidget(), h));
  }
  destroy() {
    this._destroyContentWidget();
  }
  renderLoading() {
    return n("div", { key: "loading-container", class: c14.loadingSpinnerContainer }, n("span", { class: this.classes(c14.iconLoading, c14.spinner) }));
  }
  render() {
    var _a;
    const { state: e10 } = this.viewModel;
    return n("div", { class: c14.base }, "loading" === e10 ? this.renderLoading() : "disabled" === e10 ? null : (_a = this._contentWidget) == null ? void 0 : _a.render());
  }
  _destroyContentWidget() {
    const { _contentWidget: e10 } = this;
    e10 && (e10.viewModel = null, e10.destroy()), this._contentWidget = null;
  }
  _setupExpressionWidget() {
    const { contentElementViewModel: e10, contentElement: t6 } = this.viewModel, s14 = t6 == null ? void 0 : t6.type;
    this._destroyContentWidget();
    const i11 = e10 ? "fields" === s14 ? new c9({ viewModel: e10 }) : "media" === s14 ? new R4({ viewModel: e10 }) : "text" === s14 ? new p6({ viewModel: e10 }) : null : null;
    this._contentWidget = i11, this.scheduleRender();
  }
};
e([y2({ type: C3 })], u9.prototype, "viewModel", void 0), u9 = e([a2("esri.widgets.Feature.FeatureExpression")], u9);
var m9 = u9;

// node_modules/@arcgis/core/widgets/Feature/FeatureRelationship/FeatureRelationshipViewModel.js
var b6 = 100;
var F4 = class extends i2(s7(a6(v))) {
  constructor(e10) {
    super(e10), this._queryAbortController = null, this._queryPageAbortController = null, this._queryFeatureCountAbortController = null, this.featuresPerPage = 10, this.description = null, this.graphic = null, this.layer = null, this.map = null, this.orderByFields = null, this.featureCount = 0, this.relationshipId = null, this.showAllEnabled = false, this.title = null, this._cancelQuery = () => {
      const { _queryAbortController: e11 } = this;
      e11 && e11.abort(), this._queryAbortController = null;
    }, this._cancelQueryFeatureCount = () => {
      const { _queryFeatureCountAbortController: e11 } = this;
      e11 && e11.abort(), this._queryFeatureCountAbortController = null;
    }, this._cancelQueryPage = () => {
      const { _queryPageAbortController: e11 } = this;
      e11 && e11.abort(), this._queryPageAbortController = null;
    }, this._queryController = async () => {
      this._cancelQuery();
      const e11 = new AbortController();
      this._queryAbortController = e11, await g(this._query()), this._queryAbortController === e11 && (this._queryAbortController = null);
    }, this._queryFeatureCountController = async () => {
      this._cancelQueryFeatureCount();
      const e11 = new AbortController();
      this._queryFeatureCountAbortController = e11, await g(this._queryFeatureCount()), this._queryFeatureCountAbortController === e11 && (this._queryFeatureCountAbortController = null);
    }, this._queryPageController = async () => {
      const e11 = new AbortController();
      this._queryPageAbortController = e11, await g(this._queryPage()), this._queryPageAbortController === e11 && (this._queryPageAbortController = null);
    }, this._queryThrottled = e4(this._queryController, b6, this), this._queryFeatureCountThrottled = e4(this._queryFeatureCountController, b6, this), this._queryPageThrottled = e4(this._queryPageController, b6, this), this._query = async () => {
      const { _queryAbortController: e11, relatedFeatures: t6 } = this;
      this._destroyRelatedFeatureViewModels(), this.featurePage = 1, t6.removeAll(), t6.addMany(this._sliceFeatures(await this._queryRelatedFeatures({ signal: e11 == null ? void 0 : e11.signal })));
    }, this.handles.add([l2(() => [this.displayCount, this.graphic, this.layer, this.map, this.orderByFieldsFixedCasing, this.relationshipId, this.featuresPerPage, this.showAllEnabled, this.canQuery, this.featureCount], () => this._queryThrottled(), h), l2(() => [this.featurePage, this.showAllEnabled], () => this._queryPageThrottled()), l2(() => [this.layer, this.relationshipId, this.objectId, this.canQuery], () => this._queryFeatureCountThrottled())]);
  }
  destroy() {
    this._destroyRelatedFeatureViewModels(), this.relatedFeatures.removeAll(), this._cancelQuery(), this._cancelQueryFeatureCount(), this._cancelQueryPage();
  }
  set featurePage(e10) {
    const { featuresPerPage: t6, featureCount: r9 } = this, o7 = 1, l10 = Math.ceil(r9 / t6) || 1;
    this._set("featurePage", Math.min(Math.max(e10, o7), l10));
  }
  get featurePage() {
    return this._get("featurePage");
  }
  get orderByFieldsFixedCasing() {
    const { orderByFields: e10, relatedLayer: t6 } = this;
    return e10 && (t6 == null ? void 0 : t6.loaded) ? e10.map((e11) => {
      const r9 = e11.clone(), o7 = L2(e11.field, t6);
      return r9.field = o7, r9;
    }) : e10 ?? [];
  }
  get supportsCacheHint() {
    var _a, _b, _c;
    return !!((_c = (_b = (_a = this.layer) == null ? void 0 : _a.capabilities) == null ? void 0 : _b.queryRelated) == null ? void 0 : _c.supportsCacheHint);
  }
  get canQuery() {
    var _a, _b;
    const e10 = (_b = (_a = this.layer) == null ? void 0 : _a.capabilities) == null ? void 0 : _b.queryRelated;
    return !!(this.relatedLayer && this.relationship && "number" == typeof this.relationshipId && "number" == typeof this.objectId && (e10 == null ? void 0 : e10.supportsCount) && (e10 == null ? void 0 : e10.supportsPagination));
  }
  get itemDescriptionFieldName() {
    var _a, _b;
    return ((_b = (_a = this.orderByFieldsFixedCasing) == null ? void 0 : _a[0]) == null ? void 0 : _b.field) || null;
  }
  set displayCount(e10) {
    const t6 = 0, r9 = 10;
    this._set("displayCount", Math.min(Math.max(e10, t6), r9));
  }
  get displayCount() {
    return this._get("displayCount");
  }
  get objectId() {
    var _a, _b;
    return (this.objectIdField && ((_b = (_a = this.graphic) == null ? void 0 : _a.attributes) == null ? void 0 : _b[this.objectIdField])) ?? null;
  }
  get objectIdField() {
    var _a;
    return ((_a = this.layer) == null ? void 0 : _a.objectIdField) || null;
  }
  get relatedFeatures() {
    return this._get("relatedFeatures") || new j2();
  }
  get relatedLayer() {
    const { layer: e10, map: t6, relationship: r9 } = this;
    return (e10 == null ? void 0 : e10.loaded) && t6 && r9 ? ge(t6, e10, r9) ?? null : null;
  }
  get relationship() {
    var _a;
    const { relationshipId: e10, layer: t6 } = this;
    return "number" == typeof e10 ? ((_a = t6 == null ? void 0 : t6.relationships) == null ? void 0 : _a.find(({ id: t7 }) => t7 === e10)) ?? null : null;
  }
  get relatedFeatureViewModels() {
    return this._get("relatedFeatureViewModels") || new j2();
  }
  get state() {
    const { _queryAbortController: e10, _queryFeatureCountAbortController: t6, _queryPageAbortController: r9, canQuery: o7 } = this;
    return t6 ? "loading" : e10 || r9 ? "querying" : o7 ? "ready" : "disabled";
  }
  _destroyRelatedFeatureViewModels() {
    var _a;
    (_a = this.relatedFeatureViewModels) == null ? void 0 : _a.forEach((e10) => !e10.destroyed && e10.destroy()), this.relatedFeatureViewModels.removeAll();
  }
  async _queryFeatureCount() {
    const { layer: e10, relatedLayer: t6, relationshipId: r9, objectId: o7, _queryFeatureCountAbortController: l10, canQuery: s14, supportsCacheHint: a11 } = this;
    if (await (e10 == null ? void 0 : e10.load()), await (t6 == null ? void 0 : t6.load()), !s14 || !e10 || !t6)
      return void this._set("featureCount", 0);
    const n9 = t6.createQuery(), u10 = new d({ cacheHint: a11, relationshipId: r9, returnGeometry: false, objectIds: [o7], where: s(n9.where, void 0) }), d5 = await e10.queryRelatedFeaturesCount(u10, { signal: l10 == null ? void 0 : l10.signal });
    this._set("featureCount", d5[o7] || 0);
  }
  _sliceFeatures(e10) {
    const { showAllEnabled: t6, displayCount: r9 } = this;
    return t6 ? e10 : r9 ? e10.slice(0, r9) : [];
  }
  async _queryPage() {
    const { relatedFeatures: e10, featurePage: t6, showAllEnabled: r9, _queryPageAbortController: o7 } = this;
    !r9 || t6 < 2 || e10.addMany(await this._queryRelatedFeatures({ signal: o7 == null ? void 0 : o7.signal }));
  }
  async _queryRelatedFeatures(e10) {
    var _a;
    const { orderByFieldsFixedCasing: t6, showAllEnabled: r9, featuresPerPage: o7, displayCount: l10, layer: s14, relationshipId: a11, featurePage: u10, featureCount: d5, relatedLayer: y10, supportsCacheHint: h8 } = this, { canQuery: p9, objectId: c15 } = this;
    if (!p9 || !s14 || !y10)
      return [];
    const _4 = r9 ? ((u10 - 1) * o7 + d5) % d5 : 0, g9 = r9 ? o7 : l10, b9 = y10.objectIdField, F6 = [...t6 == null ? void 0 : t6.map((e11) => e11.field), b9].filter(r), m11 = t6 == null ? void 0 : t6.map((e11) => `${e11.field} ${e11.order}`), f8 = y10.createQuery(), q2 = new d({ orderByFields: m11, start: _4, num: g9, outFields: F6, cacheHint: h8, relationshipId: a11, returnGeometry: false, objectIds: [c15], where: s(f8.where, void 0) }), A5 = ((_a = (await s14.queryRelatedFeatures(q2, { signal: e10 == null ? void 0 : e10.signal }))[c15]) == null ? void 0 : _a.features) || [];
    return A5.forEach((e11) => {
      e11.sourceLayer = y10, e11.layer = y10;
    }), A5;
  }
};
e([y2()], F4.prototype, "_queryAbortController", void 0), e([y2()], F4.prototype, "_queryPageAbortController", void 0), e([y2()], F4.prototype, "_queryFeatureCountAbortController", void 0), e([y2({ value: 1 })], F4.prototype, "featurePage", null), e([y2()], F4.prototype, "featuresPerPage", void 0), e([y2({ readOnly: true })], F4.prototype, "orderByFieldsFixedCasing", null), e([y2({ readOnly: true })], F4.prototype, "supportsCacheHint", null), e([y2({ readOnly: true })], F4.prototype, "canQuery", null), e([y2()], F4.prototype, "description", void 0), e([y2({ readOnly: true })], F4.prototype, "itemDescriptionFieldName", null), e([y2({ value: 3 })], F4.prototype, "displayCount", null), e([y2({ type: g2 })], F4.prototype, "graphic", void 0), e([y2()], F4.prototype, "layer", void 0), e([y2()], F4.prototype, "map", void 0), e([y2({ readOnly: true })], F4.prototype, "objectId", null), e([y2({ readOnly: true })], F4.prototype, "objectIdField", null), e([y2()], F4.prototype, "orderByFields", void 0), e([y2({ readOnly: true })], F4.prototype, "relatedFeatures", null), e([y2({ readOnly: true })], F4.prototype, "relatedLayer", null), e([y2({ readOnly: true })], F4.prototype, "relationship", null), e([y2()], F4.prototype, "featureCount", void 0), e([y2({ readOnly: true })], F4.prototype, "relatedFeatureViewModels", null), e([y2()], F4.prototype, "relationshipId", void 0), e([y2()], F4.prototype, "showAllEnabled", void 0), e([y2()], F4.prototype, "state", null), e([y2()], F4.prototype, "title", void 0), F4 = e([a2("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")], F4);
var m10 = F4;

// node_modules/@arcgis/core/widgets/Feature/FeatureRelationship.js
var g8 = "esri-feature";
var w6 = `${g8}-relationship`;
var b7 = { base: w6, esriWidget: "esri-widget", listContainer: `${w6}__list`, listContainerQuerying: `${w6}__list--querying`, featureObserver: `${g8}__feature-observer`, stickySpinnerContainer: `${g8}__sticky-loading-container`, loadingSpinnerContainer: `${g8}__loading-container`, spinner: `${g8}__loading-spinner`, iconLoading: "esri-icon-loading-indicator esri-rotating" };
var f7 = { title: true, description: true };
var y9 = class extends W {
  constructor(e10, t6) {
    super(e10, t6), this._featureElementInfo = null, this._relatedFeatureIntersectionObserverNode = null, this._relatedFeatureIntersectionObserver = new IntersectionObserver(([e11]) => {
      (e11 == null ? void 0 : e11.isIntersecting) && this._increaseFeaturePage();
    }, { root: window.document }), this.headingLevel = 2, this.viewModel = new m10(), this.messages = null, this.messagesCommon = null, this.visibleElements = { ...f7 }, this._increaseFeaturePage = () => {
      const { state: e11, showAllEnabled: t7, relatedFeatures: s14, featuresPerPage: r9, featurePage: i11 } = this.viewModel;
      "ready" === e11 && t7 && s14.length >= r9 * i11 && this.viewModel.featurePage++;
    };
  }
  initialize() {
    this._featureElementInfo = new l5(), this.addHandles([l2(() => [this.viewModel.description, this.viewModel.title, this.headingLevel], () => this._setupFeatureElementInfo(), h), l2(() => [this.viewModel.state, this.viewModel.showAllEnabled, this._relatedFeatureIntersectionObserverNode], () => this._handleRelatedFeatureObserverChange()), a4(() => this.viewModel.relatedFeatureViewModels, "change", () => this._setupRelatedFeatureViewModels())]);
  }
  loadDependencies() {
    return Promise.all([import("./calcite-list-GYQI5KYP.js"), import("./calcite-list-item-SM5MEPMJ.js"), import("./calcite-icon-XAFZ5NNH.js"), import("./calcite-notice-WOHUINMU.js")]);
  }
  destroy() {
    this._unobserveRelatedFeatureObserver(), this._featureElementInfo = a(this._featureElementInfo);
  }
  get displayShowAllButton() {
    const { showAllEnabled: e10, featureCount: t6, displayCount: s14 } = this.viewModel;
    return !e10 && !!t6 && (t6 > s14 || 0 === s14);
  }
  get displayListItems() {
    return this.displayShowAllButton || this.viewModel.relatedFeatureViewModels.length > 0;
  }
  get description() {
    return this.viewModel.description;
  }
  set description(e10) {
    this.viewModel.description = e10;
  }
  get featureCountDescription() {
    const { messages: e10 } = this, { featureCount: t6 } = this.viewModel;
    return s5(1 === t6 ? e10 == null ? void 0 : e10.numberRecord : e10 == null ? void 0 : e10.numberRecords, { number: t6 });
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e10) {
    this.viewModel.title = e10;
  }
  castVisibleElements(e10) {
    return { ...f7, ...e10 };
  }
  renderStickyLoading() {
    return "querying" === this.viewModel.state ? n("div", { key: "sticky-loader", class: b7.stickySpinnerContainer }, this.renderLoadingIcon()) : null;
  }
  renderLoadingIcon() {
    return n("span", { class: this.classes(b7.iconLoading, b7.spinner) });
  }
  renderLoading() {
    return n("div", { key: "loading-container", class: b7.loadingSpinnerContainer }, this.renderLoadingIcon());
  }
  renderShowAllIconNode() {
    return n("calcite-icon", { scale: "s", icon: "list", slot: "content-end" });
  }
  renderChevronIconNode() {
    const e10 = f(this.container) ? "chevron-left" : "chevron-right";
    return n("calcite-icon", { scale: "s", icon: e10, slot: "content-end" });
  }
  renderRelatedFeature(e10) {
    var _a, _b;
    const { itemDescriptionFieldName: t6 } = this.viewModel, s14 = e10.title;
    e10.description = t6 && ((_a = e10.formattedAttributes) == null ? void 0 : _a.global[t6]);
    const r9 = "loading" === e10.state;
    return n("calcite-list-item", { key: e10.uid, label: r9 ? `${(_b = this.messagesCommon) == null ? void 0 : _b.loading}` : s14, description: r9 ? "" : e10.description ?? "", onCalciteListItemSelect: () => this.emit("select-record", { featureViewModel: e10 }) }, this.renderChevronIconNode());
  }
  renderShowAllListItem() {
    var _a;
    return this.displayShowAllButton ? n("calcite-list-item", { key: "show-all-item", label: (_a = this.messages) == null ? void 0 : _a.showAll, description: this.featureCountDescription, onCalciteListItemSelect: () => this.emit("show-all-records") }, this.renderShowAllIconNode()) : null;
  }
  renderNoRelatedFeaturesMessage() {
    var _a;
    return n("calcite-notice", { key: "no-related-features-message", icon: "information", open: true, kind: "brand", scale: "s", width: "full" }, n("div", { slot: "message" }, (_a = this.messages) == null ? void 0 : _a.noRelatedFeatures));
  }
  renderFeatureObserver() {
    return n("div", { key: "feature-observer", class: b7.featureObserver, bind: this, afterCreate: this._relatedFeatureIntersectionObserverCreated });
  }
  renderList() {
    const { relatedFeatureViewModels: e10 } = this.viewModel;
    return n("calcite-list", null, e10.toArray().map((e11) => this.renderRelatedFeature(e11)), this.renderShowAllListItem());
  }
  renderRelatedFeatures() {
    const { displayListItems: e10 } = this, { state: t6 } = this.viewModel;
    return n("div", { key: "list-container", class: this.classes(b7.listContainer, { [b7.listContainerQuerying]: "querying" === t6 }) }, e10 ? this.renderList() : "ready" === t6 ? this.renderNoRelatedFeaturesMessage() : null, this.renderStickyLoading(), this.renderFeatureObserver());
  }
  renderRelationshipNotFound() {
    var _a;
    return n("calcite-notice", { key: "relationship-not-found", icon: "exclamation-mark-triangle", open: true, kind: "danger", scale: "s", width: "full" }, n("div", { slot: "message" }, (_a = this.messages) == null ? void 0 : _a.relationshipNotFound));
  }
  render() {
    var _a;
    const { state: e10 } = this.viewModel;
    return n("div", { class: this.classes(b7.base, b7.esriWidget) }, (_a = this._featureElementInfo) == null ? void 0 : _a.render(), "loading" === e10 ? this.renderLoading() : "disabled" === e10 ? this.renderRelationshipNotFound() : this.renderRelatedFeatures());
  }
  _setupRelatedFeatureViewModels() {
    const { relatedFeatureViewModels: e10 } = this.viewModel, t6 = "related-feature-viewmodels";
    this.removeHandles(t6), e10 == null ? void 0 : e10.forEach((e11) => {
      this.addHandles(l2(() => [e11.title, e11.state], () => this.scheduleRender(), h), t6);
    }), this.scheduleRender();
  }
  _setupFeatureElementInfo() {
    var _a;
    const { headingLevel: e10, visibleElements: t6 } = this, s14 = t6.description && this.description, r9 = t6.title && this.title;
    (_a = this._featureElementInfo) == null ? void 0 : _a.set({ description: s14, title: r9, headingLevel: e10 });
  }
  async _handleRelatedFeatureObserverChange() {
    this._unobserveRelatedFeatureObserver();
    const { state: e10, showAllEnabled: t6 } = this.viewModel;
    await U(0), this._relatedFeatureIntersectionObserverNode && "ready" === e10 && t6 && this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode);
  }
  _relatedFeatureIntersectionObserverCreated(e10) {
    this._relatedFeatureIntersectionObserverNode = e10;
  }
  _unobserveRelatedFeatureObserver() {
    this._relatedFeatureIntersectionObserverNode && this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode);
  }
};
e([y2()], y9.prototype, "_relatedFeatureIntersectionObserverNode", void 0), e([y2({ readOnly: true })], y9.prototype, "displayShowAllButton", null), e([y2({ readOnly: true })], y9.prototype, "displayListItems", null), e([y2()], y9.prototype, "description", null), e([y2({ readOnly: true })], y9.prototype, "featureCountDescription", null), e([y2()], y9.prototype, "headingLevel", void 0), e([y2()], y9.prototype, "title", null), e([y2({ type: m10 })], y9.prototype, "viewModel", void 0), e([y2(), e2("esri/widgets/Feature/t9n/Feature")], y9.prototype, "messages", void 0), e([y2(), e2("esri/t9n/common")], y9.prototype, "messagesCommon", void 0), e([y2()], y9.prototype, "visibleElements", void 0), e([s4("visibleElements")], y9.prototype, "castVisibleElements", null), y9 = e([a2("esri.widgets.Feature.FeatureRelationship")], y9);
var F5 = y9;

// node_modules/@arcgis/core/arcade/featureset/support/FeatureSetQueryInterceptor.js
var e8 = class {
  constructor(e10, a11) {
    this.preLayerQueryCallback = e10, this.preRequestCallback = a11, this.preLayerQueryCallback || (this.preLayerQueryCallback = (e11) => {
    }), this.preRequestCallback || (this.preLayerQueryCallback = (e11) => {
    });
  }
};

// node_modules/@arcgis/core/widgets/Feature/FeatureViewModel.js
var G2;
var H2 = 1;
var z2 = "content-view-models";
var J3 = "relationship-view-models";
var K3 = { attachmentsContent: true, chartAnimation: true, customContent: true, expressionContent: true, fieldsContent: true, mediaContent: true, textContent: true, relationshipContent: true };
var W3 = G2 = class extends s7(v) {
  constructor(e10) {
    super(e10), this._handles = new t2(), this._error = null, this._featureAbortController = null, this._graphicChangedThrottled = e4(this._graphicChanged, H2, this), this._expressionAttributes = null, this._graphicExpressionAttributes = null, this.abilities = { ...K3 }, this.content = null, this.contentViewModels = [], this.description = null, this.defaultPopupTemplateEnabled = false, this.formattedAttributes = null, this.lastEditInfo = null, this.relatedInfos = /* @__PURE__ */ new Map(), this.title = "", this.view = null, this._isAllowedContentType = (e11) => {
      const { abilities: t6 } = this;
      return "attachments" === e11.type && !!t6.attachmentsContent || "custom" === e11.type && !!t6.customContent || "fields" === e11.type && !!t6.fieldsContent || "media" === e11.type && !!t6.mediaContent || "text" === e11.type && !!t6.textContent || "expression" === e11.type && !!t6.expressionContent || "relationship" === e11.type && !!t6.relationshipContent;
    }, this._handles.add(l2(() => [this.graphic, this._effectivePopupTemplate, this.abilities], () => this._graphicChangedThrottled(), h));
  }
  destroy() {
    this._clear(), this._cancelFeatureQuery(), this._error = null, this._handles.destroy(), this.graphic = null, this._destroyContentViewModels(), this.relatedInfos.clear();
  }
  get _effectivePopupTemplate() {
    return r(this.graphic) ? this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled) : null;
  }
  get _fieldInfoMap() {
    return Y(ee(this._effectivePopupTemplate), this._sourceLayer);
  }
  get _sourceLayer() {
    return j4(this.graphic);
  }
  castAbilities(e10) {
    return { ...K3, ...e10 };
  }
  get isTable() {
    var _a;
    return ((_a = this._sourceLayer) == null ? void 0 : _a.isTable) || false;
  }
  get state() {
    return this.graphic ? this._error ? "error" : this.waitingForContent ? "loading" : "ready" : "disabled";
  }
  set graphic(e10) {
    this._set("graphic", e10 ? e10.clone() : null);
  }
  get spatialReference() {
    var _a;
    return ((_a = this.view) == null ? void 0 : _a.spatialReference) ?? null;
  }
  set spatialReference(e10) {
    this._override("spatialReference", e10);
  }
  get map() {
    var _a;
    return ((_a = this.view) == null ? void 0 : _a.map) || null;
  }
  set map(e10) {
    this._override("map", e10);
  }
  get waitingForContent() {
    return !!this._featureAbortController;
  }
  setActiveMedia(e10, t6) {
    const r9 = this.contentViewModels[e10];
    r9 instanceof M2 && r9.setActiveMedia(t6);
  }
  nextMedia(e10) {
    const t6 = this.contentViewModels[e10];
    t6 instanceof M2 && t6.next();
  }
  previousMedia(e10) {
    const t6 = this.contentViewModels[e10];
    t6 instanceof M2 && t6.previous();
  }
  async updateGeometry() {
    var _a, _b;
    const { graphic: e10, spatialReference: t6, _sourceLayer: r9 } = this;
    await (r9 == null ? void 0 : r9.load());
    const i11 = r9 == null ? void 0 : r9.objectIdField;
    if (!i11 || !e10 || !r9)
      return;
    const s14 = (_a = e10 == null ? void 0 : e10.attributes) == null ? void 0 : _a[i11];
    if (null == s14)
      return;
    const o7 = [s14];
    if (!e10.geometry) {
      const i12 = (_b = await oe({ layer: r9, graphic: e10, outFields: [], objectIds: o7, returnGeometry: true, spatialReference: t6 })) == null ? void 0 : _b.geometry;
      i12 && (e10.geometry = i12);
    }
  }
  _clear() {
    this._set("title", ""), this._set("content", null), this._set("formattedAttributes", null);
  }
  async _graphicChanged() {
    this._cancelFeatureQuery(), this._error = null, this._clear();
    const { graphic: e10 } = this;
    if (!e10)
      return;
    const t6 = new AbortController();
    this._featureAbortController = t6;
    try {
      await this._queryFeature({ signal: t6.signal });
    } catch (r9) {
      j(r9) || (this._error = r9, s2.getLogger(this.declaredClass).error("error", "The popupTemplate could not be displayed for this feature.", { error: r9, graphic: e10, popupTemplate: this._effectivePopupTemplate }));
    }
    this._featureAbortController === t6 && (this._featureAbortController = null);
  }
  _cancelFeatureQuery() {
    const { _featureAbortController: e10 } = this;
    e10 && e10.abort(), this._featureAbortController = null;
  }
  _compileContentElement(e10, t6) {
    return "attachments" === e10.type ? this._compileAttachments(e10, t6) : "custom" === e10.type ? this._compileCustom(e10, t6) : "fields" === e10.type ? this._compileFields(e10, t6) : "media" === e10.type ? this._compileMedia(e10, t6) : "text" === e10.type ? this._compileText(e10, t6) : "expression" === e10.type ? this._compileExpression(e10, t6) : "relationship" === e10.type ? this._compileRelationship(e10, t6) : void 0;
  }
  _compileContent(e10) {
    if (this._destroyContentViewModels(), this.graphic)
      return Array.isArray(e10) ? e10.filter(this._isAllowedContentType).map((e11, t6) => this._compileContentElement(e11, t6)).filter(r) : "string" == typeof e10 ? this._compileText(new c4({ text: e10 }), 0).text : e10;
  }
  _destroyContentViewModels() {
    var _a, _b;
    (_a = this._handles) == null ? void 0 : _a.remove(J3), (_b = this._handles) == null ? void 0 : _b.remove(z2), this.contentViewModels.forEach((e10) => e10 && !e10.destroyed && e10.destroy()), this._set("contentViewModels", []);
  }
  _matchesFeature(e10, t6) {
    var _a;
    const r9 = (_a = e10 == null ? void 0 : e10.graphic) == null ? void 0 : _a.getObjectId(), i11 = t6 == null ? void 0 : t6.getObjectId();
    return r(r9) && r(i11) && r9 === i11;
  }
  _setRelatedFeaturesViewModels({ relatedFeatureViewModels: e10, relatedFeatures: t6, map: r9 }) {
    const { view: i11, spatialReference: s14 } = this;
    t6 == null ? void 0 : t6.filter(Boolean).forEach((t7) => {
      e10.find((e11) => this._matchesFeature(e11, t7)) || e10.add(new G2({ abilities: { relationshipContent: false }, map: r9, view: i11, spatialReference: s14, graphic: t7 }));
    }), e10.forEach((r10) => {
      const i12 = t6 == null ? void 0 : t6.find((e11) => this._matchesFeature(r10, e11));
      i12 || e10.remove(r10);
    });
  }
  _setExpressionContentVM(e10, t6) {
    const r9 = this.formattedAttributes, { contentElement: i11, contentElementViewModel: s14 } = e10, o7 = i11 == null ? void 0 : i11.type;
    s14 && o7 && ("fields" === o7 && (this._createFieldsFormattedAttributes({ contentElement: i11, contentElementIndex: t6, formattedAttributes: r9 }), s14.set(this._createFieldsVMParams(i11, t6))), "media" === o7 && (this._createMediaFormattedAttributes({ contentElement: i11, contentElementIndex: t6, formattedAttributes: r9 }), s14.set(this._createMediaVMParams(i11, t6))), "text" === o7 && s14.set(this._createTextVMParams(i11)));
  }
  _compileRelationship(e10, t6) {
    const { displayCount: r9, orderByFields: i11, relationshipId: s14, title: o7, description: n9 } = e10, { _sourceLayer: a11, graphic: l10, map: p9 } = this, c15 = new m10({ displayCount: r9, graphic: l10, orderByFields: i11, relationshipId: s14, layer: a11, map: p9, ...this._compileTitleAndDesc({ title: o7, description: n9 }) });
    return this.contentViewModels[t6] = c15, this._handles.add(a4(() => c15.relatedFeatures, "change", () => this._setRelatedFeaturesViewModels(c15)), J3), e10;
  }
  _compileExpression(e10, t6) {
    const { expressionInfo: r9 } = e10, { graphic: i11, map: s14, spatialReference: o7, view: n9 } = this, a11 = new C3({ expressionInfo: r9, graphic: i11, interceptor: G2.interceptor, map: s14, spatialReference: o7, view: n9 });
    return this.contentViewModels[t6] = a11, this._handles.add(l2(() => a11.contentElementViewModel, () => this._setExpressionContentVM(a11, t6), h), z2), e10;
  }
  _compileAttachments(e10, t6) {
    const { graphic: r9 } = this, { description: i11, title: s14 } = e10;
    return this.contentViewModels[t6] = new c5({ graphic: r9, ...this._compileTitleAndDesc({ title: s14, description: i11 }) }), e10;
  }
  _compileCustom(e10, t6) {
    const { graphic: r9 } = this, { creator: i11, destroyer: s14 } = e10;
    return this.contentViewModels[t6] = new l6({ graphic: r9, creator: i11, destroyer: s14 }), e10;
  }
  _compileTitleAndDesc({ title: e10, description: t6 }) {
    const { _fieldInfoMap: r9, _sourceLayer: i11, graphic: s14, formattedAttributes: o7 } = this, n9 = s14 == null ? void 0 : s14.attributes, a11 = this._expressionAttributes, l10 = o7.global;
    return { title: S2({ attributes: n9, fieldInfoMap: r9, globalAttributes: l10, expressionAttributes: a11, layer: i11, text: e10 }), description: S2({ attributes: n9, fieldInfoMap: r9, globalAttributes: l10, expressionAttributes: a11, layer: i11, text: t6 }) };
  }
  _createFieldsVMParams(e10, t6) {
    var _a;
    const r9 = this._effectivePopupTemplate, i11 = this.formattedAttributes, s14 = { ...i11 == null ? void 0 : i11.global, ...i11 == null ? void 0 : i11.content[t6] }, o7 = (_a = (e10 == null ? void 0 : e10.fieldInfos) || (r9 == null ? void 0 : r9.fieldInfos)) == null ? void 0 : _a.filter(({ fieldName: e11 }) => M(e11) || ue(e11) || s14.hasOwnProperty(e11)), n9 = r9 == null ? void 0 : r9.expressionInfos, { description: a11, title: l10 } = e10;
    return { attributes: s14, expressionInfos: n9, fieldInfos: o7, ...this._compileTitleAndDesc({ title: l10, description: a11 }) };
  }
  _compileFields(e10, t6) {
    const r9 = e10.clone(), i11 = new n5(this._createFieldsVMParams(e10, t6));
    return this.contentViewModels[t6] = i11, r9.fieldInfos = i11.formattedFieldInfos.slice(0), r9;
  }
  _createMediaVMParams(e10, t6) {
    const { abilities: r9, graphic: i11, _fieldInfoMap: s14, _effectivePopupTemplate: o7, relatedInfos: n9, _sourceLayer: a11, _expressionAttributes: l10 } = this, p9 = this.formattedAttributes, c15 = (i11 == null ? void 0 : i11.attributes) ?? {}, { description: d5, mediaInfos: u10, title: h8 } = e10;
    return { abilities: { chartAnimation: r9.chartAnimation }, activeMediaInfoIndex: e10.activeMediaInfoIndex || 0, attributes: c15, isAggregate: i11 == null ? void 0 : i11.isAggregate, layer: a11, fieldInfoMap: s14, formattedAttributes: { ...p9 == null ? void 0 : p9.global, ...p9 == null ? void 0 : p9.content[t6] }, expressionAttributes: l10, mediaInfos: u10, popupTemplate: o7, relatedInfos: n9, ...this._compileTitleAndDesc({ title: h8, description: d5 }) };
  }
  _compileMedia(e10, t6) {
    const r9 = e10.clone(), i11 = new M2(this._createMediaVMParams(e10, t6));
    return r9.mediaInfos = i11.formattedMediaInfos.slice(0), this.contentViewModels[t6] = i11, r9;
  }
  _createTextVMParams(e10) {
    var _a;
    const { graphic: t6, _fieldInfoMap: r9, _sourceLayer: i11, _expressionAttributes: s14 } = this;
    if (e10 && e10.text) {
      const o7 = (t6 == null ? void 0 : t6.attributes) ?? {}, n9 = ((_a = this.formattedAttributes) == null ? void 0 : _a.global) ?? {};
      e10.text = S2({ attributes: o7, fieldInfoMap: r9, globalAttributes: n9, expressionAttributes: s14, layer: i11, text: e10.text });
    }
    return { graphic: t6, creator: e10.text };
  }
  _compileText(e10, t6) {
    const r9 = e10.clone();
    return this.contentViewModels[t6] = new l6(this._createTextVMParams(r9)), r9;
  }
  _compileLastEditInfo() {
    const { _effectivePopupTemplate: e10, _sourceLayer: t6, graphic: r9 } = this;
    if (!e10)
      return;
    const { lastEditInfoEnabled: i11 } = e10, s14 = t6 == null ? void 0 : t6.editFieldsInfo;
    return i11 && s14 ? X(s14, r9 == null ? void 0 : r9.attributes) : void 0;
  }
  _compileTitle(e10) {
    var _a;
    const { _fieldInfoMap: t6, _sourceLayer: r9, graphic: i11, _expressionAttributes: s14 } = this, o7 = (i11 == null ? void 0 : i11.attributes) ?? {}, n9 = ((_a = this.formattedAttributes) == null ? void 0 : _a.global) ?? {};
    return S2({ attributes: o7, fieldInfoMap: t6, globalAttributes: n9, expressionAttributes: s14, layer: r9, text: e10 });
  }
  async _getTitle() {
    const { _effectivePopupTemplate: e10, graphic: t6 } = this;
    if (!t6)
      return null;
    const r9 = e10 == null ? void 0 : e10.title;
    return x2(r9, { graphic: t6 });
  }
  async _getContent() {
    const { _effectivePopupTemplate: e10, graphic: t6 } = this;
    if (!t6)
      return null;
    const r9 = e10 == null ? void 0 : e10.content;
    return x2(r9, { graphic: t6 });
  }
  async _queryFeature(e10) {
    const { _featureAbortController: t6, _sourceLayer: r9, graphic: i11, _effectivePopupTemplate: s14 } = this, o7 = this.map, n9 = this.view, a11 = this.spatialReference;
    if (t6 !== this._featureAbortController || !i11)
      return;
    await le({ graphic: i11, popupTemplate: s14, layer: r9, spatialReference: a11 }, e10);
    const { content: { value: l10 }, title: { value: c15 } } = await E({ content: this._getContent(), title: this._getTitle() }), { expressionAttributes: { value: d5 } } = await E({ checkForRelatedFeatures: this._checkForRelatedFeatures(e10), expressionAttributes: m8({ expressionInfos: s14 == null ? void 0 : s14.expressionInfos, spatialReference: a11, graphic: i11, map: o7, interceptor: G2.interceptor, view: n9 }) });
    t6 === this._featureAbortController && i11 && (this._expressionAttributes = d5, this._graphicExpressionAttributes = { ...i11.attributes, ...d5 }, this._set("formattedAttributes", this._createFormattedAttributes(l10)), this._set("title", this._compileTitle(c15)), this._set("lastEditInfo", this._compileLastEditInfo() || null), this._set("content", this._compileContent(l10) || null));
  }
  _createMediaFormattedAttributes({ contentElement: e10, contentElementIndex: t6, formattedAttributes: r9 }) {
    const { _effectivePopupTemplate: i11, graphic: s14, relatedInfos: o7, _sourceLayer: n9, _fieldInfoMap: a11, _graphicExpressionAttributes: l10 } = this;
    r9.content[t6] = ie2({ fieldInfos: i11 == null ? void 0 : i11.fieldInfos, graphic: s14, attributes: { ...l10, ...e10.attributes }, layer: n9, fieldInfoMap: a11, relatedInfos: o7 });
  }
  _createFieldsFormattedAttributes({ contentElement: e10, contentElementIndex: t6, formattedAttributes: r9 }) {
    if (e10.fieldInfos) {
      const { graphic: i11, relatedInfos: s14, _sourceLayer: o7, _fieldInfoMap: n9, _graphicExpressionAttributes: a11 } = this;
      r9.content[t6] = ie2({ fieldInfos: e10.fieldInfos, graphic: i11, attributes: { ...a11, ...e10.attributes }, layer: o7, fieldInfoMap: n9, relatedInfos: s14 });
    }
  }
  _createFormattedAttributes(e10) {
    const { _effectivePopupTemplate: t6, graphic: r9, relatedInfos: i11, _sourceLayer: s14, _fieldInfoMap: o7, _graphicExpressionAttributes: n9 } = this, a11 = t6 == null ? void 0 : t6.fieldInfos, l10 = { global: ie2({ fieldInfos: a11, graphic: r9, attributes: n9, layer: s14, fieldInfoMap: o7, relatedInfos: i11 }), content: [] };
    return Array.isArray(e10) && e10.forEach((e11, t7) => {
      "fields" === e11.type && this._createFieldsFormattedAttributes({ contentElement: e11, contentElementIndex: t7, formattedAttributes: l10 }), "media" === e11.type && this._createMediaFormattedAttributes({ contentElement: e11, contentElementIndex: t7, formattedAttributes: l10 });
    }), l10;
  }
  _checkForRelatedFeatures(e10) {
    const { graphic: t6, _effectivePopupTemplate: r9 } = this;
    return this._queryRelatedInfos(t6, ee(r9), e10);
  }
  async _queryRelatedInfos(e10, t6, r9) {
    const { relatedInfos: i11, _sourceLayer: s14 } = this;
    i11.clear();
    const o7 = r(s14 == null ? void 0 : s14.associatedLayer) ? await (s14 == null ? void 0 : s14.associatedLayer.load(r9)) : s14;
    if (!o7 || !e10)
      return;
    const n9 = t6.filter((e11) => e11 && ue(e11.fieldName));
    if (!n9 || !n9.length)
      return;
    t6.forEach((e11) => this._configureRelatedInfo(e11, o7));
    const l10 = await R3({ relatedInfos: i11, layer: o7 }, r9);
    Object.keys(l10).forEach((e11) => {
      var _a;
      const t7 = i11.get(e11.toString()), r10 = (_a = l10[e11]) == null ? void 0 : _a.value;
      t7 && r10 && (t7.layerInfo = r10.data);
    });
    const p9 = await $2({ graphic: e10, relatedInfos: i11, layer: o7 }, r9);
    Object.keys(p9).forEach((e11) => {
      var _a;
      F3((_a = p9[e11]) == null ? void 0 : _a.value, i11.get(e11.toString()));
    });
  }
  _configureRelatedInfo(e10, t6) {
    const { relatedInfos: r9 } = this, i11 = m7(e10.fieldName);
    if (!i11)
      return;
    const { layerId: s14, fieldName: o7 } = i11;
    if (!s14)
      return;
    const n9 = r9.get(s14.toString()) || g5(s14, t6);
    n9 && (U5({ relatedInfo: n9, fieldName: o7, fieldInfo: e10 }), this.relatedInfos.set(s14, n9));
  }
};
W3.interceptor = new e8(me, ye), e([y2()], W3.prototype, "_error", void 0), e([y2()], W3.prototype, "_featureAbortController", void 0), e([y2({ readOnly: true })], W3.prototype, "_effectivePopupTemplate", null), e([y2({ readOnly: true })], W3.prototype, "_fieldInfoMap", null), e([y2({ readOnly: true })], W3.prototype, "_sourceLayer", null), e([y2()], W3.prototype, "abilities", void 0), e([s4("abilities")], W3.prototype, "castAbilities", null), e([y2({ readOnly: true })], W3.prototype, "content", void 0), e([y2({ readOnly: true })], W3.prototype, "contentViewModels", void 0), e([y2()], W3.prototype, "description", void 0), e([y2({ type: Boolean })], W3.prototype, "defaultPopupTemplateEnabled", void 0), e([y2({ readOnly: true })], W3.prototype, "isTable", null), e([y2({ readOnly: true })], W3.prototype, "state", null), e([y2({ readOnly: true })], W3.prototype, "formattedAttributes", void 0), e([y2({ type: g2, value: null })], W3.prototype, "graphic", null), e([y2({ readOnly: true })], W3.prototype, "lastEditInfo", void 0), e([y2({ readOnly: true })], W3.prototype, "relatedInfos", void 0), e([y2()], W3.prototype, "spatialReference", null), e([y2({ readOnly: true })], W3.prototype, "title", void 0), e([y2()], W3.prototype, "map", null), e([y2({ readOnly: true })], W3.prototype, "waitingForContent", null), e([y2()], W3.prototype, "view", void 0), W3 = G2 = e([a2("esri.widgets.FeatureViewModel")], W3);
var X2 = W3;

// node_modules/@arcgis/core/widgets/Feature/resources.js
var e9 = "esri-feature";
var t5 = { iconText: "esri-icon-font-fallback-text", iconLoading: "esri-icon-loading-indicator esri-rotating", esriTable: "esri-widget__table", esriWidget: "esri-widget", base: e9, container: `${e9}__size-container`, title: `${e9}__title`, main: `${e9}__main-container`, btn: `${e9}__button`, icon: `${e9}__icon`, content: `${e9}__content`, contentNode: `${e9}__content-node`, contentElement: `${e9}__content-element`, text: `${e9}__text`, lastEditedInfo: `${e9}__last-edited-info`, fields: `${e9}__fields`, fieldHeader: `${e9}__field-header`, fieldData: `${e9}__field-data`, fieldDataDate: `${e9}__field-data--date`, loadingSpinnerContainer: `${e9}__loading-container`, spinner: `${e9}__loading-spinner` };

// node_modules/@arcgis/core/widgets/Feature/support/FeatureContentMixin.js
var i10 = (i11) => {
  let n9 = class extends i11 {
    constructor() {
      super(...arguments), this.renderNodeContent = (e10) => e3(e10) && !e10.destroyed ? n("div", { class: t5.contentNode, key: e10 }, e10.render()) : e10 instanceof HTMLElement ? n("div", { class: t5.contentNode, key: e10, bind: e10, afterCreate: this._attachToNode }) : t3(e10) ? n("div", { class: t5.contentNode, key: e10, bind: e10.domNode, afterCreate: this._attachToNode }) : null;
    }
    _attachToNode(e10) {
      const o7 = this;
      e10.appendChild(o7);
    }
  };
  return n9 = e([a2("esri.widgets.Feature.ContentMixin")], n9), n9;
};

// node_modules/@arcgis/core/widgets/Feature.js
var E3;
var b8 = { title: true, content: true, lastEditedInfo: true };
var _3 = "relationship-handles";
var W4 = E3 = class extends i10(W) {
  constructor(e10, t6) {
    super(e10, t6), this._contentWidgets = [], this.flowItems = null, this.headingLevel = 2, this.messages = null, this.messagesCommon = null, this.messagesURIUtils = null, this.visibleElements = { ...b8 }, this.viewModel = new X2();
  }
  initialize() {
    this.addHandles(l2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.contentViewModels;
    }, () => this._setupContentWidgets(), h));
  }
  loadDependencies() {
    return import("./calcite-notice-WOHUINMU.js");
  }
  destroy() {
    this._destroyContentWidgets();
  }
  get graphic() {
    return this.viewModel.graphic;
  }
  set graphic(e10) {
    this.viewModel.graphic = e10;
  }
  get defaultPopupTemplateEnabled() {
    return this.viewModel.defaultPopupTemplateEnabled;
  }
  set defaultPopupTemplateEnabled(e10) {
    this.viewModel.defaultPopupTemplateEnabled = e10;
  }
  get isTable() {
    return this.viewModel.isTable;
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(e10) {
    this._overrideIfSome("label", e10);
  }
  get spatialReference() {
    return this.viewModel.spatialReference;
  }
  set spatialReference(e10) {
    this.viewModel.spatialReference = e10;
  }
  get title() {
    return this.viewModel.title;
  }
  castVisibleElements(e10) {
    return { ...b8, ...e10 };
  }
  get map() {
    return this.viewModel.map;
  }
  set map(e10) {
    this.viewModel.map = e10;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e10) {
    this.viewModel.view = e10;
  }
  render() {
    const { state: e10 } = this.viewModel, t6 = n("div", { class: t5.container, key: "container" }, this.renderTitle(), "error" === e10 ? this.renderError() : "loading" === e10 ? this.renderLoading() : this.renderContentContainer());
    return n("div", { class: this.classes(t5.base, t5.esriWidget) }, t6);
  }
  setActiveMedia(e10, t6) {
    return this.viewModel.setActiveMedia(e10, t6);
  }
  nextMedia(e10) {
    return this.viewModel.nextMedia(e10);
  }
  previousMedia(e10) {
    return this.viewModel.previousMedia(e10);
  }
  renderError() {
    const { messagesCommon: e10, messages: t6, visibleElements: s14 } = this;
    return n("calcite-notice", { open: true, kind: "danger", icon: "exclamation-mark-circle", scale: "s" }, s14.title ? n("div", { key: "error-title", slot: "title" }, e10.errorMessage) : null, n("div", { key: "error-message", slot: "message" }, t6.loadingError));
  }
  renderLoading() {
    return n("div", { key: "loading-container", class: t5.loadingSpinnerContainer }, n("span", { class: this.classes(t5.iconLoading, t5.spinner) }));
  }
  renderContentContainer() {
    const { visibleElements: e10 } = this;
    return e10.content ? n("div", { class: t5.main }, [this.renderContent(), this.renderLastEditInfo()]) : null;
  }
  renderTitle() {
    const { visibleElements: e10, title: t6 } = this;
    return e10.title ? n(n2, { level: this.headingLevel, class: t5.title, innerHTML: t6 }) : null;
  }
  renderContent() {
    const e10 = this.viewModel.content, t6 = "content";
    if (!e10)
      return null;
    if (Array.isArray(e10))
      return e10.length ? n("div", { class: t5.contentNode, key: `${t6}-content-elements` }, e10.map(this.renderContentElement, this)) : null;
    if ("string" == typeof e10) {
      const e11 = this._contentWidgets[0];
      return !e11 || e11.destroyed ? null : n("div", { class: t5.contentNode, key: `${t6}-content` }, e11.render());
    }
    return this.renderNodeContent(e10);
  }
  renderContentElement(e10, t6) {
    var _a;
    const { visibleElements: s14 } = this;
    if ("boolean" != typeof s14.content && !((_a = s14.content) == null ? void 0 : _a[e10.type]))
      return null;
    switch (e10.type) {
      case "attachments":
        return this.renderAttachments(t6);
      case "custom":
        return this.renderCustom(e10, t6);
      case "fields":
        return this.renderFields(t6);
      case "media":
        return this.renderMedia(t6);
      case "text":
        return this.renderText(e10, t6);
      case "expression":
        return this.renderExpression(t6);
      case "relationship":
        return this.renderRelationship(t6);
      default:
        return null;
    }
  }
  renderAttachments(e10) {
    const t6 = this._contentWidgets[e10];
    if (!t6 || t6.destroyed)
      return null;
    const { state: s14, attachmentInfos: i11 } = t6.viewModel;
    return "loading" === s14 || i11.length > 0 ? n("div", { key: this._buildKey("attachments-element", e10), class: this.classes(t5.contentElement) }, t6.render()) : null;
  }
  renderRelationship(e10) {
    const t6 = this._contentWidgets[e10];
    return t6 && !t6.destroyed && this.flowItems ? n("div", { key: this._buildKey("relationship-element", e10), class: t5.contentElement }, t6.render()) : null;
  }
  renderExpression(e10) {
    const t6 = this._contentWidgets[e10];
    return !t6 || t6.destroyed ? null : n("div", { key: this._buildKey("expression-element", e10), class: t5.contentElement }, t6.render());
  }
  renderCustom(e10, t6) {
    const { creator: s14 } = e10, i11 = this._contentWidgets[t6];
    return !i11 || i11.destroyed ? null : s14 ? n("div", { key: this._buildKey("custom-element", t6), class: t5.contentElement }, i11.render()) : null;
  }
  renderFields(e10) {
    const t6 = this._contentWidgets[e10];
    return !t6 || t6.destroyed ? null : n("div", { key: this._buildKey("fields-element", e10), class: t5.contentElement }, t6.render());
  }
  renderMedia(e10) {
    const t6 = this._contentWidgets[e10];
    return !t6 || t6.destroyed ? null : n("div", { key: this._buildKey("media-element", e10), class: t5.contentElement }, t6.render());
  }
  renderLastEditInfo() {
    const { visibleElements: e10, messages: t6 } = this, { lastEditInfo: s14 } = this.viewModel;
    if (!s14 || !e10.lastEditedInfo)
      return null;
    const { date: i11, user: n9 } = s14, r9 = "edit" === s14.type ? n9 ? t6.lastEditedByUser : t6.lastEdited : n9 ? t6.lastCreatedByUser : t6.lastCreated, o7 = s5(r9, { date: i11, user: n9 });
    return n("div", { key: "edit-info-element", class: this.classes(t5.lastEditedInfo, t5.contentElement) }, o7);
  }
  renderText(e10, t6) {
    const s14 = e10.text, i11 = this._contentWidgets[t6];
    return !i11 || i11.destroyed ? null : s14 ? n("div", { key: this._buildKey("text-element", t6), class: this.classes(t5.contentElement, t5.text) }, i11.render()) : null;
  }
  _buildKey(e10, ...t6) {
    return `${e10}__${this.get("viewModel.graphic.uid") || "0"}-${t6.join("-")}`;
  }
  _destroyContentWidget(e10) {
    e10 && (e10.viewModel = null, !e10.destroyed && e10.destroy());
  }
  _destroyContentWidgets() {
    this.removeHandles(_3), this._contentWidgets.forEach((e10) => this._destroyContentWidget(e10)), this._contentWidgets = [];
  }
  _addFeatureRelationshipHandles(e10) {
    const { flowItems: t6, visibleElements: i11 } = this;
    this.addHandles([a4(() => e10, "select-record", ({ featureViewModel: e11 }) => {
      t6 && (e11.abilities = { relationshipContent: true }, t6.push(new E3({ flowItems: t6, viewModel: e11, visibleElements: i11 })));
    }), a4(() => e10, "show-all-records", () => {
      if (!t6)
        return;
      const { viewModel: s14 } = e10;
      s14.showAllEnabled = true;
      const i12 = new F5({ visibleElements: { title: false, description: false }, viewModel: s14 });
      this._addFeatureRelationshipHandles(i12), t6.push(i12);
    })], _3);
  }
  _setupContentWidgets() {
    this._destroyContentWidgets();
    const { headingLevel: e10, visibleElements: t6 } = this, s14 = this.get("viewModel.content"), { contentViewModels: i11 } = this.viewModel;
    if (Array.isArray(s14))
      s14.forEach((s15, n9) => {
        if ("attachments" === s15.type && (this._contentWidgets[n9] = new h4({ displayType: s15.displayType, headingLevel: t6.title ? e10 + 1 : e10, viewModel: i11[n9] })), "fields" === s15.type && (this._contentWidgets[n9] = new c9({ viewModel: i11[n9] })), "media" === s15.type && (this._contentWidgets[n9] = new R4({ viewModel: i11[n9] })), "text" === s15.type && (this._contentWidgets[n9] = new p6({ viewModel: i11[n9] })), "custom" === s15.type && (this._contentWidgets[n9] = new p6({ viewModel: i11[n9] })), "expression" === s15.type && (this._contentWidgets[n9] = new m9({ viewModel: i11[n9] })), "relationship" === s15.type) {
          const e11 = new F5({ viewModel: i11[n9] });
          this._addFeatureRelationshipHandles(e11), this._contentWidgets[n9] = e11;
        }
      }, this);
    else {
      const e11 = i11[0];
      e11 && !e11.destroyed && (this._contentWidgets[0] = new p6({ viewModel: e11 }));
    }
    this.scheduleRender();
  }
};
e([y2()], W4.prototype, "graphic", null), e([y2()], W4.prototype, "defaultPopupTemplateEnabled", null), e([y2()], W4.prototype, "flowItems", void 0), e([y2()], W4.prototype, "headingLevel", void 0), e([y2({ readOnly: true })], W4.prototype, "isTable", null), e([y2()], W4.prototype, "label", null), e([y2(), e2("esri/widgets/Feature/t9n/Feature")], W4.prototype, "messages", void 0), e([y2(), e2("esri/t9n/common")], W4.prototype, "messagesCommon", void 0), e([y2(), e2("esri/widgets/support/t9n/uriUtils")], W4.prototype, "messagesURIUtils", void 0), e([y2()], W4.prototype, "spatialReference", null), e([y2({ readOnly: true })], W4.prototype, "title", null), e([y2()], W4.prototype, "visibleElements", void 0), e([s4("visibleElements")], W4.prototype, "castVisibleElements", null), e([y2()], W4.prototype, "map", null), e([y2()], W4.prototype, "view", null), e([y2({ type: X2 })], W4.prototype, "viewModel", void 0), W4 = E3 = e([a2("esri.widgets.Feature")], W4);
var C4 = W4;

export {
  n2 as n,
  X2 as X,
  t5 as t,
  i10 as i,
  C4 as C
};
//# sourceMappingURL=chunk-QJLUXU6I.js.map
