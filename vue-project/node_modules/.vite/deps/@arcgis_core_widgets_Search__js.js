import {
  t as t4
} from "./chunk-HUA67YB5.js";
import {
  d
} from "./chunk-RPLKMGIJ.js";
import {
  a as a4,
  n as n4
} from "./chunk-C2HG7Z4V.js";
import {
  t as t5,
  t2 as t6
} from "./chunk-SQ32YP2P.js";
import {
  W,
  e2 as e3,
  e3 as e4,
  t2 as t3
} from "./chunk-VPGE46JA.js";
import {
  A,
  k,
  n2,
  v as v4
} from "./chunk-2DA2JOWA.js";
import "./chunk-SGLDT3EC.js";
import "./chunk-NXQHXTQL.js";
import "./chunk-5ZDDV642.js";
import {
  c
} from "./chunk-MYKXVBXI.js";
import "./chunk-TM5UW7VI.js";
import {
  f as f2,
  i as i2,
  s as s7
} from "./chunk-WVLEGBEW.js";
import {
  g
} from "./chunk-NUSLMJR5.js";
import {
  S2 as S,
  m as m2,
  m2 as m3,
  n as n3
} from "./chunk-QX5IKXT7.js";
import "./chunk-ONU3G4LF.js";
import "./chunk-P26WTKBK.js";
import "./chunk-WAN4YZSB.js";
import "./chunk-OKST3HK4.js";
import "./chunk-BHQVXYUV.js";
import "./chunk-DKH5QOVM.js";
import {
  b as b2
} from "./chunk-X6SQQQR4.js";
import "./chunk-TNQLNDIQ.js";
import "./chunk-PSN7WPOI.js";
import "./chunk-FA3YUERM.js";
import "./chunk-LVRAFE6T.js";
import "./chunk-Y3KJPDCE.js";
import "./chunk-LSUFI7PR.js";
import "./chunk-BQXNXAP2.js";
import "./chunk-JT54I3AY.js";
import "./chunk-TNTTCGVB.js";
import "./chunk-DC3QI5ZE.js";
import "./chunk-EGHLQERQ.js";
import {
  s as s6
} from "./chunk-DHWQHVQB.js";
import {
  u
} from "./chunk-4GJORDIY.js";
import {
  a as a2,
  h,
  j as j2,
  l as l2
} from "./chunk-FXMJJBXP.js";
import {
  a as a3
} from "./chunk-6YBCJ6DZ.js";
import "./chunk-5CMPUNQG.js";
import {
  U as U2
} from "./chunk-QJXSE36Y.js";
import "./chunk-WV4G3ROK.js";
import "./chunk-M3KO43BW.js";
import {
  k as k2
} from "./chunk-JT4JPYB6.js";
import {
  j
} from "./chunk-SZO7ZKE4.js";
import {
  s as s8
} from "./chunk-7OAHPHOV.js";
import "./chunk-YMLMMCYX.js";
import "./chunk-I2U7UK6N.js";
import "./chunk-6TTVNN6M.js";
import "./chunk-3UXY2S4E.js";
import "./chunk-CPUYSXBP.js";
import "./chunk-MJFFZ3MM.js";
import "./chunk-7FMLQXIT.js";
import {
  v as v3
} from "./chunk-B6GJAETG.js";
import {
  m,
  v2
} from "./chunk-FC74MT6E.js";
import {
  $,
  R3 as R,
  f2 as f,
  w,
  w2
} from "./chunk-H2ENCYR3.js";
import "./chunk-SVHG5VY2.js";
import {
  L
} from "./chunk-UADQEL54.js";
import {
  n
} from "./chunk-FQ7L63IU.js";
import {
  s as s5
} from "./chunk-6K5VVUVI.js";
import "./chunk-S47644HM.js";
import {
  s as s4
} from "./chunk-QXPN4D5D.js";
import {
  l
} from "./chunk-DLM7WQKI.js";
import {
  a2 as a,
  e as e2,
  t2,
  v2 as v,
  y3 as y
} from "./chunk-7GTATSRF.js";
import "./chunk-MTJ2HM2W.js";
import {
  b
} from "./chunk-PXVSWY3C.js";
import {
  E,
  U,
  i
} from "./chunk-QLY5H3XF.js";
import {
  s as s2,
  s2 as s3
} from "./chunk-UG2OEDEE.js";
import {
  o
} from "./chunk-HSFMVUPO.js";
import {
  s
} from "./chunk-IOCWNUEO.js";
import {
  has,
  p
} from "./chunk-PR6SXADK.js";
import "./chunk-MGJMBJDY.js";
import {
  e,
  r,
  t
} from "./chunk-WHB7G7RI.js";
import "./chunk-DFKQJ226.js";

// node_modules/@arcgis/core/widgets/Search/css.js
var e5 = "esri-search";
var i3 = { base: `${e5} esri-widget`, loader: "esri-widget__loader", loaderText: "esri-widget__loader-text", loaderAnimation: "esri-widget__loader-animation", esriInput: "esri-input", hasMultipleSources: `${e5}--multiple-sources`, isLoading: `${e5}--loading`, isSearching: `${e5}--searching`, showSuggestions: `${e5}--show-suggestions`, showSources: `${e5}--sources`, showWarning: `${e5}--warning`, container: `${e5}__container`, input: `${e5}__input`, inputContainer: `${e5}__input-container`, form: `${e5}__form`, submitButton: `${e5}__submit-button`, sourcesButton: `${e5}__sources-button`, clearButton: `${e5}__clear-button`, sourceName: `${e5}__source-name`, suggestionsMenu: `${e5}__suggestions-menu`, suggestionList: `${e5}__suggestions-list`, suggestionListCurrentLocation: `${e5}__suggestions-list--current-location`, sourcesMenu: `${e5}__sources-menu`, source: `${e5}__source`, warningMenu: `${e5}__warning-menu`, warningMenuBody: `${e5}__warning-body`, warningMenuHeader: `${e5}__warning-header`, warningMenuText: `${e5}__warning-text`, noValueText: `${e5}__no-value-text`, esriWidgetDisabled: "esri-widget--disabled", button: "esri-widget--button", fallbackText: "esri-icon-font-fallback-text", header: "esri-widget__heading", locate: "esri-icon-locate-circled", menu: "esri-menu", menuList: "esri-menu__list", menuItem: "esri-menu__list-item", menuItemActive: "esri-menu__list-item--active", menuItemFocus: "esri-menu__list-item--focus", menuHeader: "esri-menu__header", loadingIcon: "esri-icon-loading-indicator esri-rotating", searchIcon: "esri-icon-search", dropdownIcon: "esri-icon-down-arrow esri-search__sources-button--down", dropupIcon: "esri-icon-up-arrow esri-search__sources-button--up", clearIcon: "esri-icon-close", noticeIcon: "esri-icon-notice-triangle", widgetIcon: "esri-icon-search", disabled: "esri-disabled" };

// node_modules/@arcgis/core/widgets/Search/searchResultRendererCSS.js
var e6 = "esri-search-result-renderer";
var s9 = { base: `${e6} esri-widget`, anchor: "esri-widget__anchor", showMoreResults: `${e6}__more-results--show-more-results`, moreResults: `${e6}__more-results`, moreResultsList: `${e6}__more-results-list`, moreResultsHeader: `${e6}__more-results-header`, moreResultsItem: `${e6}__more-results-item`, moreResultsListHeader: `${e6}__more-results-list-header` };

// node_modules/@arcgis/core/widgets/Search/SearchSource.js
var r2 = class extends s8(l) {
  constructor(t9) {
    super(t9), this.autoNavigate = null, this.filter = null, this.getResults = null, this.getSuggestions = null, this.maxResults = null, this.maxSuggestions = null, this.minSuggestCharacters = null, this.outFields = null, this.placeholder = "", this.popupEnabled = null, this.popupTemplate = null, this.prefix = "", this.resultGraphicEnabled = null, this.resultSymbol = null, this.suggestionsEnabled = null, this.suffix = "", this.withinViewEnabled = false, this.zoomScale = null;
  }
};
e2([y()], r2.prototype, "autoNavigate", void 0), e2([y()], r2.prototype, "filter", void 0), e2([y()], r2.prototype, "getResults", void 0), e2([y()], r2.prototype, "getSuggestions", void 0), e2([y()], r2.prototype, "maxResults", void 0), e2([y()], r2.prototype, "maxSuggestions", void 0), e2([y()], r2.prototype, "minSuggestCharacters", void 0), e2([y()], r2.prototype, "outFields", void 0), e2([y()], r2.prototype, "placeholder", void 0), e2([y()], r2.prototype, "popupEnabled", void 0), e2([y()], r2.prototype, "popupTemplate", void 0), e2([y()], r2.prototype, "prefix", void 0), e2([y()], r2.prototype, "resultGraphicEnabled", void 0), e2([y()], r2.prototype, "resultSymbol", void 0), e2([y()], r2.prototype, "suggestionsEnabled", void 0), e2([y()], r2.prototype, "suffix", void 0), e2([y()], r2.prototype, "withinViewEnabled", void 0), e2([y()], r2.prototype, "zoomScale", void 0), r2 = e2([a("esri.widgets.Search.SearchSource")], r2);
var i4 = r2;

// node_modules/@arcgis/core/widgets/Search/support/geometryUtils.js
var o2 = s2.getLogger("esri.widgets.Search.support.geometryUtils");
function s10(r3, t9) {
  var _a, _b;
  if (!t9)
    return o2.error("missing-parameter: view is missing."), Promise.reject(new s3("searchgeometryutils:missing-parameter", "view is missing."));
  if (!r3)
    return o2.error("missing-parameter: point is missing."), Promise.reject(new s3("searchgeometryutils:missing-parameter", "point is missing."));
  if (r3.hasZ || "2d" === t9.type)
    return Promise.resolve(r3);
  const n11 = (_a = t9 == null ? void 0 : t9.map) == null ? void 0 : _a.ground;
  return n11 && n11.layers.length ? n11.queryElevation(r3, { cache: (_b = t9.basemapTerrain) == null ? void 0 : _b.elevationQueryCache }).then((e9) => e9.geometry) : Promise.resolve(r3);
}
function m4(e9) {
  if (t(e9))
    return null;
  switch (e9.type) {
    case "point":
      return e9;
    case "extent":
      return e9.center;
    case "polygon":
      return e9.centroid;
    case "multipoint":
      return e9.getPoint(0);
    case "polyline":
      return e9.getPoint(0, 0);
  }
  return null;
}
function a5(e9, r3, n11) {
  return t(e9) ? null : "extent" === e9.type ? e9 : "multipoint" === e9.type || "polygon" === e9.type || "polyline" === e9.type ? e9.extent : "point" === e9.type ? c2(e9, r3, n11) : void 0;
}
function p2(e9, r3, n11) {
  return t(e9) || t(r3) ? null : c2(e9.center, r3, n11);
}
function c2(e9, r3, t9) {
  const o5 = e9.hasZ ? e9.z : void 0;
  if (r3 && r3.map) {
    return (t9 ? d(r3, t9) : r3.extent).clone().centerAt(e9).set({ zmax: o5, zmin: o5 });
  }
  return new w2({ xmin: e9.x - 0.25, ymin: e9.y - 0.25, xmax: e9.x + 0.25, ymax: e9.y + 0.25, spatialReference: e9.spatialReference, zmin: o5, zmax: o5 });
}

// node_modules/@arcgis/core/widgets/Search/support/layerSearchUtils.js
var d2 = /https?:\/\/services.*\.arcgis\.com/i;
var f3 = /(?:\{([^}]+)\})/g;
var p3 = s2.getLogger("esri.widgets.Search.support.layerSearchUtils");
function m5(t9, r3) {
  const { exactMatch: i8 = false, location: o5, maxResults: s12, spatialReference: l6, source: u4, sourceIndex: a11, suggestResult: c10, view: d8 } = t9, { layer: f7, filter: m9, zoomScale: g5 } = u4, b6 = d8 && d8.scale, S4 = y2(u4, d8), R3 = r3 && r3.signal;
  return F(f7).then(() => {
    const e9 = f7.popupTemplate;
    return e9 ? e9.getRequiredFields(f7.fieldsIndex) : null;
  }).then((t10) => {
    var _a, _b, _c;
    const { objectIdField: r4, returnZ: y5 } = f7, F2 = j3(u4);
    if (!L2(f7, F2))
      throw p3.error("invalid-field: displayField is invalid."), new s3("getResults():invalid-field", "displayField is invalid.");
    const C2 = t10 && t10.length ? t10 : [F2], E3 = u4.outFields || C2, D2 = h2(E3);
    E3.includes(r4) || D2 || E3.push(r4), ((_a = f7.floorInfo) == null ? void 0 : _a.floorField) && E3.push(f7.floorInfo.floorField);
    if (!(D2 || I(f7, E3)))
      throw p3.error("invalid-field: outField is invalid."), new s3("getResults():invalid-field", "outField is invalid.");
    const N2 = f7.createQuery(), { orderByFields: k4 } = u4;
    if (k4 && (N2.orderByFields = k4), l6) {
      N2.outSpatialReference = l6;
      const e9 = 1 / $(l6);
      e9 && (N2.maxAllowableOffset = e9);
    }
    const O2 = "mesh" === f7.geometryType || "multipatch" === f7.geometryType, A3 = ((_c = (_b = f7.capabilities) == null ? void 0 : _b.data) == null ? void 0 : _c.supportsZ) && !O2;
    if (N2.returnZ = A3 && false !== y5, N2.returnGeometry = true, N2.multipatchOption = O2 ? "xyFootprint" : null, E3 && (N2.outFields = E3), o5)
      N2.geometry = o5;
    else if (c10.key)
      N2.objectIds = [c10.key];
    else {
      const t11 = u4.searchFields || [F2];
      if (!I(f7, t11))
        throw p3.error("invalid-field: search field is invalid."), new s3("getResults():invalid-field", "search field is invalid.");
      T(f7) && (N2.num = s12), S4 && (N2.geometry = S4);
      if (!c10.text.trim())
        return [];
      const r5 = c10.text, { prefix: n11 = "", suffix: o6 = "" } = u4, l7 = q(`${n11}${r5}${o6}`);
      $2(f7) && v5(f7, t11) && !i8 && r5 && (N2.fullText = w3({ text: r5, searchFields: t11 }));
      const a12 = M({ searchTerm: l7, layer: f7, searchFields: t11, filter: m9, exactMatch: i8, query: N2, type: "search" });
      if (N2.where = a12, !x(N2))
        return [];
    }
    return f7.queryFeatures(N2, { signal: R3 }).then((e9) => V(e9, d8, u4, a11, F2, b6, g5));
  });
}
function g2(t9, r3) {
  const { source: i8, spatialReference: n11, view: o5, suggestTerm: s12, maxSuggestions: l6, sourceIndex: u4, exactMatch: a11 } = t9, { layer: c10, filter: d8 } = i8, m9 = r3 && r3.signal, g5 = y2(i8, o5);
  return F(c10).then(() => {
    if (!T(c10))
      return [];
    const t10 = j3(i8), r4 = i8.searchFields || [t10], o6 = [];
    i8.suggestionTemplate ? i8.suggestionTemplate.replace(f3, (e9, t11) => (o6.push(t11), e9)) : o6.push(t10);
    const y5 = h2(o6);
    o6.includes(c10.objectIdField) || y5 || o6.push(c10.objectIdField);
    const F2 = L2(c10, t10), b6 = y5 || I(c10, o6), S4 = I(c10, r4);
    if (!F2)
      throw p3.error("invalid-field: displayField is invalid."), new s3("getSuggestions():invalid-field", "displayField is invalid.");
    if (!b6)
      throw p3.error("invalid-field: outField is invalid."), new s3("getSuggestions():invalid-field", "outField is invalid.");
    if (!S4)
      throw p3.error("invalid-field: search field is invalid."), new s3("getSuggestions():invalid-field", "search field is invalid.");
    const R3 = c10.createQuery(), { orderByFields: C2 } = i8;
    C2 && (R3.orderByFields = C2), R3.outSpatialReference = n11, R3.returnGeometry = false, R3.num = l6, R3.outFields = o6, g5 && (R3.geometry = g5);
    if (!s12.trim())
      return [];
    const { prefix: E3 = "", suffix: D2 = "" } = i8, N2 = q(`${E3}${s12}${D2}`);
    $2(c10) && v5(c10, r4) && !a11 && s12 && (R3.fullText = w3({ text: s12, searchFields: r4 }));
    const k4 = M({ searchTerm: N2, layer: c10, searchFields: r4, filter: d8, exactMatch: a11, query: R3, type: "suggest" });
    return R3.where = k4, x(R3) ? c10.queryFeatures(R3, { signal: m9 }).then((e9) => B(e9, i8, u4, t10)) : [];
  });
}
function y2(e9, t9) {
  const { filter: r3, withinViewEnabled: i8 } = e9, n11 = t9 && t9.extent;
  return r3 && r3.geometry || (i8 && n11 ? n11 : void 0);
}
function h2(e9) {
  return e9 && e9.includes("*");
}
async function F(e9) {
  e9 && await e9.load();
}
function x(e9) {
  return !(!e9.fullText && !e9.where);
}
function v5(e9, t9) {
  const r3 = e9 == null ? void 0 : e9.indexes;
  if (!r3 || !(t9 == null ? void 0 : t9.length))
    return false;
  return r3.filter((e10) => "FullText" === e10.indexType).some((e10) => {
    var _a;
    const r4 = ((_a = e10.fields) == null ? void 0 : _a.split(",").map((e11) => e11.trim().toLowerCase())) || [];
    return t9.every((e11) => r4.includes(e11.toLowerCase()));
  });
}
function w3({ text: e9, searchFields: t9 }) {
  return e9.trim().split(" ").filter((e10) => !!e10.trim()).map((e10) => new c({ onFields: t9, searchTerm: e10, searchType: "prefix" }));
}
function $2(e9) {
  var _a, _b;
  return ((_b = (_a = e9 == null ? void 0 : e9.capabilities) == null ? void 0 : _a.query) == null ? void 0 : _b.supportsFullTextSearch) ?? false;
}
function T(e9) {
  var _a, _b;
  return ((_b = (_a = e9 == null ? void 0 : e9.capabilities) == null ? void 0 : _a.query) == null ? void 0 : _b.supportsPagination) ?? false;
}
function b3(e9) {
  var _a, _b, _c;
  return ((_c = (_b = (_a = e9 == null ? void 0 : e9.fieldsIndex) == null ? void 0 : _a.fields) == null ? void 0 : _b.find((e10) => "string" === e10.type)) == null ? void 0 : _c.name) ?? "";
}
function j3(e9) {
  return e9.displayField || e9.layer.displayField || b3(e9.layer);
}
function I(e9, t9) {
  return !(!e9 || !(t9 == null ? void 0 : t9.length)) && t9.every((t10) => L2(e9, t10));
}
function L2(e9, t9) {
  return !!e9.getField(t9);
}
function S2(e9) {
  for (let t9 = 0; t9 < e9.length; t9++)
    if (e9.charCodeAt(t9) > 255)
      return true;
  return false;
}
function R2(e9, t9, r3) {
  let i8 = null;
  const { codedValues: n11 } = e9;
  return n11 && n11.some((e10) => {
    const n12 = e10.name, o5 = r3 ? n12 : n12.toLowerCase();
    return (r3 ? t9 : t9.toLowerCase()) === o5 && (i8 = e10.code.toString(), true);
  }), i8;
}
function q(e9) {
  return e9.replace(/\'/g, "''");
}
function C(e9, t9) {
  const r3 = t9 && t9.where;
  return r3 ? `(${e9}) AND (${r3})` : e9;
}
function E2({ currentTerm: e9, field: t9, filter: r3, exactMatch: i8, url: n11, type: o5 }) {
  const s12 = t9.type, l6 = t9.name;
  if ("string" === s12 || "date" === s12 || "global-id" === s12) {
    const t10 = d2.test(n11), s13 = t10 && S2(e9) ? "N" : "";
    if (i8 && "search" === o5)
      return C(`${l6} = ${s13}'${e9}'`, r3);
    if (t10) {
      return C(`${l6} LIKE ${s13}${`'${e9}%'`}`, r3);
    }
    return C(`${`LOWER(${l6})`} LIKE ${s13}${`'${e9.toLowerCase()}%'`}`, r3);
  }
  if ("oid" === s12 || "small-integer" === s12 || "integer" === s12 || "single" === s12 || "double" === s12) {
    const t10 = Number(e9);
    return isNaN(t10) ? null : C(`${l6} = ${t10}`, r3);
  }
  return C(`${l6} = ${e9}`, r3);
}
function D(e9, t9) {
  return e9 ? ` OR (${t9})` : `(${t9})`;
}
function M({ searchTerm: e9, layer: t9, searchFields: r3, filter: i8, exactMatch: n11, query: o5, type: s12 }) {
  const { definitionExpression: l6, url: u4 } = t9;
  let a11 = "";
  return !o5.fullText && e9 && r3 && r3.forEach((r4) => {
    const o6 = t9.getField(r4), l7 = "function" == typeof t9.getFieldDomain && t9.getFieldDomain(r4), c10 = (l7 && "coded-value" === l7.type ? R2(l7, e9, n11) : null) || e9 || null;
    if (null !== c10) {
      const e10 = E2({ currentTerm: c10, field: o6, filter: i8, exactMatch: n11, url: u4, type: s12 });
      e10 && (a11 += D(a11, e10));
    }
  }), l6 && a11 ? `(${l6}) AND (${a11})` : l6 || a11;
}
function N(e9, t9) {
  let r3 = null;
  const { codedValues: i8 } = e9;
  return i8 && i8.length && i8.some((e10) => e10.code === t9 && (r3 = e10.name, true)), r3;
}
function k3(e9, t9) {
  return e9[Object.keys(e9).find((e10) => e10.toLowerCase() === t9.toLowerCase())];
}
function O(e9, t9, r3) {
  const i8 = e9.sourceLayer, { attributes: n11 } = e9, o5 = "function" == typeof i8.getFieldDomain && i8.getFieldDomain(r3);
  if (t9)
    return s6(t9, n11);
  if (r3 && n11) {
    const e10 = i8.getField(r3), t10 = k3(n11, r3);
    return null == t10 ? "" : o5 && "coded-value" === o5.type ? N(o5, t10) : "date" === (e10 == null ? void 0 : e10.type) ? L(new Date(t10)) : "number" == typeof t10 ? t10.toString() : "string" != typeof t10 ? "" : t10.trim();
  }
  return "";
}
function A2(e9, t9, r3, i8) {
  const n11 = e9.sourceLayer, { attributes: o5 } = e9, { objectIdField: s12 } = n11, l6 = o5[s12];
  return { text: O(e9, t9.suggestionTemplate, i8), key: l6, sourceIndex: r3 };
}
function B(e9, t9, r3, i8) {
  return e9.features.map((e10) => A2(e10, t9, r3, i8));
}
function U3(e9, r3, n11, s12, a11, c10, d8) {
  const f7 = e9.clone(), p8 = e9.sourceLayer, m9 = p8 && p8.objectIdField, g5 = m9 && e9.attributes[m9], y5 = O(e9, n11.searchTemplate, a11), h5 = a5(f7.geometry, r3, c10), F2 = "number" == typeof d8 ? p2(p(h5), r3, d8) : h5, x3 = e9.clone();
  return r(F2) && (x3.geometry = v2.fromExtent(F2)), { extent: F2, target: x3, feature: f7, key: g5, name: y5, sourceIndex: s12 };
}
function V(e9, t9, r3, i8, n11, o5, s12) {
  return e9.features.map((e10) => U3(e10, t9, r3, i8, n11, o5, s12));
}

// node_modules/@arcgis/core/widgets/Search/LayerSearchSource.js
var o3;
var h3 = o3 = class extends i4 {
  constructor(e9) {
    super(e9), this.displayField = null, this.exactMatch = null, this.orderByFields = null, this.searchFields = null, this.searchTemplate = null, this.suggestionTemplate = null, this.getResults = (e10, t9) => m5({ source: this, ...e10 }, t9), this.getSuggestions = (e10, t9) => g2({ source: this, ...e10 }, t9);
  }
  set layer(e9) {
    this._set("layer", e9), e9 && e9.load().catch(() => {
    });
  }
  get name() {
    return this._getLayerTitle() ?? "";
  }
  set name(e9) {
    this._overrideIfSome("name", e9);
  }
  clone() {
    return new o3({ autoNavigate: this.autoNavigate, filter: this.filter, maxResults: this.maxResults, maxSuggestions: this.maxSuggestions, minSuggestCharacters: this.minSuggestCharacters, outFields: this.outFields ? p(this.outFields) : null, placeholder: this.placeholder, popupEnabled: this.popupEnabled, prefix: this.prefix, resultGraphicEnabled: this.resultGraphicEnabled, resultSymbol: this.resultSymbol ? this.resultSymbol.clone() : null, suggestionsEnabled: this.suggestionsEnabled, suffix: this.suffix, withinViewEnabled: this.withinViewEnabled, displayField: this.displayField, exactMatch: this.exactMatch, layer: this.layer, searchFields: this.searchFields ? p(this.searchFields) : null, suggestionTemplate: this.suggestionTemplate, zoomScale: this.zoomScale });
  }
  _getFirstStringField() {
    var _a;
    return ((_a = this.layer.fieldsIndex.fields.find((e9) => "string" === e9.type)) == null ? void 0 : _a.name) ?? "";
  }
  _getDisplayField() {
    return this.displayField || this.layer.displayField || this._getFirstStringField();
  }
  _getSearchFieldsString() {
    const { layer: e9, searchFields: t9 } = this;
    if (!e9.loaded)
      return "";
    return `: ${(t9 || [this._getDisplayField()]).map((t10) => {
      const s12 = e9.getField(t10);
      return s12 && s12.alias || t10;
    }).join(", ")}`;
  }
  _getLayerTitle() {
    const { layer: e9 } = this;
    if (!e9)
      return;
    const { title: t9 } = e9;
    return t9 ? `${t9}${this._getSearchFieldsString()}` : void 0;
  }
};
e2([y({ json: { read: { source: "field.name" }, write: { target: "field.name" } } })], h3.prototype, "displayField", void 0), e2([y({ json: { read: { source: "field.exactMatch" }, write: { target: "field.exactMatch" } } })], h3.prototype, "exactMatch", void 0), e2([y({ value: null })], h3.prototype, "layer", null), e2([y()], h3.prototype, "name", null), e2([y({ type: [String], json: { write: true } })], h3.prototype, "orderByFields", void 0), e2([y()], h3.prototype, "searchFields", void 0), e2([y()], h3.prototype, "searchTemplate", void 0), e2([y()], h3.prototype, "suggestionTemplate", void 0), h3 = o3 = e2([a("esri.widgets.Search.LayerSearchSource")], h3);
var n5 = h3;

// node_modules/@arcgis/core/rest/locator/utils.js
function e7(e9) {
  return !!e9 && "number" == typeof e9.x && "number" == typeof e9.y;
}
function n6(e9) {
  return e9 && "number" == typeof e9.xmin && "number" == typeof e9.ymin && "number" == typeof e9.xmax && "number" == typeof e9.ymax;
}

// node_modules/@arcgis/core/rest/support/AddressCandidate.js
var i5 = class extends l {
  constructor(t9) {
    super(t9), this.address = null, this.attributes = null, this.extent = null, this.location = null, this.score = null;
  }
};
e2([y({ type: String, json: { write: true } })], i5.prototype, "address", void 0), e2([y({ type: Object, json: { write: true } })], i5.prototype, "attributes", void 0), e2([y({ type: w2, json: { write: true } })], i5.prototype, "extent", void 0), e2([y({ type: w, json: { write: true } })], i5.prototype, "location", void 0), e2([y({ type: Number, json: { write: true } })], i5.prototype, "score", void 0), i5 = e2([a("esri.rest.support.AddressCandidate")], i5);
var c3 = i5;

// node_modules/@arcgis/core/rest/support/AddressToLocationsParameters.js
var a6 = class extends l {
  constructor(t9) {
    super(t9), this.address = null, this.apiKey = null, this.categories = null, this.countryCode = null, this.forStorage = null, this.location = null, this.locationType = null, this.magicKey = null, this.maxLocations = null, this.outFields = null, this.outSpatialReference = null, this.searchExtent = null;
  }
};
e2([y({ type: Object, json: { write: true } })], a6.prototype, "address", void 0), e2([y(t4)], a6.prototype, "apiKey", void 0), e2([y({ type: [String], json: { read: { source: "category", reader: (t9) => t9 ? t9.split(",") : null }, write: { target: "category", writer: (t9, o5) => {
  o5.category = t9 ? t9.join(",") : null;
} } } })], a6.prototype, "categories", void 0), e2([y({ type: String, json: { write: true } })], a6.prototype, "countryCode", void 0), e2([y({ type: Boolean, json: { write: true } })], a6.prototype, "forStorage", void 0), e2([y({ type: w, json: { write: { writer: (t9, o5) => {
  o5.location = t9 ? t9.clone().normalize() : null;
} } } })], a6.prototype, "location", void 0), e2([y({ type: String, json: { write: true } })], a6.prototype, "locationType", void 0), e2([y({ type: String, json: { write: true } })], a6.prototype, "magicKey", void 0), e2([y({ type: Number, json: { write: true } })], a6.prototype, "maxLocations", void 0), e2([y({ type: [String], json: { write: { writer: (t9, o5) => {
  o5.outFields = t9 ? t9.join(",") : null;
} } } })], a6.prototype, "outFields", void 0), e2([y({ type: f, json: { read: { source: "outSR" }, write: { target: "outSR" } } })], a6.prototype, "outSpatialReference", void 0), e2([y({ type: w2, json: { write: { writer: (t9, o5) => {
  const e9 = t9 ? t9.shiftCentralMeridian() : null;
  o5.searchExtent = e9;
} } } })], a6.prototype, "searchExtent", void 0), a6 = e2([a("esri.rest.support.AddressToLocationsParameters")], a6), a6.from = b(a6);
var c4 = a6;

// node_modules/@arcgis/core/rest/locator/addressToLocations.js
async function d3(o5, n11, a11) {
  n11 = c4.from(n11);
  const d8 = f2(o5), { address: p8, ...m9 } = n11.toJSON(), u4 = { ...p8, ...m9, f: "json" }, c10 = s7({ ...d8.query, ...u4 }), j6 = i2(c10, a11), l6 = `${d8.path}/findAddressCandidates`;
  return U2(l6, j6).then(f4);
}
function f4({ data: r3 }) {
  if (!r3)
    return [];
  const { candidates: t9, spatialReference: e9 } = r3;
  return t9 ? t9.map((r4) => {
    if (!r4)
      return;
    const { extent: t10, location: s12 } = r4, i8 = !t10 || n6(t10);
    return e7(s12) && i8 ? (t10 && (t10.spatialReference = e9), s12 && (s12.spatialReference = e9), c3.fromJSON(r4)) : void 0;
  }) : [];
}

// node_modules/@arcgis/core/rest/support/LocationToAddressParameters.js
var a7 = class extends l {
  constructor(o5) {
    super(o5), this.apiKey = null, this.location = null, this.locationType = null, this.outSpatialReference = null;
  }
};
e2([y(t4)], a7.prototype, "apiKey", void 0), e2([y({ type: w, json: { write: { writer: (o5, r3) => {
  const t9 = o5 ? o5.clone().normalize() : null, e9 = void 0 !== t9;
  r3.location = e9 ? t9 : null;
} } } })], a7.prototype, "location", void 0), e2([y({ type: String, json: { write: true } })], a7.prototype, "locationType", void 0), e2([y({ type: f, json: { read: { source: "outSR" }, write: { target: "outSR" } } })], a7.prototype, "outSpatialReference", void 0), a7 = e2([a("esri.rest.support.LocationToAddressParameters")], a7), a7.from = b(a7);
var n7 = a7;

// node_modules/@arcgis/core/rest/locator/locationToAddress.js
async function n8(e9, n11, i8) {
  n11 = n7.from(n11);
  const c10 = f2(e9), m9 = { ...n11.toJSON(), f: "json" }, u4 = s7({ ...c10.query, ...m9 }), f7 = i2(u4, i8), p8 = `${c10.path}/reverseGeocode`;
  return U2(p8, f7).then(d4);
}
function d4({ data: r3 }) {
  if (!r3)
    return;
  const { address: o5, location: t9 } = r3, s12 = o5 && o5.Match_addr || "";
  return c3.fromJSON({ address: s12, attributes: o5 || {}, location: t9, score: 100 });
}

// node_modules/@arcgis/core/rest/support/SuggestionCandidate.js
var e8 = class extends l {
  constructor(o5) {
    super(o5), this.isCollection = null, this.magicKey = null, this.text = null;
  }
};
e2([y({ type: Boolean, json: { write: true } })], e8.prototype, "isCollection", void 0), e2([y({ type: String, json: { write: true } })], e8.prototype, "magicKey", void 0), e2([y({ type: String, json: { write: true } })], e8.prototype, "text", void 0), e8 = e2([a("esri.rest.support.SuggestionCandidate")], e8);
var p4 = e8;

// node_modules/@arcgis/core/rest/support/SuggestLocationsParameters.js
var c5 = class extends l {
  constructor(t9) {
    super(t9), this.apiKey = null, this.categories = null, this.countryCode = null, this.location = null, this.maxSuggestions = null, this.outSpatialReference = null, this.searchExtent = null, this.text = null;
  }
};
e2([y(t4)], c5.prototype, "apiKey", void 0), e2([y({ type: [String], json: { read: { source: "category", reader: (t9) => t9 ? t9.split(",") : null }, write: { target: "category", writer: (t9, o5) => {
  o5.category = t9 ? t9.join(",") : null;
} } } })], c5.prototype, "categories", void 0), e2([y({ type: String, json: { write: true } })], c5.prototype, "countryCode", void 0), e2([y({ type: w, json: { write: { writer: (t9, o5) => {
  o5.location = t9 ? t9.clone().normalize() : null;
} } } })], c5.prototype, "location", void 0), e2([y({ type: Number, json: { write: true } })], c5.prototype, "maxSuggestions", void 0), e2([y({ type: f, json: { read: { source: "outSR" }, write: { target: "outSR" } } })], c5.prototype, "outSpatialReference", void 0), e2([y({ type: w2, json: { write: { writer: (t9, o5) => {
  const e9 = t9 ? t9.shiftCentralMeridian() : null;
  o5.searchExtent = JSON.stringify(e9);
} } } })], c5.prototype, "searchExtent", void 0), e2([y({ type: String, json: { write: true } })], c5.prototype, "text", void 0), c5 = e2([a("esri.rest.support.SuggestLocationsParameters")], c5), c5.from = b(c5);
var l3 = c5;

// node_modules/@arcgis/core/rest/locator/suggestLocations.js
async function u2(n11, u4, m9) {
  const p8 = f2(n11), a11 = { ...(u4 = l3.from(u4)).toJSON(), f: "json" }, f7 = s7({ ...p8.query, ...a11 }), g5 = i2(f7, m9), c10 = `${p8.path}/suggest`;
  return U2(c10, g5).then(i6);
}
function i6(t9) {
  const { data: o5 } = t9;
  if (!o5)
    return [];
  const { suggestions: r3 } = o5;
  return r3 ? r3.map((t10) => new p4(t10)) : [];
}

// node_modules/@arcgis/core/widgets/Search/support/locatorUtils.js
var f5 = "Single Line Input";
var d5 = 3e5;
function g3(e9, o5) {
  return e9.location ? h4(e9, o5) : I2(e9, o5);
}
function p5(e9, o5) {
  if (o5.localSearchDisabled)
    return null;
  const t9 = e9 == null ? void 0 : e9.scale;
  return "number" == typeof t9 && t9 <= d5 ? e9.get("extent.center") : null;
}
function y3(e9, t9) {
  const { source: r3, spatialReference: s12, view: n11, suggestTerm: c10, maxSuggestions: a11, sourceIndex: l6 } = e9, m9 = new l3(), { apiKey: f7, url: d8 } = r3, g5 = j4(r3, n11), y5 = t9 && t9.signal;
  if (!d8)
    return Promise.resolve(null);
  f7 && (m9.apiKey = f7), r3.categories && (m9.categories = r3.categories), s12 && (m9.outSpatialReference = s12);
  const x3 = p5(n11, r3);
  x3 && (m9.location = x3);
  if (!c10.trim())
    return Promise.resolve(null);
  const { prefix: v7 = "", suffix: S4 = "" } = r3, w6 = `${v7}${c10}${S4}`;
  return m9.text = w6, g5 && (m9.searchExtent = e(g5)), m9.maxSuggestions = a11, r3.countryCode && (m9.countryCode = r3.countryCode), u2(d8, m9, { signal: y5 }).then((e10) => b4(e10, l6));
}
function x2(e9) {
  return !!e9 && /(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e9);
}
function v6(e9) {
  return !!e9 && /(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e9);
}
function S3(e9) {
  return !!e9 && /(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e9);
}
var w4 = "https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";
function h4(e9, o5) {
  const { source: t9, spatialReference: r3, location: s12, sourceIndex: i8, view: c10 } = e9, { apiKey: u4, url: l6, zoomScale: m9, defaultZoomScale: f7 } = t9, d8 = c10 && c10.scale, g5 = o5 && o5.signal, p8 = new n7();
  return p8.location = s12, u4 && (p8.apiKey = u4), r3 && (p8.outSpatialReference = r3), n8(l6, p8, { signal: g5 }).then((e10) => L3([e10], { sourceIndex: i8, scale: d8, view: c10, zoomScale: m9, defaultZoomScale: f7 })).catch(() => []);
}
function j4(e9, o5) {
  const { filter: t9, withinViewEnabled: r3 } = e9, s12 = o5 && o5.scale, n11 = o5 && o5.extent, i8 = t9 && t9.geometry;
  return a5(i8, o5, s12) || (r3 && n11 ? n11 : void 0);
}
function I2(e9, t9) {
  const { source: r3, suggestResult: n11, spatialReference: i8, view: a11, maxResults: u4, sourceIndex: l6 } = e9, m9 = r3 && r3.zoomScale, d8 = r3 && r3.defaultZoomScale;
  if (!n11.text.trim())
    return Promise.resolve(null);
  const g5 = !n11.key && r3.prefix ? r3.prefix : "", y5 = !n11.key && r3.suffix ? r3.suffix : "", x3 = `${g5}${n11.text}${y5}`, v7 = new c4(), { apiKey: S4, url: w6 } = r3, h5 = a11 && a11.scale, I4 = j4(r3, a11), $5 = t9 && t9.signal;
  if (S4 && (v7.apiKey = S4), !w6)
    return Promise.resolve(null);
  r3.categories && (v7.categories = r3.categories), r3.locationType && (v7.locationType = r3.locationType), i8 && (v7.outSpatialReference = i8);
  const b6 = p5(a11, r3);
  b6 && (v7.location = b6), v7.maxLocations = u4, I4 && (v7.searchExtent = e(I4)), r3.countryCode && (v7.countryCode = r3.countryCode);
  const { key: K3 } = n11, P2 = `${K3}`;
  return K3 && (v7.magicKey = P2), v7.address = {}, v7.address[r3.singleLineFieldName || f5] = x3, r3.outFields && (v7.outFields = r3.outFields), d3(w6, v7, { signal: $5 }).then((e10) => L3(e10, { key: P2, scale: h5, sourceIndex: l6, view: a11, zoomScale: m9, defaultZoomScale: d8 }));
}
function $3(e9, o5) {
  return { text: e9.text, key: e9.magicKey, sourceIndex: o5 };
}
function b4(e9, o5) {
  return e9.map((e10) => $3(e10, o5));
}
function K(o5, s12) {
  const { key: n11, scale: i8, sourceIndex: c10, view: a11, zoomScale: u4, defaultZoomScale: f7 } = s12, { attributes: d8, extent: g5, location: p8, address: y5 } = o5, x3 = new g({ geometry: p8, attributes: d8 }), v7 = g5 || p8, S4 = a5(v7, a11, i8), w6 = "number" == typeof u4 ? p2(S4, a11, u4) : "number" == typeof f7 && "point" === v7.type ? p2(S4, a11, f7) : S4, h5 = p8 ? `${p8.x},${p8.y}` : "", j6 = y5 || h5, I4 = x3.clone();
  return r(w6) && (I4.geometry = v2.fromExtent(w6)), { extent: w6, feature: x3, target: I4, key: n11, name: j6, sourceIndex: c10 };
}
function L3(e9, o5) {
  return e9.filter(Boolean).map((e10) => K(e10, o5));
}

// node_modules/@arcgis/core/widgets/Search/LocatorSearchSource.js
var a8;
var p6 = "esri.widgets.Search.LocatorSearchSource";
var n9 = a8 = class extends i4 {
  constructor(e9) {
    super(e9), this.apiKey = null, this.categories = null, this.countryCode = null, this.defaultZoomScale = null, this.localSearchDisabled = false, this.locationType = null, this.name = "", this.placeholder = "", this.searchTemplate = "", this.singleLineFieldName = null, this.suggestionsEnabled = null, this.url = null, this.zoomScale = null, this.getResults = (e10, t9) => g3({ source: this, ...e10 }, t9), this.getSuggestions = (e10, t9) => y3({ source: this, ...e10 }, t9);
  }
  clone() {
    return new a8({ apiKey: this.apiKey, autoNavigate: this.autoNavigate, filter: this.filter, maxResults: this.maxResults, maxSuggestions: this.maxSuggestions, minSuggestCharacters: this.minSuggestCharacters, outFields: this.outFields ? p(this.outFields) : null, placeholder: this.placeholder, popupEnabled: this.popupEnabled, prefix: this.prefix, resultGraphicEnabled: this.resultGraphicEnabled, resultSymbol: this.resultSymbol ? this.resultSymbol.clone() : null, suggestionsEnabled: this.suggestionsEnabled, suffix: this.suffix, withinViewEnabled: this.withinViewEnabled, categories: this.categories ? p(this.categories) : null, countryCode: this.countryCode, locationType: this.locationType, searchTemplate: this.searchTemplate, singleLineFieldName: this.singleLineFieldName, zoomScale: this.zoomScale });
  }
};
e2([y()], n9.prototype, "apiKey", void 0), e2([y()], n9.prototype, "categories", void 0), e2([y()], n9.prototype, "countryCode", void 0), e2([y({ json: { write: true } })], n9.prototype, "defaultZoomScale", void 0), e2([y()], n9.prototype, "localSearchDisabled", void 0), e2([y()], n9.prototype, "locationType", void 0), e2([y({ json: { write: true } })], n9.prototype, "name", void 0), e2([y({ json: { write: true } })], n9.prototype, "placeholder", void 0), e2([y()], n9.prototype, "searchTemplate", void 0), e2([y({ json: { write: true } })], n9.prototype, "singleLineFieldName", void 0), e2([y({ json: { read: { source: "suggest" }, write: { target: "suggest" } } })], n9.prototype, "suggestionsEnabled", void 0), e2([y({ json: { write: true } })], n9.prototype, "url", void 0), e2([y({ json: { write: true } })], n9.prototype, "zoomScale", void 0), n9 = a8 = e2([a(p6)], n9);
var c6 = n9;

// node_modules/@arcgis/core/rest/geometryService/units.js
var _ = new s4({ MGRS: "mgrs", USNG: "usng", UTM: "utm", GeoRef: "geo-ref", GARS: "gars", DMS: "dms", DDM: "ddm", DD: "dd" });

// node_modules/@arcgis/core/rest/operations/generalize.js
var i7 = new s4({ 109006: "centimeters", 9102: "decimal-degrees", 109005: "decimeters", 9002: "feet", 109009: "inches", 9036: "kilometers", 9001: "meters", 9035: "miles", 109007: "millimeters", 109012: "nautical-miles", 9096: "yards" });

// node_modules/@arcgis/core/rest/support/GeneralizeParameters.js
var m6 = class extends l {
  constructor(r3) {
    super(r3), this.deviationUnit = null, this.geometries = null, this.maxDeviation = null;
  }
};
e2([y({ type: String, json: { write: true } })], m6.prototype, "deviationUnit", void 0), e2([y({ json: { read: { reader: (r3) => r3 ? r3.map((r4) => v3(r4)).filter(r) : null }, write: { writer: (r3, o5) => {
  o5.geometries = (r3 == null ? void 0 : r3.map((r4) => r4.toJSON())) ?? null;
} } } })], m6.prototype, "geometries", void 0), e2([y({ type: Number, json: { write: true } })], m6.prototype, "maxDeviation", void 0), m6 = e2([a("esri.rest.support.GeneralizeParameters")], m6), m6.from = b(m6);

// node_modules/@arcgis/core/rest/operations/lengths.js
var n10 = new s4({ preserveShape: "preserve-shape" });

// node_modules/@arcgis/core/rest/support/LengthsParameters.js
var l4 = class extends l {
  constructor(o5) {
    super(o5), this.calculationType = null, this.geodesic = null, this.lengthUnit = null, this.polylines = null;
  }
};
e2([y({ type: String, json: { write: true } })], l4.prototype, "calculationType", void 0), e2([y({ type: Boolean, json: { write: true } })], l4.prototype, "geodesic", void 0), e2([y({ json: { write: true } })], l4.prototype, "lengthUnit", void 0), e2([y({ type: [m], json: { read: { reader: (o5) => o5 ? o5.map((o6) => v3(o6)) : null }, write: { writer: (o5, r3) => {
  r3.polylines = o5.map((o6) => o6.toJSON());
} } } })], l4.prototype, "polylines", void 0), l4 = e2([a("esri.rest.support.LengthsParameters")], l4), l4.from = b(l4);

// node_modules/@arcgis/core/rest/operations/offset.js
var o4 = new s4({ esriGeometryOffsetBevelled: "bevelled", esriGeometryOffsetMitered: "mitered", esriGeometryOffsetRounded: "rounded" });
var s11 = new s4({ 9001: "meters", 9002: "feet", 9036: "kilometers", 9093: "miles", 109012: "nautical-miles", 109001: "yards" });

// node_modules/@arcgis/core/rest/support/OffsetParameters.js
var m7 = class extends l {
  constructor(o5) {
    super(o5), this.bevelRatio = null, this.geometries = null, this.offsetDistance = null, this.offsetHow = null, this.offsetUnit = null;
  }
};
e2([y({ type: Number, json: { write: true } })], m7.prototype, "bevelRatio", void 0), e2([y({ json: { read: { reader: (o5) => o5 ? o5.map((o6) => v3(o6)).filter(r) : null }, write: { writer: (o5, t9) => {
  t9.geometries = (o5 == null ? void 0 : o5.map((o6) => o6.toJSON())) ?? null;
} } } })], m7.prototype, "geometries", void 0), e2([y({ type: Number, json: { write: true } })], m7.prototype, "offsetDistance", void 0), e2([y({ type: String, json: { write: true } })], m7.prototype, "offsetHow", void 0), e2([y({ type: String, json: { write: true } })], m7.prototype, "offsetUnit", void 0), m7 = e2([a("esri.rest.support.OffsetParameters")], m7), m7.from = b(m7);

// node_modules/@arcgis/core/rest/operations/relation.js
var t7 = new s4({ esriGeometryRelationCross: "cross", esriGeometryRelationDisjoint: "disjoint", esriGeometryRelationIn: "in", esriGeometryRelationInteriorIntersection: "interior-intersection", esriGeometryRelationIntersection: "intersection", esriGeometryRelationLineCoincidence: "line-coincidence", esriGeometryRelationLineTouch: "line-touch", esriGeometryRelationOverlap: "overlap", esriGeometryRelationPointTouch: "point-touch", esriGeometryRelationTouch: "touch", esriGeometryRelationWithin: "within", esriGeometryRelationRelation: "relation" });

// node_modules/@arcgis/core/rest/support/RelationParameters.js
var a9 = class extends l {
  constructor(r3) {
    super(r3), this.geometries1 = null, this.geometries2 = null, this.relation = null, this.relationParameter = null;
  }
};
e2([y({ json: { read: { reader: (r3) => r3 ? r3.map((r4) => v3(r4)).filter(r) : null }, write: { writer: (r3, e9) => {
  e9.geometries1 = (r3 == null ? void 0 : r3.map((r4) => r4.toJSON())) ?? null;
} } } })], a9.prototype, "geometries1", void 0), e2([y({ json: { read: { reader: (r3) => r3 ? r3.map((r4) => v3(r4)).filter(r) : null }, write: { writer: (r3, e9) => {
  e9.geometries2 = (r3 == null ? void 0 : r3.map((r4) => r4.toJSON())) ?? null;
} } } })], a9.prototype, "geometries2", void 0), e2([y({ type: String, json: { write: true } })], a9.prototype, "relation", void 0), e2([y({ type: String, json: { write: true } })], a9.prototype, "relationParameter", void 0), a9 = e2([a("esri.rest.support.RelationParameters")], a9), a9.from = b(a9);

// node_modules/@arcgis/core/rest/operations/trimExtend.js
var t8 = new s4({ 0: "default-curve-extension", 1: "relocate-ends", 2: "keep-end-attributes", 4: "no-end-attributes", 8: "no-extend-at-from", 16: "no-extend-at-to" });

// node_modules/@arcgis/core/rest/support/TrimExtendParameters.js
var m8 = class extends l {
  constructor(r3) {
    super(r3), this.extendHow = "default-curve-extension", this.polylines = null, this.trimExtendTo = null;
  }
};
e2([y({ type: String, json: { write: true } })], m8.prototype, "extendHow", void 0), e2([y({ type: [m], json: { read: { reader: (r3) => r3 ? r3.map((r4) => v3(r4)) : null }, write: { writer: (r3, o5) => {
  o5.polylines = r3.map((r4) => r4.toJSON());
} } } })], m8.prototype, "polylines", void 0), e2([y({ json: { read: { reader: (r3) => r3 ? v3(r3) : null }, write: { writer: (r3, o5) => {
  o5.trimExtendTo = r3.toJSON();
} } } })], m8.prototype, "trimExtendTo", void 0), m8 = e2([a("esri.rest.support.TrimExtendParameters")], m8), m8.from = b(m8);

// node_modules/@arcgis/core/widgets/support/geolocationUtils.js
var a10 = s2.getLogger("esri.widgets.support.geolocationUtils");
var c8 = { maximumAge: 0, timeout: 15e3, enableHighAccuracy: true };
function u3() {
  const e9 = has("esri-geolocation");
  return e9 || a10.warn("geolocation-unsupported", "Geolocation unsupported."), e9;
}
function p7() {
  const e9 = window.isSecureContext;
  return e9 || a10.warn("insecure-context", "Geolocation requires a secure origin."), e9;
}
function l5() {
  return u3() && p7();
}
function g4(e9) {
  const r3 = 15e3;
  return e9 || (e9 = c8), new Promise((o5, i8) => {
    setTimeout(() => i8(new s3("geolocation:timeout", "getting the current geolocation position timed out")), r3), navigator.geolocation.getCurrentPosition(o5, i8, e9);
  });
}
function d6(e9, r3) {
  var _a;
  const { position: o5, view: i8 } = e9, s12 = (_a = j5(o5)) == null ? void 0 : _a.coords;
  if (!s12)
    throw new s3("geometry-service:no-coords", "Geolocation has no coordinates");
  return y4(f6(s12), i8, r3);
}
function j5(e9) {
  const t9 = e9 && e9.coords || {}, r3 = { accuracy: t9.accuracy, altitude: t9.altitude, altitudeAccuracy: t9.altitudeAccuracy, heading: t9.heading, latitude: t9.latitude, longitude: t9.longitude, speed: t9.speed };
  return e9 ? { coords: r3, timestamp: e9.timestamp } : e9;
}
function f6({ longitude: e9, latitude: t9, altitude: r3 }) {
  return new w({ longitude: e9, latitude: t9, z: r3 || void 0, spatialReference: { wkid: 4326 } });
}
function y4(e9, r3, o5) {
  if (!r3)
    return Promise.resolve(e9);
  const s12 = r3.spatialReference;
  return s12.isWGS84 ? Promise.resolve(e9) : s12.isWebMercator ? Promise.resolve(R(e9)) : P(o5).then((r4) => {
    if (!r4)
      throw new s3("geometry-service:missing-url", "Geometry service URL is missing");
    const i8 = new a4({ geometries: [e9], outSpatialReference: s12 });
    return n4(r4, i8, o5).then((e10) => e10[0]);
  });
}
function P(t9) {
  if (s.geometryServiceUrl)
    return Promise.resolve(s.geometryServiceUrl);
  const r3 = b2.getDefault();
  return r3.load(t9).catch(() => {
  }).then(() => r3.get("helperServices.geometry.url"));
}

// node_modules/@arcgis/core/widgets/Search/SearchViewModel.js
function H(e9, t9) {
  return e9.hasOwnProperty(t9) && null != e9[t9] && "" !== e9[t9];
}
var Q = () => u("esri/widgets/Search/t9n/Search");
var Z = "esri.widgets.Search.SearchViewModel";
var q2 = s2.getLogger(Z);
var z = "highlight";
var K2 = j.ofType({ key: (e9) => e9.layer ? "layer" : "locator", base: i4, typeMap: { layer: n5, locator: c6 } });
var W2 = f.WGS84;
var X = "esri/images/search/search-symbol-32.png";
var Y = /<(?:.|\s)*?>/g;
var $4 = -1;
var ee = class extends t6(n.EventedMixin(v)) {
  constructor(e9) {
    super(e9), this._handles = new t2(), this._gotoController = null, this._searching = null, this._createdFeatureLayers = [], this.autoNavigate = true, this.autoSelect = true, this.defaultPopupTemplate = null, this.defaultSources = new K2(), this.defaultSymbols = { point: new n3({ url: a3(X), size: 24, width: 24, height: 24 }), polyline: new m2({ color: [130, 130, 130, 1], width: 2 }), polygon: new S({ color: [235, 235, 235, 0.4], outline: { color: [130, 130, 130, 1], width: 2 } }) }, this.includeDefaultSources = true, this.maxInputLength = 128, this.maxResults = 6, this.maxSuggestions = 6, this.messages = null, this.minSuggestCharacters = 3, this.popupEnabled = true, this.popupTemplate = null, this.portal = b2.getDefault(), this.resultCount = null, this.resultGraphicEnabled = true, this.resultGraphic = null, this.results = null, this.selectedSuggestion = null, this.searchAllEnabled = true, this.selectedResult = null, this.sources = new K2(), this.suggestionDelay = 350, this.suggestionCount = null, this.suggestions = null, this.suggestionsEnabled = true, this.view = null;
  }
  initialize() {
    const e9 = async () => {
      const e10 = await Q();
      this.messages = e10, this.defaultPopupTemplate = new k2({ title: e10.searchResult, content: "{Match_addr}" });
    };
    e9(), this._handles.add([l2(() => [this.includeDefaultSources, this.view, this.portal], () => this._update(), h), s5(e9)]);
  }
  destroy() {
    this._destroyFeatureLayers(), this._abortGoTo(), this.clearGraphics(), this._handles.destroy(), this._handles = null;
  }
  get activeSource() {
    return this.allSources.at(this.activeSourceIndex) ?? null;
  }
  get activeSourceIndex() {
    return 1 === this.allSources.length || !this.searchAllEnabled ? 0 : $4;
  }
  set activeSourceIndex(e9) {
    this._overrideIfSome("activeSourceIndex", e9);
  }
  get allPlaceholder() {
    var _a;
    return (_a = this.messages) == null ? void 0 : _a.allPlaceholder;
  }
  set allPlaceholder(e9) {
    this._overrideIfSome("allPlaceholder", e9);
  }
  get allSources() {
    const { sources: e9, defaultSources: t9, includeDefaultSources: r3 } = this, s12 = "function" == typeof r3 ? r3.call(null, { sources: e9, defaultSources: t9 }) : r3 ? t9.concat(e9) : e9, o5 = this._get("allSources") || new K2();
    return o5.removeAll(), o5.addMany(s12.filter(Boolean)), o5;
  }
  get locationEnabled() {
    return this._get("locationEnabled") || l5();
  }
  set locationEnabled(e9) {
    if (void 0 === e9)
      return void this._clearOverride("locationEnabled");
    const t9 = l5();
    if (e9 && !t9) {
      const e10 = new s3("locationEnabled:geolocation-unsupported", "Geolocation API is unsupported.", { geolocation: navigator.geolocation });
      q2.error(e10);
    }
    this._override("locationEnabled", !!e9 && t9);
  }
  get placeholder() {
    const { allSources: e9, activeSourceIndex: t9, allPlaceholder: r3 } = this;
    if (t9 === $4)
      return r3;
    const s12 = e9.at(t9);
    return s12 ? s12.placeholder : "";
  }
  set searchTerm(e9) {
    this._set("searchTerm", e9 || ""), this.clearGraphics(), this.selectedSuggestion && this.selectedSuggestion.text !== e9 && this._set("selectedSuggestion", null), "" === e9 && this._clear();
  }
  get searchTerm() {
    return this._get("searchTerm") || "";
  }
  get state() {
    return this._searching ? "searching" : this.updating ? "loading" : 0 === this.allSources.length ? "disabled" : "ready";
  }
  get updating() {
    return null != this._updatingPromise;
  }
  clear() {
    this.searchTerm = "";
  }
  clearGraphics() {
    this._removeHighlight(), this._closePopup(), this.view && this.view.graphics.remove(this.resultGraphic), this._set("resultGraphic", null);
  }
  search(e9, t9) {
    this.emit("search-start"), this.clearGraphics();
    const r3 = this._createSuggestionForSearch(e9), s12 = this.when().then(() => this._getResultsFromSources(r3, t9).then((e10) => {
      var _a;
      if ((_a = e(t9 == null ? void 0 : t9.signal)) == null ? void 0 : _a.aborted)
        return null;
      const s13 = { activeSourceIndex: this.activeSourceIndex, searchTerm: r3.text, numResults: 0, numErrors: 0, errors: [], results: [] };
      this._formatResponse(s13, e10, r3);
      const o5 = this._getFirstResult(s13.results), i8 = (r3.location && o5 ? o5.name : r3.text).replace(Y, "");
      return this._set("searchTerm", i8), (r3.key && "number" == typeof r3.sourceIndex || r3.location) && this._set("selectedSuggestion", r3), this._set("results", s13.results), this._set("resultCount", s13.results.reduce((e11, t10) => e11 + t10.results.length, 0)), this.emit("search-complete", s13), this._selectFirstResult(o5).then(() => s13);
    })).then((e10) => (this._clearSearching(), e10), (e10) => {
      throw this._clearSearching(), e10;
    });
    return this._searching = s12, s12;
  }
  searchNearby(e9) {
    if (!this.locationEnabled) {
      const e10 = new s3("searchNearby:geolocation-unsupported", "Geolocation API is unsupported.", { geolocation: navigator.geolocation });
      return q2.error(e10), Promise.reject(e10);
    }
    const t9 = g4().then((t10) => d6({ position: t10, view: this.view }, e9)).then((t10) => this.search(t10, e9));
    return this._searching = t9, t9.catch(() => {
    }).then(() => this._clearSearching()), t9;
  }
  select(e9) {
    if (this.clearGraphics(), !e9) {
      const t10 = new s3("select:missing-parameter", "Cannot select without a searchResult.", { searchResult: e9 });
      return q2.error(t10), Promise.reject(t10);
    }
    const { view: t9 } = this, r3 = H(e9, "sourceIndex") ? e9.sourceIndex : this._getSourceIndexOfResult(e9), o5 = this.allSources.at(r3);
    if (!o5) {
      const e10 = new s3("select:missing-source", "Cannot select without a source.", { source: o5 });
      return q2.error(e10), Promise.reject(e10);
    }
    const i8 = o5 instanceof n5 ? this._getLayerSourcePopupTemplate(o5) : o5.popupTemplate, l6 = o5.resultSymbol || this._getDefaultSymbol(e9), n11 = H(o5, "resultGraphicEnabled") ? o5.resultGraphicEnabled : this.resultGraphicEnabled, u4 = H(o5, "autoNavigate") ? o5.autoNavigate : this.autoNavigate, c10 = H(o5, "popupEnabled") ? o5.popupEnabled : this.popupEnabled, h5 = c10 ? i8 || this.popupTemplate || this.defaultPopupTemplate : null, { feature: g5 } = e9;
    if (!g5) {
      const e10 = new s3("select:missing-feature", "Cannot select without a feature.", { feature: g5 });
      return q2.error(e10), Promise.reject(e10);
    }
    const { attributes: m9, geometry: y5, layer: f7, sourceLayer: S4 } = g5, _2 = m4(y5), v7 = { layerViewQuery: this._getLayerView(g5), elevationQuery: t9 && r(_2) ? s10(_2, t9).catch(() => _2) : Promise.resolve(_2) };
    return E(v7).then((i9) => {
      const a11 = i9.layerViewQuery.value, d8 = i9.elevationQuery.value;
      l6 instanceof m3 && (l6.text = e9.name);
      const _3 = t9 && u4 ? e9.target || e9.extent : null;
      return (r(_3) ? this._goToSearchResult(_3) : Promise.resolve()).then(() => {
        var _a;
        const i10 = a11 ? g5 : new g({ geometry: y5, symbol: l6, attributes: m9, layer: f7, sourceLayer: S4, popupTemplate: h5 }), u5 = c10 && ((_a = this.view) == null ? void 0 : _a.popup), p8 = u5 && i10.getEffectivePopupTemplate(u5.defaultPopupTemplateEnabled);
        return p8 && t9.popup.open({ features: [i10], location: d8 }), a11 && t5(a11) && !p8 && this._highlightFeature({ graphic: i10, layerView: a11 }), !a11 && n11 && t9 && t9.graphics.push(i10), this._setResultFloor(e9), this._set("selectedResult", e9), this._set("resultGraphic", i10), this.emit("select-result", { result: e9, source: o5, sourceIndex: r3 }), e9;
      });
    });
  }
  suggest(e9, t9, r3) {
    const s12 = e9 || this.searchTerm;
    return this.emit("suggest-start", { searchTerm: s12 }), this._suggestTimer(t9, r3).then(() => this._suggestImmediate(s12, r3).then((e10) => (this._set("suggestions", e10.results), this._set("suggestionCount", e10.results.reduce((e11, t10) => e11 + t10.results.length, 0)), this.emit("suggest-complete", e10), e10)));
  }
  async when() {
    await j2(() => !this.updating);
  }
  async _update() {
    const { portal: e9, view: t9 } = this;
    if (this.includeDefaultSources) {
      const r3 = this._updatingPromise = E([e9 == null ? void 0 : e9.load(), t9 == null ? void 0 : t9.when()]);
      if (this.destroyed)
        return;
      if (await r3, r3 !== this._updatingPromise)
        return;
    }
    await j2(() => this.messages), this.destroyed || this._updateDefaultSources(), this._updatingPromise = null;
  }
  _clearSearching() {
    this._searching = null;
  }
  _convertHelperServices() {
    var _a, _b;
    const e9 = (_b = (_a = this.portal) == null ? void 0 : _a.helperServices) == null ? void 0 : _b.geocode;
    if (!e9)
      return [];
    return e9.map((e10) => {
      if (false === e10.placefinding)
        return;
      const t9 = s.apiKey && S3(e10.url) ? { url: w4 } : null, s12 = c6.fromJSON({ ...e10, ...t9 }), o5 = s12.url;
      if (S3(o5) || v6(o5) || x2(o5)) {
        const e11 = s12.outFields || ["Addr_type", "Match_addr", "StAddr", "City"], t10 = s12.placeholder || this.messages.placeholder, r3 = "number" == typeof s12.defaultZoomScale ? s12.defaultZoomScale : 2500;
        s12.set({ singleLineFieldName: "SingleLine", outFields: e11, placeholder: t10, defaultZoomScale: r3 });
      }
      return s12.singleLineFieldName ? s12 : void 0;
    }).filter(Boolean);
  }
  _destroyFeatureLayers() {
    this._createdFeatureLayers.forEach((e9) => e9 == null ? void 0 : e9.destroy()), this._createdFeatureLayers = [];
  }
  _getLayerSources(e9, t9) {
    var _a;
    const r3 = (_a = this.view) == null ? void 0 : _a.map;
    return e9.map((e10) => {
      const s12 = r3.findLayerById(e10.id);
      if (!s12)
        return;
      const o5 = this._getLayerJSON(e10), i8 = n5.fromJSON(o5);
      return i8.placeholder = t9, this._getLayer(s12, o5).then((e11) => {
        i8.layer = e11;
      }), i8;
    }).filter(Boolean).toArray();
  }
  _getTableSources(e9, t9) {
    var _a;
    const r3 = (_a = this.view) == null ? void 0 : _a.map;
    return e9.map((e10) => {
      const s12 = r3.findTableById(e10.id);
      if (!s12)
        return;
      const o5 = this._getLayerJSON(e10), i8 = n5.fromJSON(o5);
      return i8.placeholder = t9, this._getLayer(s12, o5).then((e11) => {
        i8.layer = e11;
      }), i8;
    }).filter(Boolean).toArray();
  }
  _convertApplicationProperties() {
    var _a, _b, _c;
    const e9 = (_a = this.view) == null ? void 0 : _a.map, t9 = (_c = (_b = e9 == null ? void 0 : e9.applicationProperties) == null ? void 0 : _b.viewing) == null ? void 0 : _c.search;
    if (!t9)
      return [];
    const { enabled: r3, hintText: s12, layers: o5, tables: i8 } = t9;
    if (!r3)
      return [];
    return [...this._getLayerSources(o5, s12), ...this._getTableSources(i8, s12)];
  }
  async _getSubLayer(e9, t9) {
    if (await e9.load(), !e9.allSublayers)
      throw new Error();
    const r3 = e9.allSublayers.find((e10) => e10.id === t9.subLayer);
    if (!r3)
      throw new Error();
    const s12 = await r3.createFeatureLayer();
    return this._createdFeatureLayers.push(s12), s12;
  }
  async _getBuildingSubLayer(e9, t9) {
    await e9.load();
    const r3 = e9.allSublayers.find((e10) => e10.id === t9.subLayer);
    if ("building-component" !== (r3 == null ? void 0 : r3.type))
      throw new Error();
    if (await r3.load(), null == r3.associatedLayer)
      throw new Error();
    return await r3.associatedLayer.load(), r3;
  }
  _getLayer(e9, t9) {
    return "feature" === e9.type || "scene" === e9.type || "csv" === e9.type || "geojson" === e9.type || "ogc-feature" === e9.type ? Promise.resolve(e9) : "map-image" === e9.type ? this._getSubLayer(e9, t9).catch(() => {
      const t10 = new s3("search:create-featurelayer", "Could not create a FeatureLayer from the MapImageLayer", { layer: e9 });
      return q2.error(t10), null;
    }) : "building-scene" === e9.type ? this._getBuildingSubLayer(e9, t9) : Promise.resolve(null);
  }
  _getLayerJSON(e9) {
    return "function" == typeof e9.toJSON ? e9.toJSON() : e9;
  }
  _updateDefaultSources() {
    const { defaultSources: e9, includeDefaultSources: t9 } = this;
    this._destroyFeatureLayers(), e9.removeAll(), t9 && e9.addMany([...this._convertApplicationProperties(), ...this._convertHelperServices()]);
  }
  _abortGoTo() {
    this._gotoController && this._gotoController.abort(), this._gotoController = null;
  }
  _clear() {
    this._abortGoTo(), this._set("resultCount", null), this._set("results", null), this._set("suggestions", null), this._set("suggestionCount", null), this._set("selectedResult", null), this._set("selectedSuggestion", null), this.emit("search-clear");
  }
  _closePopup() {
    var _a;
    const e9 = (_a = this.view) == null ? void 0 : _a.popup, { resultGraphic: t9 } = this;
    if (!e9 || !t9)
      return;
    const { selectedFeature: r3 } = e9;
    r3 && r3 === t9 && e9.close();
  }
  _suggestTimer(e9, t9) {
    const r3 = null != e9 ? e9 : this.suggestionDelay;
    return U(r3, null, t9 && t9.signal);
  }
  _createLocationForSearch(e9) {
    return e9 instanceof g ? m4(e9.geometry) : e9 instanceof w ? e9 : Array.isArray(e9) && 2 === e9.length ? new w({ longitude: e9[0], latitude: e9[1] }) : null;
  }
  _createSuggestionForSearch(e9) {
    if (e9 && H(e9, "key") && H(e9, "text") && H(e9, "sourceIndex"))
      return e9;
    const t9 = this._createLocationForSearch(e9), r3 = "string" == typeof e9 ? e9 : this.searchTerm, { selectedSuggestion: s12, selectedResult: o5 } = this, i8 = !e9 && s12 && o5, l6 = i8 && s12.key === o5.key && s12.sourceIndex === o5.sourceIndex, a11 = i8 && s12.location;
    return l6 || a11 ? s12 : { location: e(t9), text: t9 ? "" : r3, sourceIndex: null, key: null };
  }
  _getFirstResult(e9) {
    let t9 = null;
    return e9 && e9.some((e10) => {
      const { results: r3 } = e10, s12 = r3[0], o5 = !!s12;
      return o5 && (t9 = s12), o5;
    }), t9;
  }
  _selectFirstResult(e9) {
    return this.autoSelect && e9 ? this.select(e9) : Promise.resolve(null);
  }
  _suggestImmediate(e9, t9) {
    return this.when().then(() => this._getSuggestionsFromSources(e9, t9)).then((r3) => {
      var _a;
      if ((_a = e(t9 == null ? void 0 : t9.signal)) == null ? void 0 : _a.aborted)
        return null;
      const s12 = { activeSourceIndex: this.activeSourceIndex, searchTerm: e9, numResults: 0, numErrors: 0, errors: [], results: [] };
      return this._formatResponse(s12, r3), s12;
    });
  }
  _formatSourceResponse(e9, t9, r3) {
    const s12 = t9 && t9.value || [], o5 = t9 && t9.error, i8 = this.allSources.at(r3);
    if (o5) {
      const t10 = { sourceIndex: r3, source: i8, error: o5 };
      e9.errors.push(t10), q2.error(o5), e9.numErrors++;
    } else {
      const t10 = { sourceIndex: r3, source: i8, results: s12 };
      e9.results.push(t10), e9.numResults += s12.length;
    }
  }
  _formatResponse(e9, t9, r3) {
    if (t9)
      if (e9.activeSourceIndex === $4) {
        const s12 = r3 && H(r3, "sourceIndex") && -1 !== r3.sourceIndex ? r3.sourceIndex : void 0;
        t9.forEach((t10, r4) => {
          const o5 = void 0 !== s12 ? s12 : r4;
          this._formatSourceResponse(e9, t10, o5);
        });
      } else
        this._formatSourceResponse(e9, t9[0], e9.activeSourceIndex);
  }
  _getResultsFromSources(e9, t9) {
    const { allSources: r3 } = this, s12 = !e9.location && H(e9, "sourceIndex") ? e9.sourceIndex : this.activeSourceIndex, o5 = [];
    if (!r3.length) {
      const e10 = new s3("search:no-sources-defined", "At least one source is required.", { allSources: r3 });
      return q2.error(e10), Promise.reject(e10);
    }
    return s12 === $4 ? r3.forEach((r4, s13) => {
      o5.push(this._getResultsFromSource(e9, s13, t9));
    }) : o5.push(this._getResultsFromSource(e9, s12, t9)), E(o5);
  }
  _getSuggestionsFromSources(e9, t9) {
    const { allSources: r3, activeSourceIndex: s12 } = this, o5 = [];
    if (!r3.length) {
      const e10 = new s3("suggest:no-sources-defined", "At least one source is required.", { allSources: r3 });
      return q2.error(e10), Promise.reject(e10);
    }
    return s12 === $4 ? r3.forEach((r4, s13) => {
      o5.push(this._getSuggestionsFromSource(e9, s13, t9));
    }) : o5.push(this._getSuggestionsFromSource(e9, s12, t9)), E(o5);
  }
  _getResultsFromSource(e9, t9, r3) {
    var _a;
    const s12 = this.allSources.at(t9), { location: o5 = null } = e9, i8 = ((_a = this.view) == null ? void 0 : _a.spatialReference) || W2, l6 = H(s12, "maxResults") ? s12.maxResults : this.maxResults, a11 = !!(s12 instanceof n5 && H(s12, "exactMatch")) && s12.exactMatch, { view: n11 } = this;
    return s12.getResults({ view: n11, sourceIndex: t9, location: o5, suggestResult: e9, spatialReference: i8, exactMatch: a11, maxResults: l6 }, r3);
  }
  _getSuggestionsFromSource(e9, t9, r3) {
    var _a;
    const s12 = this.allSources.at(t9), o5 = H(s12, "suggestionsEnabled") ? s12.suggestionsEnabled : this.suggestionsEnabled, i8 = e9.length, l6 = H(s12, "minSuggestCharacters") ? s12.minSuggestCharacters : this.minSuggestCharacters;
    if (o5 && e9.trim() && i8 >= l6) {
      const o6 = ((_a = this.view) == null ? void 0 : _a.spatialReference) || W2, i9 = H(s12, "maxSuggestions") ? s12.maxSuggestions : this.maxSuggestions, { view: l7 } = this, a11 = !!(s12 instanceof n5 && H(s12, "exactMatch")) && s12.exactMatch;
      return s12.getSuggestions({ view: l7, sourceIndex: t9, suggestTerm: e9, spatialReference: o6, maxSuggestions: i9, exactMatch: a11 }, r3);
    }
    return Promise.resolve(null);
  }
  _getLayerSourcePopupTemplate(e9) {
    const { layer: t9 } = e9;
    if (t9)
      return H(e9, "popupTemplate") ? e9.popupTemplate : t9.popupTemplate;
  }
  _getSourceIndexOfResult(e9) {
    const t9 = this.results;
    let r3 = null;
    return t9.some((t10) => t10.results.some((s12) => s12 === e9 && (r3 = t10.sourceIndex, true))), r3;
  }
  async _goToSearchResult(e9) {
    const t9 = !!e9;
    this._abortGoTo();
    const r3 = new AbortController();
    this._gotoController = r3;
    const s12 = { target: { target: e9 }, options: { animate: t9, signal: r3.signal } };
    await this.callGoTo(s12), this._gotoController = null;
  }
  _getDefaultSymbol(e9) {
    var _a;
    const { defaultSymbols: t9 } = this, r3 = (_a = e9.feature) == null ? void 0 : _a.geometry;
    if (t(r3))
      return null;
    switch (r3.type) {
      case "point":
      case "multipoint":
        return t9.point;
      case "polyline":
        return t9.polyline;
      case "extent":
      case "polygon":
        return t9.polygon;
      default:
        return null;
    }
  }
  _removeHighlight() {
    this._handles.remove(z);
  }
  async _getLayerView(e9) {
    const { view: t9 } = this;
    if (!e9 || !t9 || "building-component" === e9.layer.type || "subtype-sublayer" === e9.layer.type)
      return null;
    const { layer: r3 } = e9;
    return await t9.when(), t9.whenLayerView(r3);
  }
  _highlightFeature(e9) {
    const { graphic: t9, layerView: r3 } = e9, { attributes: s12, layer: o5 } = t9, { objectIdField: i8 } = o5, l6 = s12 && s12[i8], a11 = r3.highlight(l6 || t9);
    this._handles.add(a11, z);
  }
  _setResultFloor(e9) {
    var _a, _b, _c;
    const { view: t9 } = this, r3 = (_a = e9.feature) == null ? void 0 : _a.attributes, s12 = (_b = e9.feature) == null ? void 0 : _b.sourceLayer;
    if (s12 && "floorInfo" in s12 && ((_c = s12 == null ? void 0 : s12.floorInfo) == null ? void 0 : _c.floorField) && r3) {
      const e10 = r3[s12.floorInfo.floorField];
      t9 == null ? void 0 : t9.emit("select-result-floor", e10);
    }
  }
};
ee.ALL_INDEX = $4, e2([y()], ee.prototype, "_searching", void 0), e2([y()], ee.prototype, "_updatingPromise", void 0), e2([y({ readOnly: true, value: null })], ee.prototype, "activeSource", null), e2([y()], ee.prototype, "activeSourceIndex", null), e2([y()], ee.prototype, "allPlaceholder", null), e2([y({ readOnly: true })], ee.prototype, "allSources", null), e2([y()], ee.prototype, "autoNavigate", void 0), e2([y()], ee.prototype, "autoSelect", void 0), e2([y()], ee.prototype, "defaultPopupTemplate", void 0), e2([y({ readOnly: true })], ee.prototype, "defaultSources", void 0), e2([y()], ee.prototype, "defaultSymbols", void 0), e2([y()], ee.prototype, "includeDefaultSources", void 0), e2([y()], ee.prototype, "locationEnabled", null), e2([y()], ee.prototype, "maxInputLength", void 0), e2([y()], ee.prototype, "maxResults", void 0), e2([y()], ee.prototype, "maxSuggestions", void 0), e2([y()], ee.prototype, "messages", void 0), e2([y()], ee.prototype, "minSuggestCharacters", void 0), e2([y({ readOnly: true })], ee.prototype, "placeholder", null), e2([y()], ee.prototype, "popupEnabled", void 0), e2([y({ type: k2 })], ee.prototype, "popupTemplate", void 0), e2([y({ type: b2 })], ee.prototype, "portal", void 0), e2([y()], ee.prototype, "resultCount", void 0), e2([y()], ee.prototype, "resultGraphicEnabled", void 0), e2([y({ readOnly: true })], ee.prototype, "resultGraphic", void 0), e2([y({ readOnly: true })], ee.prototype, "results", void 0), e2([y({ readOnly: true })], ee.prototype, "selectedSuggestion", void 0), e2([y()], ee.prototype, "searchAllEnabled", void 0), e2([y({ readOnly: true })], ee.prototype, "selectedResult", void 0), e2([y()], ee.prototype, "searchTerm", null), e2([y({ type: K2 })], ee.prototype, "sources", void 0), e2([y({ readOnly: true })], ee.prototype, "state", null), e2([y()], ee.prototype, "suggestionDelay", void 0), e2([y()], ee.prototype, "suggestionCount", void 0), e2([y({ readOnly: true })], ee.prototype, "suggestions", void 0), e2([y()], ee.prototype, "suggestionsEnabled", void 0), e2([y({ readOnly: true })], ee.prototype, "updating", null), e2([y()], ee.prototype, "view", void 0), e2([y()], ee.prototype, "clear", null), ee = e2([a(Z)], ee);
var te = ee;

// node_modules/@arcgis/core/widgets/Search/SearchResultRenderer.js
var c9 = class extends W {
  constructor(e9, s12) {
    super(e9, s12), this.messages = null, this.showMoreResultsOpen = false, this.viewModel = null;
  }
  render() {
    const e9 = { [s9.showMoreResults]: this.showMoreResultsOpen };
    return n2("div", { class: s9.base }, n2("div", { key: "esri-search-renderer__container", class: this.classes(s9.moreResults, e9) }, this.renderSearchResultName(), this.renderMoreResults()));
  }
  renderMoreResults() {
    return n2("div", { key: "esri-search-renderer__more-results" }, this.renderMoreResultsButton(), this.renderMoreResultsLists());
  }
  renderSearchResultName() {
    var _a;
    const e9 = (_a = this.viewModel) == null ? void 0 : _a.selectedResult, s12 = e9 && e9.name || "";
    return n2("div", { key: "esri-search-renderer__result-name", class: s9.moreResultsItem }, s12);
  }
  renderMoreResultsLists() {
    var _a;
    const e9 = (_a = this.viewModel) == null ? void 0 : _a.results, { resultCount: s12 } = this.viewModel;
    if (s12 < 2)
      return null;
    const r3 = e9.map((e10) => this.renderMoreResultsList(e10));
    return n2("div", { key: "esri-search-renderer__more-results-container", class: s9.moreResultsList }, r3);
  }
  renderMoreResultsButton() {
    const { messages: e9 } = this, { resultCount: s12 } = this.viewModel;
    return s12 < 2 ? null : n2("div", { key: "esri-search-renderer__more-results-button", class: s9.moreResultsItem }, n2("a", { class: s9.anchor, href: "#", bind: this, onclick: this._showMoreResultsClick, onkeydown: this._showMoreResultsClick }, this.showMoreResultsOpen ? e9.hideMoreResults : e9.showMoreResults));
  }
  renderMoreResultsHeader(e9, s12) {
    return n2("div", { key: `esri-search-result-renderer__header-${s12}`, class: s9.moreResultsListHeader }, e9);
  }
  renderMoreResultsList(e9) {
    var _a, _b;
    const { results: s12 } = e9, r3 = s12.length, t9 = !!r3, o5 = (_a = this.viewModel) == null ? void 0 : _a.selectedResult, l6 = 1 === r3 && s12[0] === o5, i8 = this._getSourceName(e9.source, e9.sourceIndex), u4 = ((_b = this.viewModel) == null ? void 0 : _b.results.length) > 1 && !l6 ? this.renderMoreResultsHeader(i8, e9.sourceIndex) : null, c10 = t9 && s12.map((e10, s13) => this.renderMoreResultsListItem(e10, s13)), d8 = t9 && !l6 ? n2("ul", { key: `esri-search-result-renderer__list-${e9.sourceIndex}` }, c10) : null;
    return t9 ? n2("div", { key: `esri-search-result-renderer__results-${e9.sourceIndex}` }, u4, d8) : null;
  }
  renderMoreResultsListItem(e9, s12) {
    return e9 !== this.get("viewModel.selectedResult") ? n2("li", { key: `esri-search-result-renderer__list-item-${s12}` }, n2("a", { class: s9.anchor, href: "#", tabindex: "0", bind: this, "data-result": e9, onclick: this._selectResultClick, onkeydown: this._selectResultClick }, e9.name)) : null;
  }
  _showMoreResultsClick(e9) {
    e9.preventDefault(), this.showMoreResultsOpen = !this.showMoreResultsOpen;
    const s12 = this.get("viewModel.view.popup");
    s12 && s12.reposition();
  }
  _selectResultClick(e9) {
    e9.preventDefault();
    const s12 = e9.currentTarget["data-result"];
    this.viewModel && this.viewModel.select(s12);
  }
  _getSourceName(e9, s12) {
    return s12 === te.ALL_INDEX ? this.messages.all : e9.name;
  }
};
e2([y(), e3("esri/widgets/Search/t9n/Search")], c9.prototype, "messages", void 0), e2([y()], c9.prototype, "showMoreResultsOpen", void 0), e2([y()], c9.prototype, "viewModel", void 0), e2([t3()], c9.prototype, "_showMoreResultsClick", null), e2([t3()], c9.prototype, "_selectResultClick", null), c9 = e2([a("esri.widgets.Search.SearchResultRenderer")], c9);
var d7 = c9;

// node_modules/@arcgis/core/widgets/Search.js
var I3 = /<[a-z/][\s\S]*>/i;
var w5 = class extends W {
  constructor(e9, t9) {
    super(e9, t9), this._activeMenuItemIndex = -1, this._handles = new t2(), this._inputNode = null, this._menuItemCount = 0, this._sourceMenuButtonNode = null, this._sourceListNode = null, this._suggestionListNode = null, this._searchResultRenderer = new d7(), this._locateFailed = null, this._container = null, this.activeMenu = "none", this.disabled = false, this.iconClass = i3.widgetIcon, this.messages = null, this.messagesCommon = null, this.viewModel = new te(), this._clearActiveMenu = () => {
      this.activeMenu = "none";
    }, this._removeActiveMenu = (e10) => {
      var _a;
      const t10 = e10.relatedTarget;
      t10 && ((_a = this._container) == null ? void 0 : _a.contains(t10)) || this._clearActiveMenu();
    }, this.addHandles([l2(() => this.searchTerm, (e10) => {
      (e10 && "warning" === this.activeMenu || !e10 && !this.get("viewModel.selectedSuggestion.location")) && this._clearActiveMenu();
    }), a2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.allSources;
    }, "change", () => this._watchSourceChanges()), l2(() => this.activeMenu, () => this._resetActiveMenuItemIndex(), h), l2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.defaultPopupTemplate;
    }, (e10) => {
      e10 && (e10.content = this._renderSearchResultsContent.bind(this));
    }, h)]);
  }
  destroy() {
    this._handles.destroy(), this._handles = null, this._cancelSuggest(), this._cancelSearch(), this._searchResultRenderer && (this._searchResultRenderer.viewModel = null, this._searchResultRenderer.destroy(), this._searchResultRenderer = null);
  }
  get displayedSearchTerm() {
    return `${this.viewModel.searchTerm}`.trim();
  }
  get inputId() {
    return this._buildId("input");
  }
  get suggestionsMenuId() {
    return this._buildId("suggest-menu");
  }
  get sourceMenuId() {
    return this._buildId("source-menu");
  }
  get sourceMenuButtonId() {
    return this._buildId("source-menu-button");
  }
  get activeSource() {
    return this.viewModel.activeSource;
  }
  get activeSourceIndex() {
    return this.viewModel.activeSourceIndex;
  }
  set activeSourceIndex(e9) {
    this.viewModel.activeSourceIndex = e9;
  }
  get allPlaceholder() {
    return this.viewModel.allPlaceholder;
  }
  set allPlaceholder(e9) {
    this.viewModel.allPlaceholder = e9;
  }
  get allSources() {
    return this.viewModel.allSources;
  }
  get autoNavigate() {
    return this.viewModel.autoNavigate;
  }
  set autoNavigate(e9) {
    this.viewModel.autoNavigate = e9;
  }
  get autoSelect() {
    return this.viewModel.autoSelect;
  }
  set autoSelect(e9) {
    this.viewModel.autoSelect = e9;
  }
  get defaultSources() {
    return this.viewModel.defaultSources;
  }
  get goToOverride() {
    return this.viewModel.goToOverride;
  }
  set goToOverride(e9) {
    this.viewModel.goToOverride = e9;
  }
  get includeDefaultSources() {
    return this.viewModel.includeDefaultSources;
  }
  set includeDefaultSources(e9) {
    this.viewModel.includeDefaultSources = e9;
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(e9) {
    this._overrideIfSome("label", e9);
  }
  get locationEnabled() {
    return this.viewModel.locationEnabled;
  }
  set locationEnabled(e9) {
    this.viewModel.locationEnabled = e9;
  }
  get maxResults() {
    return this.viewModel.maxResults;
  }
  set maxResults(e9) {
    this.viewModel.maxResults = e9;
  }
  get maxSuggestions() {
    return this.viewModel.maxSuggestions;
  }
  set maxSuggestions(e9) {
    this.viewModel.maxSuggestions = e9;
  }
  get minSuggestCharacters() {
    return this.viewModel.minSuggestCharacters;
  }
  set minSuggestCharacters(e9) {
    this.viewModel.minSuggestCharacters = e9;
  }
  get popupEnabled() {
    return this.viewModel.popupEnabled;
  }
  set popupEnabled(e9) {
    this.viewModel.popupEnabled = e9;
  }
  get popupTemplate() {
    return this.viewModel.popupTemplate;
  }
  set popupTemplate(e9) {
    this.viewModel.popupTemplate = e9;
  }
  get portal() {
    return this.viewModel.portal;
  }
  set portal(e9) {
    this.viewModel.portal = e9;
  }
  get resultGraphic() {
    return this.viewModel.resultGraphic;
  }
  set resultGraphic(e9) {
    this.viewModel.resultGraphic = e9;
  }
  get resultGraphicEnabled() {
    return this.viewModel.resultGraphicEnabled;
  }
  set resultGraphicEnabled(e9) {
    this.viewModel.resultGraphicEnabled = e9;
  }
  get results() {
    return this.viewModel.results;
  }
  get searchAllEnabled() {
    return this.viewModel.searchAllEnabled;
  }
  set searchAllEnabled(e9) {
    this.viewModel.searchAllEnabled = e9;
  }
  get searchTerm() {
    return this.viewModel.searchTerm;
  }
  set searchTerm(e9) {
    this.viewModel.searchTerm = e9;
  }
  get selectedResult() {
    return this.viewModel.selectedResult;
  }
  get sources() {
    return this.viewModel.sources;
  }
  set sources(e9) {
    this.viewModel.sources = e9;
  }
  get suggestions() {
    return this.viewModel.suggestions;
  }
  get suggestionsEnabled() {
    return this.viewModel.suggestionsEnabled;
  }
  set suggestionsEnabled(e9) {
    this.viewModel.suggestionsEnabled = e9;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e9) {
    this.viewModel.view = e9;
  }
  clear() {
    this.viewModel.clear();
  }
  focus() {
    var _a;
    (_a = this._inputNode) == null ? void 0 : _a.focus(), this.emit("search-focus");
  }
  blur() {
    var _a;
    (_a = this._inputNode) == null ? void 0 : _a.blur(), this.emit("search-blur");
  }
  search(e9) {
    this._clearActiveMenu(), this._cancelSuggest(), this._cancelSearch();
    const t9 = new AbortController(), { signal: s12 } = t9;
    return this._searchController = t9, this.viewModel.search(e9, { signal: s12 }).catch((e10) => {
      if (this._searchController === t9)
        return this._clearActiveMenu(), this._searchController = null, e10;
    }).then((e10) => {
      if (this._searchController === t9)
        return this.activeMenu = e10.numResults ? "none" : "warning", this._searchController = null, e10;
    });
  }
  suggest(e9) {
    this._cancelSuggest();
    const t9 = new AbortController(), { signal: s12 } = t9;
    return this._suggestController = t9, this.viewModel.suggest(e9, null, { signal: s12 }).then((e10) => {
      if (this._suggestController === t9)
        return this._suggestController = null, e10.numResults && this._openSuggestionMenu(), this._scrollToTopSuggestion(), e10;
    }).catch(() => {
      if (this._suggestController === t9)
        return this._suggestController = null, null;
    });
  }
  render() {
    const { state: e9 } = this.viewModel, t9 = { [i3.disabled]: "disabled" === e9, [i3.esriWidgetDisabled]: this.disabled };
    return n2("div", { class: this.classes(i3.base, t9) }, "loading" === e9 ? this.renderLoader() : this.renderContainer());
  }
  renderSubmitButton() {
    const { messages: e9, disabled: t9 } = this;
    return n2("button", { "aria-label": e9.searchButtonTitle, bind: this, disabled: t9, class: this.classes(i3.submitButton, i3.button), key: "esri-search__submit-button", onclick: this._handleSearchButtonClick, title: e9.searchButtonTitle, type: "button" }, n2("span", { "aria-hidden": "true", class: i3.searchIcon }));
  }
  renderWarningMenu() {
    return n2("div", { key: "esri-search__error-menu", class: this.classes(i3.menu, i3.warningMenu) }, n2("div", { class: i3.warningMenuBody }, this.renderWarning()));
  }
  renderSourceMenuButton() {
    const { messages: e9, activeMenu: t9, sourceMenuId: s12, sourceMenuButtonId: r3, disabled: n11 } = this, { activeSourceIndex: i8, allSources: o5 } = this.viewModel;
    return o5.length > 1 ? n2("button", { id: r3, key: "esri-search__source-menu-button", bind: this, disabled: n11, "aria-label": e9.searchIn, title: e9.searchIn, "aria-haspopup": "true", "aria-expanded": ("source" === t9).toString(), "aria-controls": s12, class: this.classes(i3.sourcesButton, i3.button), onclick: this._handleSourcesMenuToggleClick, onfocus: this._handleSourcesMenuToggleFocus, afterCreate: v4, "data-node-ref": "_sourceMenuButtonNode", type: "button" }, n2("span", { "aria-hidden": "true", class: i3.dropdownIcon }), n2("span", { "aria-hidden": "true", class: i3.dropupIcon }), n2("span", { class: i3.sourceName }, this._getSourceName(i8))) : null;
  }
  renderSourcesList() {
    const { allSources: e9, searchAllEnabled: t9 } = this.viewModel, { _activeMenuItemIndex: s12, activeMenu: r3, sourceMenuId: n11, sourceMenuButtonId: i8 } = this, o5 = "source" === r3 && s12 > -1 ? this._buildId("source-item", s12) : null;
    return e9.length > 1 ? n2("ul", { "aria-activedescendant": o5, "aria-labelledby": i8, id: n11, role: "menu", bind: this, afterCreate: v4, onkeydown: this._handleSourceMenuKeydown, onkeyup: this._handleSourceMenuKeyup, "data-node-ref": "_sourceListNode", class: i3.menuList, tabIndex: -1 }, t9 ? this.renderSource(te.ALL_INDEX) : null, e9.map((e10, t10) => this.renderSource(t10)).toArray()) : null;
  }
  renderSourcesMenu() {
    const { allSources: e9 } = this.viewModel;
    return e9.length > 1 ? n2("div", { key: "esri-search__source-menu", class: this.classes(i3.menu, i3.sourcesMenu) }, this.renderSourcesList()) : null;
  }
  renderLoader() {
    const { messages: e9, messagesCommon: t9, disabled: s12 } = this;
    return n2("div", { class: i3.loader, key: "base-loader", tabIndex: s12 ? -1 : null }, n2("span", { "aria-hidden": "true", class: i3.loaderAnimation }), n2("span", { class: i3.fallbackText }, e9.searchButtonTitle), n2("span", { class: i3.loaderText }, t9.loading));
  }
  renderContainer() {
    const { allSources: e9, state: t9 } = this.viewModel, { activeMenu: s12 } = this, r3 = { [i3.hasMultipleSources]: e9.length > 1, [i3.isLoading]: "loading" === t9, [i3.isSearching]: "searching" === t9, [i3.showWarning]: "warning" === s12, [i3.showSources]: "source" === s12, [i3.showSuggestions]: "suggestion" === s12 };
    return n2("div", { tabIndex: -1, afterCreate: (e10) => {
      this._container = e10, e10.addEventListener("focusout", this._removeActiveMenu);
    }, afterRemoved: (e10) => {
      e10.removeEventListener("focusout", this._removeActiveMenu);
    }, class: this.classes(r3, i3.container), key: "base-container" }, this.renderSourceMenuButton(), this.renderSourcesMenu(), this.renderInputContainer(), this.renderSubmitButton(), this.renderWarningMenu());
  }
  renderClearButton() {
    return this.searchTerm ? n2("button", { bind: this, disabled: this.disabled, class: this.classes(i3.clearButton, i3.button), key: "esri-search__clear-button", onclick: this._handleClearButtonClick, onfocus: this._clearActiveMenu, title: this.messages.clearButtonTitle, type: "button" }, n2("span", { "aria-hidden": "true", class: i3.clearIcon })) : null;
  }
  renderLocationGroup() {
    const { messages: e9, locationEnabled: t9, displayedSearchTerm: s12 } = this, r3 = t9 && !s12, n11 = "suggestion" === this.activeMenu && 0 === this._activeMenuItemIndex;
    return r3 ? n2("ul", { role: "group", key: "esri-search__suggestion-list-current-location", class: this.classes(i3.menuList, i3.suggestionList, i3.suggestionListCurrentLocation) }, n2("li", { bind: this, "data-current-location-item": true, onclick: this._handleUseCurrentLocationClick, id: this._buildId("suggestion-item", 0), "aria-selected": ("suggestion" === this.activeMenu && 0 === this._activeMenuItemIndex).toString(), role: "option", class: this.classes(i3.menuItem, n11 ? i3.menuItemFocus : null) }, n2("span", { "aria-hidden": "true", class: i3.locate }), " ", e9.useCurrentLocation)) : null;
  }
  renderInput() {
    const { activeMenu: e9, locationEnabled: t9, displayedSearchTerm: s12, messages: r3, suggestionsMenuId: n11, inputId: i8, _activeMenuItemIndex: o5, disabled: l6 } = this, { maxInputLength: u4, placeholder: a11, searchTerm: d8, suggestionCount: h5 } = this.viewModel, p8 = !(!(t9 && !s12) && !h5), m9 = "suggestion" === e9 && o5 > -1 ? this._buildId("suggestion-item", o5) : null;
    return n2("input", { "aria-activedescendant": m9, "aria-autocomplete": "list", "aria-expanded": (p8 && "suggestion" === e9).toString(), "aria-controls": p8 ? n11 : null, "aria-haspopup": "listbox", "aria-label": r3.searchButtonTitle, bind: this, disabled: l6, placeholder: a11, maxlength: u4, autocomplete: "off", type: "text", class: this.classes(i3.esriInput, i3.input), value: d8, id: i8, role: "combobox", onkeyup: this._handleInputKeyup, onclick: this._openSuggestionMenu, oninput: this._handleInputPaste, onpaste: this._handleInputPaste, afterCreate: v4, "data-node-ref": "_inputNode", onfocus: this.focus, onblur: this.blur, title: d8 ? "" : a11 });
  }
  renderForm() {
    return n2("form", { key: "esri-search__form", bind: this, disabled: this.disabled, class: i3.form, onsubmit: this._formSubmit, role: "search" }, this.renderInput());
  }
  renderSuggestList(e9) {
    const { sourceIndex: t9 } = e9, s12 = e9.results.length, r3 = e9.results;
    return s12 ? n2("ul", { role: "group", key: `esri-search__suggestion-list-${t9}`, class: this.classes(i3.menuList, i3.suggestionList) }, r3.map((e10) => this.renderSuggestion(e10, this._menuItemCount++))) : null;
  }
  renderSuggestionsGroup() {
    const { suggestions: e9 } = this.viewModel;
    return e9 ? e9.map((e10) => [this.renderSuggestionHeader(e10), this.renderSuggestList(e10)]) : null;
  }
  renderSuggestionsMenu() {
    const { displayedSearchTerm: e9, locationEnabled: t9, suggestionsMenuId: s12, inputId: r3 } = this, { suggestionCount: n11 } = this.viewModel, i8 = t9 && !e9 || n11;
    return this._menuItemCount = 0, i8 ? n2("div", { id: s12, key: "esri-search__suggestions-menu", class: this.classes(i3.menu, i3.suggestionsMenu), role: "listbox", "aria-labelledby": r3, bind: this, afterCreate: v4, "data-node-ref": "_suggestionListNode" }, this.renderLocationGroup(), this.renderSuggestionsGroup()) : null;
  }
  renderInputContainer() {
    return n2("div", { key: "esri-search__input-container", class: i3.inputContainer }, this.renderForm(), this.renderSuggestionsMenu(), this.renderClearButton());
  }
  renderSuggestionHeader(e9) {
    const { allSources: t9, activeSourceIndex: s12 } = this.viewModel, { sourceIndex: r3 } = e9, n11 = e9.results.length, i8 = t9.length > 1 && s12 === te.ALL_INDEX;
    return n11 && i8 ? n2("div", { key: `esri-search__suggestion-header-${r3}`, class: i3.menuHeader }, this._getSourceName(r3)) : null;
  }
  renderSuggestion(e9, t9) {
    const { _activeMenuItemIndex: s12, messages: r3 } = this, { searchTerm: n11 } = this.viewModel;
    if (n11) {
      const { text: i8 } = e9, o5 = i8 || r3.untitledResult, l6 = I3.test(o5), u4 = [];
      if (l6)
        u4.push(n2("div", { innerHTML: o5 }));
      else {
        const e10 = this._splitResult(o5, n11), t10 = n11.toLowerCase();
        e10.forEach((e11, s13) => {
          e11 && e11.length && (e11.toLowerCase() === t10 ? u4.push(n2("strong", { key: s13 }, e11)) : u4.push(e11));
        });
      }
      const a11 = "suggestion" === this.activeMenu && s12 === t9;
      return n2("li", { bind: this, id: this._buildId("suggestion-item", t9), "aria-selected": ("suggestion" === this.activeMenu && this._activeMenuItemIndex === t9).toString(), onclick: this._handleSuggestionClick, key: `esri-search__suggestion_${t9}`, "data-suggestion": e9, role: "option", class: this.classes(i3.menuItem, a11 ? i3.menuItemFocus : null) }, u4);
    }
  }
  renderSource(e9) {
    const { activeSourceIndex: t9, searchAllEnabled: s12 } = this.viewModel, r3 = { [i3.menuItemActive]: e9 === t9, [i3.menuItemFocus]: "source" === this.activeMenu && e9 === (s12 ? this._activeMenuItemIndex - 1 : this._activeMenuItemIndex) }, n11 = s12 ? e9 + 1 : e9;
    return n2("li", { bind: this, key: `esri-search__source-${e9}`, id: this._buildId("source-item", n11), "aria-checked": (e9 === t9).toString(), onclick: this._handleSourceClick, "data-source-index": e9, role: "menuitemradio", class: this.classes(i3.source, i3.menuItem, r3) }, this._getSourceName(e9));
  }
  renderNoResultsWarning(e9) {
    const { messages: t9 } = this, s12 = e9 ? s6(t9.noResultsFoundForValue, { value: `"${e9}"` }) : t9.noResultsFound;
    return n2("div", { key: "esri-search__no_results" }, n2("div", { class: i3.warningMenuHeader }, t9.noResults), n2("div", { class: i3.warningMenuText }, s12));
  }
  renderEmptySearchWarning() {
    const { messages: e9 } = this;
    return n2("div", { key: "esri-search__empty-search" }, n2("span", { "aria-hidden": "true", class: i3.noticeIcon }), n2("span", { class: i3.noValueText }, e9.emptyValue));
  }
  renderLocateWarning() {
    const { messages: e9 } = this;
    return n2("div", { key: "esri-search__locate-error" }, n2("span", { "aria-hidden": "true", class: i3.noticeIcon }), n2("span", { class: i3.noValueText }, e9.locateError));
  }
  renderWarning() {
    var _a;
    const { displayedSearchTerm: e9, _locateFailed: t9 } = this, { viewModel: s12 } = this;
    return t9 ? this.renderLocateWarning() : ((_a = s12.selectedSuggestion) == null ? void 0 : _a.location) || e9 ? this.renderNoResultsWarning(e9) : this.renderEmptySearchWarning();
  }
  _resetActiveMenuItemIndex() {
    this._activeMenuItemIndex = -1;
  }
  _buildId(e9, t9) {
    return `${this.id}-${e9}${void 0 === t9 ? "" : `-${t9}`}`;
  }
  _watchSourceChanges() {
    const { _handles: e9, viewModel: { allSources: t9 } } = this, s12 = "sources";
    e9.remove(s12), t9.forEach((t10) => e9.add(l2(() => t10.name, () => this.scheduleRender()), s12));
  }
  _handleSourcesMenuToggleFocus() {
    "source" !== this.activeMenu && this._clearActiveMenu();
  }
  _handleSourcesMenuToggleClick() {
    var _a;
    const e9 = "source" === this.activeMenu;
    this.activeMenu = e9 ? "none" : "source", this.renderNow(), "source" === this.activeMenu && ((_a = this._sourceListNode) == null ? void 0 : _a.focus());
  }
  _handleClearButtonClick() {
    this.viewModel.clear(), this._focus();
  }
  _handleSearchButtonClick() {
    this.search();
  }
  _handleSuggestionClick(e9) {
    const t9 = e9.currentTarget["data-suggestion"];
    t9 && (this._focus(), this.search(t9));
  }
  _handleUseCurrentLocationClick() {
    this._useCurrentLocation();
  }
  _useCurrentLocation() {
    this._focus("none"), this._cancelSuggest(), this._cancelSearch();
    const e9 = new AbortController(), { signal: t9 } = e9;
    this._searchController = e9, this.viewModel.searchNearby({ signal: t9 }).then((e10) => {
      this.activeMenu = e10.numResults ? "none" : "warning";
    }).catch(() => {
      this._locateFailed = true, this.activeMenu = "warning";
    }).then(() => {
      this._searchController = null;
    });
  }
  _handleSourceClick(e9) {
    this._setSourceFromMenuItem(e9.currentTarget);
  }
  _setSourceFromMenuItem(e9) {
    var _a;
    if (!e9)
      return;
    const t9 = e9["data-source-index"];
    this.viewModel.activeSourceIndex = t9, this._clearActiveMenu(), (_a = this._sourceMenuButtonNode) == null ? void 0 : _a.focus();
  }
  _cancelSuggest() {
    this._suggestController && (this._suggestController.abort(), this._suggestController = null);
  }
  _cancelSearch() {
    this._searchController && (this._searchController.abort(), this._searchController = null), this._locateFailed = false;
  }
  _handleInputKeyup(e9) {
    var _a;
    const s12 = i(e9);
    if (e9.ctrlKey || e9.metaKey || "Copy" === s12 || "ArrowLeft" === s12 || "ArrowRight" === s12 || "Shift" === s12)
      return;
    if ("Tab" === s12 || "Escape" === s12 || e9.shiftKey && "Tab" === s12)
      return this._cancelSuggest(), void ("Escape" === s12 && this._clearActiveMenu());
    const r3 = "Home" === s12 || "End" === s12 || "ArrowUp" === s12 || "ArrowDown" === s12;
    if ("Enter" === s12 && this._activeMenuItemIndex < 0)
      return void this._cancelSuggest();
    const n11 = (_a = this._suggestionListNode) == null ? void 0 : _a.getElementsByTagName("li");
    if (n11 == null ? void 0 : n11.length) {
      if ("suggestion" !== this.activeMenu && this._openSuggestionMenu(), r3)
        return e9.preventDefault(), this._cancelSuggest(), void this._handleItemNavigation(s12, n11, this._suggestionListNode);
      const t9 = n11[this._activeMenuItemIndex];
      if ("Enter" === s12 && t9) {
        const e10 = t9["data-suggestion"];
        return void (e10 ? (this._focus(), this.search(e10)) : t9["data-current-location-item"] && this._useCurrentLocation());
      }
    }
    this.viewModel.searchTerm && this.suggest();
  }
  _handleItemNavigation(e9, t9, s12) {
    const r3 = this._activeMenuItemIndex;
    "Home" === e9 && (this._activeMenuItemIndex = 0), "End" === e9 && (this._activeMenuItemIndex = t9.length - 1), "ArrowUp" === e9 && (this._activeMenuItemIndex = this._activeMenuItemIndex <= 0 ? t9.length - 1 : this._activeMenuItemIndex - 1), "ArrowDown" === e9 && (this._activeMenuItemIndex = this._activeMenuItemIndex === t9.length - 1 ? 0 : this._activeMenuItemIndex + 1), r3 !== this._activeMenuItemIndex && A(t9[this._activeMenuItemIndex], s12);
  }
  _scrollToTopSuggestion() {
    this._suggestionListNode && (this._suggestionListNode.scrollTop = 0);
  }
  _openSuggestionMenu() {
    this.activeMenu = "suggestion";
  }
  _handleInputPaste(e9) {
    const t9 = e9.target;
    this.viewModel.searchTerm !== t9.value && (this.viewModel.searchTerm = t9.value), this.viewModel.searchTerm && this.suggest();
  }
  _handleSourceMenuKeydown(e9) {
    const s12 = i(e9);
    if (k(s12)) {
      e9.preventDefault();
      const t9 = this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];
      this._setSourceFromMenuItem(t9);
    } else
      "ArrowUp" !== s12 && "ArrowDown" !== s12 && "End" !== s12 && "Home" !== s12 || e9.preventDefault();
  }
  _handleSourceMenuKeyup(e9) {
    var _a, _b;
    const s12 = i(e9), r3 = "ArrowUp" === s12 || "ArrowDown" === s12 || "End" === s12 || "Home" === s12;
    if (r3 && e9.preventDefault(), "Escape" === s12)
      return this._clearActiveMenu(), void ((_a = this._sourceMenuButtonNode) == null ? void 0 : _a.focus());
    const n11 = (_b = this._sourceListNode) == null ? void 0 : _b.getElementsByTagName("li");
    return n11 && 0 !== n11.length && r3 ? ("source" !== this.activeMenu && (this.activeMenu = "source"), void this._handleItemNavigation(s12, n11, this._sourceListNode.parentElement)) : void 0;
  }
  _focus(e9) {
    this.focus(), e9 && (this.activeMenu = e9);
  }
  _formSubmit(e9) {
    e9.preventDefault(), -1 === this._activeMenuItemIndex && this.search();
  }
  _getSourceName(e9) {
    const { messages: t9 } = this, s12 = this.viewModel, { allSources: r3 } = s12, n11 = r3.getItemAt(e9);
    return e9 === te.ALL_INDEX ? t9.all : n11 && n11.name || t9.untitledSource;
  }
  _splitResult(e9, t9) {
    const s12 = o(t9);
    return e9.replace(new RegExp(`(^|)(${s12})(|$)`, "ig"), "$1|$2|$3").split("|");
  }
  _renderSearchResultsContent() {
    return this._searchResultRenderer.showMoreResultsOpen = false, this._searchResultRenderer.viewModel = this.viewModel, this._searchResultRenderer;
  }
};
e2([y()], w5.prototype, "_activeMenuItemIndex", void 0), e2([y()], w5.prototype, "displayedSearchTerm", null), e2([y({ readOnly: true })], w5.prototype, "inputId", null), e2([y({ readOnly: true })], w5.prototype, "suggestionsMenuId", null), e2([y({ readOnly: true })], w5.prototype, "sourceMenuId", null), e2([y({ readOnly: true })], w5.prototype, "sourceMenuButtonId", null), e2([y()], w5.prototype, "activeMenu", void 0), e2([y({ readOnly: true })], w5.prototype, "activeSource", null), e2([y()], w5.prototype, "activeSourceIndex", null), e2([y()], w5.prototype, "allPlaceholder", null), e2([y({ readOnly: true })], w5.prototype, "allSources", null), e2([y()], w5.prototype, "autoNavigate", null), e2([y()], w5.prototype, "autoSelect", null), e2([y({ readOnly: true })], w5.prototype, "defaultSources", null), e2([y()], w5.prototype, "disabled", void 0), e2([y()], w5.prototype, "goToOverride", null), e2([y()], w5.prototype, "iconClass", void 0), e2([y()], w5.prototype, "includeDefaultSources", null), e2([y()], w5.prototype, "label", null), e2([y()], w5.prototype, "locationEnabled", null), e2([y()], w5.prototype, "maxResults", null), e2([y()], w5.prototype, "maxSuggestions", null), e2([y(), e3("esri/widgets/Search/t9n/Search")], w5.prototype, "messages", void 0), e2([y(), e3("esri/t9n/common")], w5.prototype, "messagesCommon", void 0), e2([y()], w5.prototype, "minSuggestCharacters", null), e2([y()], w5.prototype, "popupEnabled", null), e2([y()], w5.prototype, "popupTemplate", null), e2([y()], w5.prototype, "portal", null), e2([y()], w5.prototype, "resultGraphic", null), e2([y()], w5.prototype, "resultGraphicEnabled", null), e2([y({ readOnly: true })], w5.prototype, "results", null), e2([y()], w5.prototype, "searchAllEnabled", null), e2([y()], w5.prototype, "searchTerm", null), e2([y({ readOnly: true })], w5.prototype, "selectedResult", null), e2([y()], w5.prototype, "sources", null), e2([y({ readOnly: true })], w5.prototype, "suggestions", null), e2([y()], w5.prototype, "suggestionsEnabled", null), e2([y()], w5.prototype, "view", null), e2([e4(["search-complete", "search-clear", "search-start", "select-result", "suggest-start", "suggest-complete"]), y({ type: te })], w5.prototype, "viewModel", void 0), w5 = e2([a("esri.widgets.Search")], w5);
var b5 = w5;
export {
  b5 as default
};
//# sourceMappingURL=@arcgis_core_widgets_Search__js.js.map
