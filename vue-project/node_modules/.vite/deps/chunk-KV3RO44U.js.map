{
  "version": 3,
  "sources": ["../../@arcgis/core/webdoc/support/saveUtils.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\r\n*/\r\nimport{result as r}from\"../../core/asyncUtils.js\";import e from\"../../core/Error.js\";import{isSome as o}from\"../../core/maybe.js\";import{eachAlways as t,throwIfAborted as s}from\"../../core/promiseUtils.js\";import{generateUUID as c}from\"../../core/uuid.js\";import{getSiblingOfSameTypeI as p}from\"../../portal/support/resourceUtils.js\";async function a(r,o,a){if(!o||!o.resources)return;const h=o.portalItem===r.portalItem?new Set(r.paths):new Set;r.paths.length=0,r.portalItem=o.portalItem;const i=new Set(o.resources.toKeep.map((r=>r.resource.path))),m=new Set,f=[];i.forEach((e=>{h.delete(e),r.paths.push(e)}));for(const e of o.resources.toUpdate)if(h.delete(e.resource.path),i.has(e.resource.path)||m.has(e.resource.path)){const{resource:o,content:t,finish:s,error:u}=e,h=p(o,c());r.paths.push(h.path),f.push(n({resource:h,content:t,compress:e.compress,finish:s,error:u},a))}else r.paths.push(e.resource.path),f.push(u(e,a)),m.add(e.resource.path);for(const e of o.resources.toAdd)f.push(n(e,a)),r.paths.push(e.resource.path);if(h.forEach((r=>{if(o.portalItem){const e=o.portalItem.resourceFromPath(r);f.push(e.portalItem.removeResource(e).catch((()=>{})))}})),0===f.length)return;const l=await t(f);s(a);const d=l.filter((r=>\"error\"in r)).map((r=>r.error));if(d.length>0)throw new e(\"save:resources\",\"Failed to save one or more resources\",{errors:d})}async function n(e,t){const s={...o(t)?t:{},compress:e.compress},c=await r(e.resource.portalItem.addResource(e.resource,e.content,s));if(!0!==c.ok)throw e.error?.(c.error),c.error;e.finish?.(e.resource)}async function u(e,o){const t=await r(e.resource.update(e.content,o));if(!0!==t.ok)throw e.error?.(t.error),t.error;e.finish?.(e.resource)}export{a as saveResources};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;AAI8U,eAAe,EAAEA,IAAE,GAAEC,IAAE;AAAC,MAAG,CAAC,KAAG,CAAC,EAAE;AAAU;AAAO,QAAM,IAAE,EAAE,eAAaD,GAAE,aAAW,IAAI,IAAIA,GAAE,KAAK,IAAE,oBAAI;AAAI,EAAAA,GAAE,MAAM,SAAO,GAAEA,GAAE,aAAW,EAAE;AAAW,QAAM,IAAE,IAAI,IAAI,EAAE,UAAU,OAAO,IAAK,CAAAA,OAAGA,GAAE,SAAS,IAAK,CAAC,GAAE,IAAE,oBAAI,OAAIE,KAAE,CAAC;AAAE,IAAE,QAAS,OAAG;AAAC,MAAE,OAAO,CAAC,GAAEF,GAAE,MAAM,KAAK,CAAC;AAAA,EAAC,CAAE;AAAE,aAAU,KAAK,EAAE,UAAU;AAAS,QAAG,EAAE,OAAO,EAAE,SAAS,IAAI,GAAE,EAAE,IAAI,EAAE,SAAS,IAAI,KAAG,EAAE,IAAI,EAAE,SAAS,IAAI,GAAE;AAAC,YAAK,EAAC,UAASG,IAAE,SAAQ,GAAE,QAAOC,IAAE,OAAMC,GAAC,IAAE,GAAEC,KAAE,EAAEH,IAAE,EAAE,CAAC;AAAE,MAAAH,GAAE,MAAM,KAAKM,GAAE,IAAI,GAAEJ,GAAE,KAAKK,GAAE,EAAC,UAASD,IAAE,SAAQ,GAAE,UAAS,EAAE,UAAS,QAAOF,IAAE,OAAMC,GAAC,GAAEJ,EAAC,CAAC;AAAA,IAAC;AAAM,MAAAD,GAAE,MAAM,KAAK,EAAE,SAAS,IAAI,GAAEE,GAAE,KAAK,EAAE,GAAED,EAAC,CAAC,GAAE,EAAE,IAAI,EAAE,SAAS,IAAI;AAAE,aAAU,KAAK,EAAE,UAAU;AAAM,IAAAC,GAAE,KAAKK,GAAE,GAAEN,EAAC,CAAC,GAAED,GAAE,MAAM,KAAK,EAAE,SAAS,IAAI;AAAE,MAAG,EAAE,QAAS,CAAAA,OAAG;AAAC,QAAG,EAAE,YAAW;AAAC,YAAM,IAAE,EAAE,WAAW,iBAAiBA,EAAC;AAAE,MAAAE,GAAE,KAAK,EAAE,WAAW,eAAe,CAAC,EAAE,MAAO,MAAI;AAAA,MAAC,CAAE,CAAC;AAAA,IAAC;AAAA,EAAC,CAAE,GAAE,MAAIA,GAAE;AAAO;AAAO,QAAM,IAAE,MAAM,EAAEA,EAAC;AAAE,IAAED,EAAC;AAAE,QAAM,IAAE,EAAE,OAAQ,CAAAD,OAAG,WAAUA,EAAE,EAAE,IAAK,CAAAA,OAAGA,GAAE,KAAM;AAAE,MAAG,EAAE,SAAO;AAAE,UAAM,IAAI,EAAE,kBAAiB,wCAAuC,EAAC,QAAO,EAAC,CAAC;AAAC;AAAC,eAAeO,GAAE,GAAE,GAAE;AAJ/1C;AAIg2C,QAAMH,KAAE,EAAC,GAAG,EAAE,CAAC,IAAE,IAAE,CAAC,GAAE,UAAS,EAAE,SAAQ,GAAE,IAAE,MAAM,EAAE,EAAE,SAAS,WAAW,YAAY,EAAE,UAAS,EAAE,SAAQA,EAAC,CAAC;AAAE,MAAG,SAAK,EAAE;AAAG,WAAM,OAAE,UAAF,2BAAU,EAAE,QAAO,EAAE;AAAM,UAAE,WAAF,2BAAW,EAAE;AAAS;AAAC,eAAe,EAAE,GAAE,GAAE;AAJ1iD;AAI2iD,QAAM,IAAE,MAAM,EAAE,EAAE,SAAS,OAAO,EAAE,SAAQ,CAAC,CAAC;AAAE,MAAG,SAAK,EAAE;AAAG,WAAM,OAAE,UAAF,2BAAU,EAAE,QAAO,EAAE;AAAM,UAAE,WAAF,2BAAW,EAAE;AAAS;",
  "names": ["r", "a", "f", "o", "s", "u", "h", "n"]
}
