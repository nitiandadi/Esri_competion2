import {
  s,
  s2,
  s3
} from "./chunk-YVZY5LDV.js";
import {
  N,
  r,
  t
} from "./chunk-HVCAHUYB.js";

// node_modules/@arcgis/core/portal/support/urlUtils.js
var e = /^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i;
var s4 = { devext: { customBaseUrl: "mapsdevext.arcgis.com", portalHostname: "devext.arcgis.com" }, qaext: { customBaseUrl: "mapsqa.arcgis.com", portalHostname: "qaext.arcgis.com" }, www: { customBaseUrl: "maps.arcgis.com", portalHostname: "www.arcgis.com" } };
function a(a3) {
  const t3 = a3 == null ? void 0 : a3.match(e);
  if (!t3)
    return null;
  const [, r2, o, l2] = t3;
  if (!r2)
    return null;
  let c2 = null, m2 = null, n = null;
  const { devext: u2, qaext: i, www: p2 } = s4;
  if (o)
    if (c2 = r2, l2)
      switch (l2.toLowerCase()) {
        case "devext":
          ({ customBaseUrl: m2, portalHostname: n } = u2);
          break;
        case "qa":
          ({ customBaseUrl: m2, portalHostname: n } = i);
          break;
        default:
          return null;
      }
    else
      ({ customBaseUrl: m2, portalHostname: n } = p2);
  else
    switch (r2.toLowerCase()) {
      case "devext":
        ({ customBaseUrl: m2, portalHostname: n } = u2);
        break;
      case "qaext":
        ({ customBaseUrl: m2, portalHostname: n } = i);
        break;
      case "www":
        ({ customBaseUrl: m2, portalHostname: n } = p2);
        break;
      default:
        return null;
    }
  return { customBaseUrl: m2, isPortal: false, portalHostname: n, urlKey: c2 };
}
function t2(e2) {
  return /\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e2);
}

// node_modules/@arcgis/core/core/urlUtils.js
var u = s2.getLogger("esri.core.urlUtils");
var l = s.request;
var c = "esri/config: esriConfig.request.proxyUrl is not set.";
var f = /^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i;
var a2 = /^\s*http:/i;
var p = /^\s*https:/i;
var h = /^\s*file:/i;
var d = /:\d+$/;
var m = /^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;
var g = new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$");
var y = new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");
var $ = class {
  constructor(t3 = "") {
    this.uri = t3, this.scheme = null, this.authority = null, this.path = null, this.query = null, this.fragment = null, this.user = null, this.password = null, this.host = null, this.port = null;
    let n = N(this.uri.match(g));
    this.scheme = n[2] || (n[1] ? "" : null), this.authority = n[4] || (n[3] ? "" : null), this.path = n[5], this.query = n[7] || (n[6] ? "" : null), this.fragment = n[9] || (n[8] ? "" : null), null != this.authority && (n = N(this.authority.match(y)), this.user = n[3] || null, this.password = n[4] || null, this.host = n[6] || n[7], this.port = n[9] || null);
  }
  toString() {
    return this.uri;
  }
};
var x = {};
var w = new $(s.applicationUrl);
var O = w;
var U = R();
var b = U;
var C = () => O;
var q = () => b;
function R() {
  const t3 = N(O.path), n = t3.substring(0, t3.lastIndexOf(t3.split("/")[t3.split("/").length - 1]));
  return `${`${O.scheme}://${O.host}${null != O.port ? `:${O.port}` : ""}`}${n}`;
}
function L(t3) {
  if (!t3)
    return null;
  const n = { path: null, query: null }, e2 = new $(t3), r2 = t3.indexOf("?");
  return null === e2.query ? n.path = t3 : (n.path = t3.substring(0, r2), n.query = v(e2.query)), e2.fragment && (n.hash = e2.fragment, null === e2.query && (n.path = n.path.substring(0, n.path.length - (e2.fragment.length + 1)))), n;
}
function v(t3) {
  const n = t3.split("&"), e2 = {};
  for (const r2 of n) {
    if (!r2)
      continue;
    const t4 = r2.indexOf("=");
    let n2, o;
    t4 < 0 ? (n2 = decodeURIComponent(r2), o = "") : (n2 = decodeURIComponent(r2.slice(0, t4)), o = decodeURIComponent(r2.slice(t4 + 1)));
    let i = e2[n2];
    "string" == typeof i && (i = e2[n2] = [i]), Array.isArray(i) ? i.push(o) : e2[n2] = o;
  }
  return e2;
}
function I(t3) {
  return t3 && "object" == typeof t3 && "toJSON" in t3 && "function" == typeof t3.toJSON;
}
function A(t3, n) {
  return t3 ? n && "function" == typeof n ? Object.keys(t3).map((e2) => encodeURIComponent(e2) + "=" + encodeURIComponent(n(e2, t3[e2]))).join("&") : Object.keys(t3).map((e2) => {
    const r2 = t3[e2];
    if (null == r2)
      return "";
    const o = encodeURIComponent(e2) + "=", i = n && n[e2];
    return i ? o + encodeURIComponent(i(r2)) : Array.isArray(r2) ? r2.map((t4) => I(t4) ? o + encodeURIComponent(JSON.stringify(t4)) : o + encodeURIComponent(t4)).join("&") : I(r2) ? o + encodeURIComponent(JSON.stringify(r2)) : o + encodeURIComponent(r2);
  }).filter((t4) => t4).join("&") : "";
}
function S(t3 = false) {
  let e2, r2 = l.proxyUrl;
  if ("string" == typeof t3) {
    e2 = mt(t3);
    const n = J(t3);
    n && (r2 = n.proxyUrl);
  } else
    e2 = !!t3;
  if (!r2)
    throw u.warn(c), new s3("urlutils:proxy-not-set", c);
  e2 && Ot() && (r2 = xt(r2));
  return L(r2);
}
function B(t3) {
  const n = J(t3);
  let e2, r2;
  if (n) {
    const t4 = k(n.proxyUrl);
    e2 = t4.path, r2 = t4.query ? v(t4.query) : null;
  }
  if (e2) {
    const n2 = L(t3);
    t3 = e2 + "?" + n2.path;
    const o = A({ ...r2, ...n2.query });
    o && (t3 = `${t3}?${o}`);
  }
  return t3;
}
var P = { path: "", query: "" };
function k(t3) {
  const n = t3.indexOf("?");
  return -1 !== n ? (P.path = t3.slice(0, n), P.query = t3.slice(n + 1)) : (P.path = t3, P.query = null), P;
}
function E(t3) {
  return t3 = (t3 = Ut(t3 = Rt(t3 = k(t3).path), true)).toLowerCase();
}
function H(t3) {
  const n = { proxyUrl: t3.proxyUrl, urlPrefix: E(t3.urlPrefix) }, e2 = l.proxyRules, r2 = n.urlPrefix;
  let o = e2.length;
  for (let i = 0; i < e2.length; i++) {
    const t4 = e2[i].urlPrefix;
    if (0 === r2.indexOf(t4)) {
      if (r2.length === t4.length)
        return -1;
      o = i;
      break;
    }
    0 === t4.indexOf(r2) && (o = i + 1);
  }
  return e2.splice(o, 0, n), o;
}
function J(t3) {
  const n = l.proxyRules, e2 = E(t3);
  for (let r2 = 0; r2 < n.length; r2++)
    if (0 === e2.indexOf(n[r2].urlPrefix))
      return n[r2];
}
function N2(t3, n) {
  if (!t3 || !n)
    return false;
  t3 = z(t3), n = z(n);
  const e2 = a(t3), r2 = a(n);
  return r(e2) && r(r2) ? e2.portalHostname === r2.portalHostname : !r(e2) && !r(r2) && M(t3, n, true);
}
function T(t3, n) {
  if (!t3 || !n)
    return false;
  t3 = z(t3), n = z(n);
  const e2 = a(t3), r2 = a(n);
  return !(!r(e2) || !r(r2)) && e2.portalHostname === r2.portalHostname;
}
function W(t3, n) {
  return t3 = z(t3), n = z(n), Ut(t3) === Ut(n);
}
function z(t3) {
  const n = (t3 = K(t3)).indexOf("/sharing");
  return n > 0 ? t3.substring(0, n) : t3.replace(/\/+$/, "");
}
function D(t3) {
  const n = (n2) => null == n2 || n2 instanceof RegExp && n2.test(t3) || "string" == typeof n2 && t3.startsWith(n2), e2 = l.interceptors;
  if (e2) {
    for (const r2 of e2)
      if (Array.isArray(r2.urls)) {
        if (r2.urls.some(n))
          return r2;
      } else if (n(r2.urls))
        return r2;
  }
  return null;
}
function M(t3, n, e2 = false) {
  if (!t3 || !n)
    return false;
  const r2 = St(t3), o = St(n);
  return !(!e2 && r2.scheme !== o.scheme) && (null != r2.host && null != o.host && (r2.host.toLowerCase() === o.host.toLowerCase() && r2.port === o.port));
}
function Q(t3) {
  if ("string" == typeof t3) {
    if (!Y(t3))
      return true;
    t3 = St(t3);
  }
  if (M(t3, O))
    return true;
  const n = l.trustedServers || [];
  for (let e2 = 0; e2 < n.length; e2++) {
    const r2 = _(n[e2]);
    for (let n2 = 0; n2 < r2.length; n2++)
      if (M(t3, r2[n2]))
        return true;
  }
  return false;
}
function _(t3) {
  return x[t3] || (dt(t3) || ht(t3) ? x[t3] = [new $(F(t3))] : x[t3] = [new $(`http://${t3}`), new $(`https://${t3}`)]), x[t3];
}
function F(t3, n = b, e2) {
  return ht(t3) ? e2 && e2.preserveProtocolRelative ? t3 : "http" === O.scheme && O.authority === X(t3).slice(2) ? `http:${t3}` : `https:${t3}` : dt(t3) ? t3 : N(V("/" === t3[0] ? bt(n) : n, t3));
}
function G(t3, n = b, e2) {
  if (null == t3 || !Y(t3))
    return t3;
  const r2 = K(t3), o = r2.toLowerCase(), i = K(n).toLowerCase().replace(/\/+$/, ""), s5 = e2 ? K(e2).toLowerCase().replace(/\/+$/, "") : null;
  if (s5 && 0 !== i.indexOf(s5))
    return t3;
  const u2 = (t4, n2, e3) => -1 === (e3 = t4.indexOf(n2, e3)) ? t4.length : e3;
  let l2 = u2(o, "/", o.indexOf("//") + 2), c2 = -1;
  for (; o.slice(0, l2 + 1) === i.slice(0, l2) + "/" && (c2 = l2 + 1, l2 !== o.length); )
    l2 = u2(o, "/", l2 + 1);
  if (-1 === c2)
    return t3;
  if (s5 && c2 < s5.length)
    return t3;
  t3 = r2.slice(c2);
  const f2 = i.slice(c2 - 1).replace(/[^/]+/g, "").length;
  if (f2 > 0)
    for (let a3 = 0; a3 < f2; a3++)
      t3 = `../${t3}`;
  else
    t3 = `./${t3}`;
  return t3;
}
function K(t3) {
  return t3 = It(t3 = vt(t3 = Lt(t3 = F(t3 = t3.trim()))));
}
function V(...t3) {
  const n = t3.filter(r);
  if (!n || !n.length)
    return;
  const e2 = [];
  if (Y(n[0])) {
    const t4 = n[0], r3 = t4.indexOf("//");
    -1 !== r3 && (e2.push(t4.slice(0, r3 + 1)), yt(n[0]) && (e2[0] += "/"), n[0] = t4.slice(r3 + 2));
  } else
    "/" === n[0][0] && e2.push("");
  const r2 = n.reduce((t4, n2) => n2 ? t4.concat(n2.split("/")) : t4, []);
  for (let o = 0; o < r2.length; o++) {
    const t4 = r2[o];
    ".." === t4 && e2.length > 0 && ".." !== e2[e2.length - 1] ? e2.pop() : (!t4 && o === r2.length - 1 || t4 && ("." !== t4 || 0 === e2.length)) && e2.push(t4);
  }
  return e2.join("/");
}
function X(t3, n = false) {
  if (null == t3 || Z(t3) || tt(t3))
    return null;
  let e2 = t3.indexOf("://");
  if (-1 === e2 && ht(t3))
    e2 = 2;
  else {
    if (-1 === e2)
      return null;
    e2 += 3;
  }
  const r2 = t3.indexOf("/", e2);
  return -1 !== r2 && (t3 = t3.slice(0, r2)), n && (t3 = Ut(t3, true)), t3;
}
function Y(t3) {
  return ht(t3) || dt(t3);
}
function Z(t3) {
  return null != t3 && "blob:" === t3.slice(0, 5);
}
function tt(t3) {
  return null != t3 && "data:" === t3.slice(0, 5);
}
function nt(t3) {
  const n = ot(t3);
  if (!n || !n.isBase64)
    return null;
  const e2 = atob(n.data), r2 = new Uint8Array(e2.length);
  for (let o = 0; o < e2.length; o++)
    r2[o] = e2.charCodeAt(o);
  return r2.buffer;
}
function et(t3) {
  return btoa(String.fromCharCode.apply(null, t3)).replace(/\+/g, "-").replace(/\//g, "_").replace(/=+$/, "");
}
var rt = /^data:(.*?)(;base64)?,(.*)$/;
function ot(t3) {
  const n = t3.match(rt);
  if (!n)
    return null;
  const [, e2, r2, o] = n;
  return { mediaType: e2, isBase64: !!r2, data: o };
}
function it(t3) {
  return t3.isBase64 ? `data:${t3.mediaType};base64,${t3.data}` : `data:${t3.mediaType},${t3.data}`;
}
function st(t3) {
  const n = nt(t3);
  if (!n)
    return null;
  const e2 = ot(t3);
  return new Blob([n], { type: e2.mediaType });
}
function lt(t3, n) {
  ft(t3, n) || pt(t3, n);
}
function ft(t3, n) {
  if (!t3)
    return false;
  const e2 = document.createElement("a");
  if (!("download" in e2))
    return false;
  const r2 = URL.createObjectURL(t3);
  return e2.download = n, e2.href = r2, e2.style.display = "none", document.body.appendChild(e2), e2.click(), document.body.removeChild(e2), URL.revokeObjectURL(r2), true;
}
function pt(t3, n) {
  return !!window.navigator.msSaveOrOpenBlob && window.navigator.msSaveOrOpenBlob(t3, n);
}
function ht(t3) {
  return null != t3 && "/" === t3[0] && "/" === t3[1];
}
function dt(t3) {
  return null != t3 && f.test(t3);
}
function mt(t3) {
  return null != t3 && p.test(t3) || "https" === O.scheme && ht(t3);
}
function gt(t3) {
  return null != t3 && a2.test(t3) || "http" === O.scheme && ht(t3);
}
function yt(t3) {
  return null != t3 && h.test(t3);
}
function xt(t3) {
  return ht(t3) ? `https:${t3}` : t3.replace(a2, "https:");
}
function wt() {
  return "http" === O.scheme;
}
function Ot() {
  return "https" === O.scheme;
}
function Ut(t3, n = false) {
  return ht(t3) ? t3.slice(2) : (t3 = t3.replace(f, ""), n && t3.length > 1 && "/" === t3[0] && "/" === t3[1] && (t3 = t3.slice(2)), t3);
}
function bt(t3) {
  const n = t3.indexOf("//"), e2 = t3.indexOf("/", n + 2);
  return -1 === e2 ? t3 : t3.slice(0, e2);
}
function Ct(t3) {
  let n = 0;
  if (Y(t3)) {
    const e3 = t3.indexOf("//");
    -1 !== e3 && (n = e3 + 2);
  }
  const e2 = t3.lastIndexOf("/");
  return e2 < n ? t3 : t3.slice(0, e2 + 1);
}
function qt(t3, n) {
  if (!t3)
    return "";
  const e2 = L(t3).path.replace(/\/+$/, ""), r2 = e2.substring(e2.lastIndexOf("/") + 1);
  if (!(n == null ? void 0 : n.length))
    return r2;
  const o = new RegExp(`.(${n.join("|")})$`, "ig");
  return r2.replace(o, "");
}
function Rt(t3) {
  return t3 && "/" === t3[t3.length - 1] ? t3 : `${t3}/`;
}
function jt(t3) {
  return t3.replace(/\/+$/, "");
}
function Lt(t3) {
  if (/^https?:\/\//i.test(t3)) {
    const n = k(t3);
    t3 = (t3 = n.path.replace(/\/{2,}/g, "/")).replace("/", "//"), n.query && (t3 += `?${n.query}`);
  }
  return t3;
}
function vt(t3) {
  return t3.replace(/^(https?:\/\/)(arcgis\.com)/i, "$1www.$2");
}
function It(t3) {
  const n = l.httpsDomains;
  if (!gt(t3))
    return t3;
  const e2 = t3.indexOf("/", 7);
  let r2;
  if (r2 = -1 === e2 ? t3 : t3.slice(0, e2), r2 = r2.toLowerCase().slice(7), d.test(r2)) {
    if (!r2.endsWith(":80"))
      return t3;
    r2 = r2.slice(0, -3), t3 = t3.replace(":80", "");
  }
  return wt() && r2 === O.authority && !m.test(t3) || (Ot() && r2 === O.authority || n && n.some((t4) => r2 === t4 || r2.endsWith(`.${t4}`)) || Ot() && !J(t3)) && (t3 = xt(t3)), t3;
}
function At(t3, n, e2) {
  if (!(n && e2 && t3 && Y(t3)))
    return t3;
  const r2 = t3.indexOf("//"), o = t3.indexOf("/", r2 + 2), i = t3.indexOf(":", r2 + 2), s5 = Math.min(o < 0 ? t3.length : o, i < 0 ? t3.length : i);
  if (t3.slice(r2 + 2, s5).toLowerCase() !== n.toLowerCase())
    return t3;
  return `${t3.slice(0, r2 + 2)}${e2}${t3.slice(s5)}`;
}
function St(t3) {
  return "string" == typeof t3 ? new $(F(t3)) : (t3.scheme || (t3.scheme = O.scheme), t3);
}
function Bt(t3) {
  return Wt.test(t3);
}
function Pt(t3, n) {
  const e2 = L(t3), r2 = Object.keys(e2.query || {});
  return r2.length > 0 && n && n.warn("removeQueryParameters()", `Url query parameters are not supported, the following parameters have been removed: ${r2.join(", ")}.`), e2.path;
}
function kt(t3, n, e2) {
  const r2 = L(t3), o = r2.query || {};
  return o[n] = String(e2), `${r2.path}?${A(o)}`;
}
function Et(t3, n) {
  const e2 = L(t3), r2 = e2.query || {};
  for (const i in n)
    r2[i] = n[i];
  const o = A(r2);
  return o ? `${e2.path}?${o}` : e2.path;
}
function Jt(t3) {
  if (t(t3))
    return null;
  const n = t3.match(Tt);
  return n ? n[2] : null;
}
function Nt(t3) {
  if (t(t3))
    return null;
  const n = t3.match(Tt);
  return n ? { path: n[1], extension: n[2] } : { path: t3, extension: null };
}
var Tt = /([^.]*)\.([^\/]*)$/;
var Wt = /(^data:image\/svg|\.svg$)/i;

export {
  a,
  t2 as t,
  $,
  C,
  q,
  L,
  v,
  A,
  S,
  B,
  H,
  J,
  N2 as N,
  T,
  W,
  D,
  M,
  Q,
  F,
  G,
  K,
  V,
  X,
  Y,
  Z,
  tt,
  nt,
  et,
  ot,
  it,
  st,
  lt,
  ht,
  mt,
  xt,
  Ct,
  qt,
  jt,
  At,
  Bt,
  Pt,
  kt,
  Et,
  Jt,
  Nt
};
//# sourceMappingURL=chunk-6XDV3BWZ.js.map
