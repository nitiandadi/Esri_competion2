import {
  C,
  T
} from "./chunk-YHZVWABO.js";
import {
  r,
  t
} from "./chunk-WHB7G7RI.js";

// node_modules/@arcgis/core/views/layers/support/popupUtils.js
async function d(l, d2 = l.popupTemplate) {
  var _a, _b;
  if (t(d2))
    return [];
  const s2 = await d2.getRequiredFields(l.fieldsIndex), { lastEditInfoEnabled: i } = d2, { objectIdField: n, typeIdField: u, globalIdField: a, relationships: o } = l;
  if (s2.includes("*"))
    return ["*"];
  const r2 = i ? await C(l) : [], f = T(l.fieldsIndex, [...s2, ...r2]);
  return u && f.push(u), f && n && ((_a = l.fieldsIndex) == null ? void 0 : _a.has(n)) && !f.includes(n) && f.push(n), f && a && ((_b = l.fieldsIndex) == null ? void 0 : _b.has(a)) && !f.includes(a) && f.push(a), o && o.forEach((e) => {
    var _a2;
    const { keyField: p } = e;
    f && p && ((_a2 = l.fieldsIndex) == null ? void 0 : _a2.has(p)) && !f.includes(p) && f.push(p);
  }), f;
}
function s(e, p) {
  return e.popupTemplate ? e.popupTemplate : r(p) && p.defaultPopupTemplateEnabled && r(e.defaultPopupTemplate) ? e.defaultPopupTemplate : null;
}

export {
  d,
  s
};
//# sourceMappingURL=chunk-5U6MVA3N.js.map
