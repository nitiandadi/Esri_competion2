{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/support/arcgisLayerUrl.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\r\n*/\r\nimport{isNone as e,isSome as r}from\"../../core/maybe.js\";import{urlToObject as t,removeTrailingSlash as s,removeQueryParameters as n,join as l,Url as u,makeAbsolute as i}from\"../../core/urlUtils.js\";import{w as o}from\"../../chunks/persistableUrlUtils.js\";const c={mapserver:\"MapServer\",imageserver:\"ImageServer\",featureserver:\"FeatureServer\",sceneserver:\"SceneServer\",streamserver:\"StreamServer\",vectortileserver:\"VectorTileServer\"},a=Object.values(c),f=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/rest\\\\/services\\\\/(.+?)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),v=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/([^\\\\/\\\\n]+)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),p=/(.*?)\\/(?:layers\\/)?(\\d+)\\/?$/i;function m(e){return!!f.test(e)}function d(r){if(e(r))return null;const s=t(r),n=s.path.match(f)||s.path.match(v);if(!n)return null;const[,l,u,i,o]=n,a=u.indexOf(\"/\");return{title:w(-1!==a?u.slice(a+1):u),serverType:c[i.toLowerCase()],sublayer:null!=o&&\"\"!==o?parseInt(o,10):null,url:{path:l}}}function h(e){const r=t(e).path.match(p);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function w(e){return(e=e.replace(/\\s*[/_]+\\s*/g,\" \"))[0].toUpperCase()+e.slice(1)}function y(e,t){const s=[];if(e){const t=d(e);r(t)&&t.title&&s.push(t.title)}if(t){const e=w(t);s.push(e)}if(2===s.length){if(s[0].toLowerCase().includes(s[1].toLowerCase()))return s[0];if(s[1].toLowerCase().includes(s[0].toLowerCase()))return s[1]}return s.join(\" - \")}function g(e){if(!e)return!1;const r=\".arcgis.com/\",t=\"//services\",s=\"//tiles\",n=\"//features\",l=(e=e.toLowerCase()).includes(r),u=e.includes(t)||e.includes(s)||e.includes(n);return l&&u}function S(e,r){return e?s(n(e,r)):e}function b(e){let{url:l}=e;if(!l)return{url:l};l=n(l,e.logger);const u=t(l),i=d(u.path);let o;if(r(i))null!=i.sublayer&&null==e.layer.layerId&&(o=i.sublayer),l=i.url.path;else if(e.nonStandardUrlAllowed){const e=h(u.path);r(e)&&(l=e.serviceUrl,o=e.sublayerId)}return{url:s(l),layerId:o}}function C(e,r,t,s,n){o(r,s,\"url\",n),s.url&&null!=e.layerId&&(s.url=l(s.url,t,e.layerId.toString()))}function I(e){if(!e)return!1;const r=e.toLowerCase(),t=r.includes(\"/services/\"),s=r.includes(\"/mapserver/wmsserver\"),n=r.includes(\"/imageserver/wmsserver\"),l=r.includes(\"/wmsserver\");return t&&(s||n||l)}function L(e){if(!e)return!1;const r=new u(i(e)).authority?.toLowerCase();return\"server.arcgisonline.com\"===r||\"services.arcgisonline.com\"===r}export{w as cleanTitle,m as isArcGISUrl,g as isHostedAgolService,L as isServerOrServicesAGOLUrl,I as isWmsServer,d as parse,h as parseNonStandardSublayerUrl,S as sanitizeUrl,b as sanitizeUrlWithLayerId,a as serverTypes,y as titleFromUrlAndName,C as writeUrlWithLayerId};\r\n"],
  "mappings": "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",
  "names": ["f", "r", "a", "t", "e", "L"]
}
