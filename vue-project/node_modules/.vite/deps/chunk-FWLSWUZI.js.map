{
  "version": 3,
  "sources": ["../../@arcgis/core/views/2d/engine/webgl/animatedFormats/apng.js", "../../@arcgis/core/views/2d/engine/webgl/animatedFormats/gif.js", "../../@arcgis/core/symbols/cim/CIMResourceManager.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{p as t}from\"../../../../../chunks/index2.js\";import{throwIfAborted as e}from\"../../../../../core/promiseUtils.js\";import{Milliseconds as o}from\"../../../../../core/time.js\";async function r(r,n){const i=t(r);if(i instanceof Error)throw i;await i.createImages(),e(n);const{frames:a,width:s,height:p}=i,c=document.createElement(\"canvas\");c.width=s,c.height=p;const l=c.getContext(\"2d\",{willReadFrequently:!0}),m=[],h=[];for(const t of a){h.push(o(t.delay||100));const e=t.imageElement;0===t.blendOp?l.globalCompositeOperation=\"copy\":l.globalCompositeOperation=\"source-over\";const r=2===t.disposeOp?l.getImageData(t.left,t.top,t.width,t.height):void 0;l.drawImage(e,t.left,t.top);const n=l.getImageData(0,0,s,p);m.push(n),0===t.disposeOp||(1===t.disposeOp?l.clearRect(t.left,t.top,t.width,t.height):2===t.disposeOp&&l.putImageData(r,t.left,t.top))}return{frameDurations:h,getFrame:t=>m[t],width:s,height:p}}const n=[137,80,78,71,13,10,26,10];function i(t){const e=new Uint8Array(t);return!n.some(((t,o)=>t!==e[o]))}function a(t){if(!i(t))return!1;const e=new DataView(t),o=new Uint8Array(t);let r,n=8;do{const t=e.getUint32(n);if(r=String.fromCharCode.apply(String,Array.prototype.slice.call(o.subarray(n+4,n+8))),\"acTL\"===r)return!0;n+=12+t}while(\"IEND\"!==r&&n<o.length);return!1}export{a as isAnimatedPNG,i as isPNG,r as parseApng};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{Milliseconds as t}from\"../../../../../core/time.js\";import{imageTypeToCanvas as e}from\"../../../../../geometry/support/meshUtils/exporters/gltf/imageutils.js\";import{p as i,d as s}from\"../../../../../chunks/index3.js\";async function n(n,a){const r=i(n),o=s(r,!0),{width:c,height:d}=r.lsd,m=document.createElement(\"canvas\");m.width=c,m.height=d;const u=m.getContext(\"2d\",{willReadFrequently:!0}),f=[],h=[];for(const i of o){h.push(t(i.delay||100));const s=new ImageData(i.patch,i.dims.width,i.dims.height),n=e(s),a=3===i.disposalType?u.getImageData(i.dims.left,i.dims.top,i.dims.width,i.dims.height):void 0;u.drawImage(n,i.dims.left,i.dims.top);const r=u.getImageData(0,0,c,d);f.push(r),1===i.disposalType||(2===i.disposalType?u.clearRect(i.dims.left,i.dims.top,i.dims.width,i.dims.height):3===i.disposalType&&u.putImageData(a,i.dims.left,i.dims.top))}return{frameDurations:h,getFrame:t=>f[t],width:c,height:d}}const a=[71,73,70];function r(t){const e=new Uint8Array(t);return!a.some(((t,i)=>t!==e[i]))}function o(t){if(!r(t))return!1;const e=new DataView(t),i=e.getUint8(10);let s=13+(128&i?3*2**(1+(7&i)):0),n=0,a=!1;for(;!a;){switch(e.getUint8(s++)){case 33:if(!o())return!1;break;case 44:c();break;case 59:a=!0;break;default:return!1}if(n>1)return!0}function o(){switch(e.getUint8(s++)){case 249:d();break;case 1:m();break;case 254:u();break;case 255:f();break;default:return!1}return!0}function c(){n++,s+=8;const t=e.getUint8(s++);s+=128&t?3*2**(1+(7&t)):0,s++,h()}function d(){s++,s+=4,h()}function m(){n++,s++,s+=12,h()}function u(){h()}function f(){s++,s+=8,s+=3,h()}function h(){let t;for(;t=e.getUint8(s++);)s+=t}return!1}export{o as isAnimatedGIF,r as isGIF,n as parseGif};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{isAbortError as r}from\"../../core/promiseUtils.js\";import{isAnimatedPNG as i,parseApng as s}from\"../../views/2d/engine/webgl/animatedFormats/apng.js\";import{isAnimatedGIF as n,parseGif as a}from\"../../views/2d/engine/webgl/animatedFormats/gif.js\";class o{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,t){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};let i=this._inFlightResourceMap.get(e);return i?i.then((e=>({width:e.width,height:e.height}))):(i=c(e,t),this._inFlightResourceMap.set(e,i),i.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}}async function h(i,s){const n=window.URL.createObjectURL(i);try{const{data:t}=await e(n,{...s,responseType:\"image\"});return t}catch(a){if(!r(a))throw new t(\"mapview-invalid-resource\",`Could not fetch requested resource at ${n}`);throw a}finally{window.URL.revokeObjectURL(n)}}async function c(e,t){const{arrayBuffer:r,mediaType:o}=await u(e,t),c=\"image/png\"===o;if(\"image/gif\"===o&&n(r))return a(r);if(c&&i(r))return s(r,t);return h(new Blob([r],{type:o}),t)}async function u(i,s){let n;const a=\";base64,\";if(i.includes(a)){const e=i.indexOf(a),t=i.indexOf(a)+a.length,r=i.substring(t),s=atob(r),o=new Uint8Array(s.length);for(let i=0;i<s.length;i++)o[i]=s.charCodeAt(i);n={arrayBuffer:o.buffer,mediaType:i.substring(0,e).replace(\"data:\",\"\")}}else try{const t=await e(i,{responseType:\"array-buffer\",...s}),r=t.data;n={arrayBuffer:r,mediaType:t.getHeader(\"Content-Type\")}}catch(o){if(!r(o))throw new t(\"mapview-invalid-resource\",`Could not fetch requested resource at ${i}`)}return n}export{o as default};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;AAIoL,eAAe,EAAEA,IAAEC,IAAE;AAAC,QAAMC,KAAE,EAAEF,EAAC;AAAE,MAAGE,cAAa;AAAM,UAAMA;AAAE,QAAMA,GAAE,aAAa,GAAE,EAAED,EAAC;AAAE,QAAK,EAAC,QAAOE,IAAE,OAAMC,IAAE,QAAO,EAAC,IAAEF,IAAEG,KAAE,SAAS,cAAc,QAAQ;AAAE,EAAAA,GAAE,QAAMD,IAAEC,GAAE,SAAO;AAAE,QAAM,IAAEA,GAAE,WAAW,MAAK,EAAC,oBAAmB,KAAE,CAAC,GAAE,IAAE,CAAC,GAAEC,KAAE,CAAC;AAAE,aAAU,KAAKH,IAAE;AAAC,IAAAG,GAAE,KAAK,EAAE,EAAE,SAAO,GAAG,CAAC;AAAE,UAAM,IAAE,EAAE;AAAa,UAAI,EAAE,UAAQ,EAAE,2BAAyB,SAAO,EAAE,2BAAyB;AAAc,UAAMN,KAAE,MAAI,EAAE,YAAU,EAAE,aAAa,EAAE,MAAK,EAAE,KAAI,EAAE,OAAM,EAAE,MAAM,IAAE;AAAO,MAAE,UAAU,GAAE,EAAE,MAAK,EAAE,GAAG;AAAE,UAAMC,KAAE,EAAE,aAAa,GAAE,GAAEG,IAAE,CAAC;AAAE,MAAE,KAAKH,EAAC,GAAE,MAAI,EAAE,cAAY,MAAI,EAAE,YAAU,EAAE,UAAU,EAAE,MAAK,EAAE,KAAI,EAAE,OAAM,EAAE,MAAM,IAAE,MAAI,EAAE,aAAW,EAAE,aAAaD,IAAE,EAAE,MAAK,EAAE,GAAG;AAAA,EAAE;AAAC,SAAM,EAAC,gBAAeM,IAAE,UAAS,OAAG,EAAE,CAAC,GAAE,OAAMF,IAAE,QAAO,EAAC;AAAC;AAAC,IAAMH,KAAE,CAAC,KAAI,IAAG,IAAG,IAAG,IAAG,IAAG,IAAG,EAAE;AAAE,SAASC,GAAE,GAAE;AAAC,QAAM,IAAE,IAAI,WAAW,CAAC;AAAE,SAAM,CAACD,GAAE,KAAM,CAACM,IAAEC,OAAID,OAAI,EAAEC,EAAC,CAAE;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,MAAG,CAACN,GAAE,CAAC;AAAE,WAAM;AAAG,QAAM,IAAE,IAAI,SAAS,CAAC,GAAEM,KAAE,IAAI,WAAW,CAAC;AAAE,MAAIR,IAAEC,KAAE;AAAE,KAAE;AAAC,UAAMM,KAAE,EAAE,UAAUN,EAAC;AAAE,QAAGD,KAAE,OAAO,aAAa,MAAM,QAAO,MAAM,UAAU,MAAM,KAAKQ,GAAE,SAASP,KAAE,GAAEA,KAAE,CAAC,CAAC,CAAC,GAAE,WAASD;AAAE,aAAM;AAAG,IAAAC,MAAG,KAAGM;AAAA,EAAC,SAAO,WAASP,MAAGC,KAAEO,GAAE;AAAQ,SAAM;AAAE;;;ACAniC,eAAeC,GAAEA,IAAEC,IAAE;AAAC,QAAMC,KAAE,EAAEF,EAAC,GAAEG,KAAE,EAAED,IAAE,IAAE,GAAE,EAAC,OAAME,IAAE,QAAO,EAAC,IAAEF,GAAE,KAAI,IAAE,SAAS,cAAc,QAAQ;AAAE,IAAE,QAAME,IAAE,EAAE,SAAO;AAAE,QAAMC,KAAE,EAAE,WAAW,MAAK,EAAC,oBAAmB,KAAE,CAAC,GAAEC,KAAE,CAAC,GAAEC,KAAE,CAAC;AAAE,aAAUC,MAAKL,IAAE;AAAC,IAAAI,GAAE,KAAK,EAAEC,GAAE,SAAO,GAAG,CAAC;AAAE,UAAMC,KAAE,IAAI,UAAUD,GAAE,OAAMA,GAAE,KAAK,OAAMA,GAAE,KAAK,MAAM,GAAER,KAAE,EAAES,EAAC,GAAER,KAAE,MAAIO,GAAE,eAAaH,GAAE,aAAaG,GAAE,KAAK,MAAKA,GAAE,KAAK,KAAIA,GAAE,KAAK,OAAMA,GAAE,KAAK,MAAM,IAAE;AAAO,IAAAH,GAAE,UAAUL,IAAEQ,GAAE,KAAK,MAAKA,GAAE,KAAK,GAAG;AAAE,UAAMN,KAAEG,GAAE,aAAa,GAAE,GAAED,IAAE,CAAC;AAAE,IAAAE,GAAE,KAAKJ,EAAC,GAAE,MAAIM,GAAE,iBAAe,MAAIA,GAAE,eAAaH,GAAE,UAAUG,GAAE,KAAK,MAAKA,GAAE,KAAK,KAAIA,GAAE,KAAK,OAAMA,GAAE,KAAK,MAAM,IAAE,MAAIA,GAAE,gBAAcH,GAAE,aAAaJ,IAAEO,GAAE,KAAK,MAAKA,GAAE,KAAK,GAAG;AAAA,EAAE;AAAC,SAAM,EAAC,gBAAeD,IAAE,UAAS,OAAGD,GAAE,CAAC,GAAE,OAAMF,IAAE,QAAO,EAAC;AAAC;AAAC,IAAMH,KAAE,CAAC,IAAG,IAAG,EAAE;AAAE,SAASC,GAAE,GAAE;AAAC,QAAM,IAAE,IAAI,WAAW,CAAC;AAAE,SAAM,CAACD,GAAE,KAAM,CAACS,IAAEF,OAAIE,OAAI,EAAEF,EAAC,CAAE;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,MAAG,CAACN,GAAE,CAAC;AAAE,WAAM;AAAG,QAAM,IAAE,IAAI,SAAS,CAAC,GAAEM,KAAE,EAAE,SAAS,EAAE;AAAE,MAAIC,KAAE,MAAI,MAAID,KAAE,IAAE,MAAI,KAAG,IAAEA,OAAI,IAAGR,KAAE,GAAEC,KAAE;AAAG,SAAK,CAACA,MAAG;AAAC,YAAO,EAAE,SAASQ,IAAG,GAAE;AAAA,MAAC,KAAK;AAAG,YAAG,CAACN,GAAE;AAAE,iBAAM;AAAG;AAAA,MAAM,KAAK;AAAG,QAAAC,GAAE;AAAE;AAAA,MAAM,KAAK;AAAG,QAAAH,KAAE;AAAG;AAAA,MAAM;AAAQ,eAAM;AAAA,IAAE;AAAC,QAAGD,KAAE;AAAE,aAAM;AAAA,EAAE;AAAC,WAASG,KAAG;AAAC,YAAO,EAAE,SAASM,IAAG,GAAE;AAAA,MAAC,KAAK;AAAI,UAAE;AAAE;AAAA,MAAM,KAAK;AAAE,UAAE;AAAE;AAAA,MAAM,KAAK;AAAI,QAAAJ,GAAE;AAAE;AAAA,MAAM,KAAK;AAAI,QAAAC,GAAE;AAAE;AAAA,MAAM;AAAQ,eAAM;AAAA,IAAE;AAAC,WAAM;AAAA,EAAE;AAAC,WAASF,KAAG;AAAC,IAAAJ,MAAIS,MAAG;AAAE,UAAMC,KAAE,EAAE,SAASD,IAAG;AAAE,IAAAA,MAAG,MAAIC,KAAE,IAAE,MAAI,KAAG,IAAEA,OAAI,GAAED,MAAIF,GAAE;AAAA,EAAC;AAAC,WAAS,IAAG;AAAC,IAAAE,MAAIA,MAAG,GAAEF,GAAE;AAAA,EAAC;AAAC,WAAS,IAAG;AAAC,IAAAP,MAAIS,MAAIA,MAAG,IAAGF,GAAE;AAAA,EAAC;AAAC,WAASF,KAAG;AAAC,IAAAE,GAAE;AAAA,EAAC;AAAC,WAASD,KAAG;AAAC,IAAAG,MAAIA,MAAG,GAAEA,MAAG,GAAEF,GAAE;AAAA,EAAC;AAAC,WAASA,KAAG;AAAC,QAAIG;AAAE,WAAKA,KAAE,EAAE,SAASD,IAAG;AAAG,MAAAA,MAAGC;AAAA,EAAC;AAAC,SAAM;AAAE;;;ACAryC,IAAMC,KAAN,MAAO;AAAA,EAAC,cAAa;AAAC,SAAK,eAAa,oBAAI,OAAI,KAAK,uBAAqB,oBAAI,OAAI,KAAK,iBAAe,MAAK,KAAK,wBAAsB;AAAA,EAAI;AAAA,EAAC,UAAS;AAAC,SAAK,qBAAqB,MAAM,GAAE,KAAK,aAAa,MAAM;AAAA,EAAC;AAAA,EAAC,YAAY,GAAE;AAAC,WAAO,KAAK,aAAa,IAAI,CAAC,KAAG;AAAA,EAAI;AAAA,EAAC,MAAM,cAAc,GAAE,GAAE;AAAC,UAAMC,KAAE,KAAK,aAAa,IAAI,CAAC;AAAE,QAAGA;AAAE,aAAM,EAAC,OAAMA,GAAE,OAAM,QAAOA,GAAE,OAAM;AAAE,QAAIC,KAAE,KAAK,qBAAqB,IAAI,CAAC;AAAE,WAAOA,KAAEA,GAAE,KAAM,CAAAC,QAAI,EAAC,OAAMA,GAAE,OAAM,QAAOA,GAAE,OAAM,EAAG,KAAGD,KAAEE,GAAE,GAAE,CAAC,GAAE,KAAK,qBAAqB,IAAI,GAAEF,EAAC,GAAEA,GAAE,KAAM,CAAAG,QAAI,KAAK,qBAAqB,OAAO,CAAC,GAAE,KAAK,aAAa,IAAI,GAAEA,EAAC,GAAE,EAAC,OAAMA,GAAE,OAAM,QAAOA,GAAE,OAAM,IAAK,OAAK,EAAC,OAAM,GAAE,QAAO,EAAC,EAAG;AAAA,EAAE;AAAA,EAAC,eAAe,GAAE;AAAC,SAAK,qBAAqB,OAAO,CAAC,GAAE,KAAK,aAAa,OAAO,CAAC;AAAA,EAAC;AAAC;AAAC,eAAe,EAAEH,IAAEI,IAAE;AAAC,QAAMC,KAAE,OAAO,IAAI,gBAAgBL,EAAC;AAAE,MAAG;AAAC,UAAK,EAAC,MAAK,EAAC,IAAE,MAAM,EAAEK,IAAE,EAAC,GAAGD,IAAE,cAAa,QAAO,CAAC;AAAE,WAAO;AAAA,EAAC,SAAOE,IAAN;AAAS,QAAG,CAAC,EAAEA,EAAC;AAAE,YAAM,IAAI,EAAE,4BAA2B,yCAAyCD,IAAG;AAAE,UAAMC;AAAA,EAAC,UAAC;AAAQ,WAAO,IAAI,gBAAgBD,EAAC;AAAA,EAAC;AAAC;AAAC,eAAeH,GAAE,GAAE,GAAE;AAAC,QAAK,EAAC,aAAYH,IAAE,WAAUD,GAAC,IAAE,MAAM,EAAE,GAAE,CAAC,GAAEI,KAAE,gBAAcJ;AAAE,MAAG,gBAAcA,MAAG,EAAEC,EAAC;AAAE,WAAOM,GAAEN,EAAC;AAAE,MAAGG,MAAG,EAAEH,EAAC;AAAE,WAAO,EAAEA,IAAE,CAAC;AAAE,SAAO,EAAE,IAAI,KAAK,CAACA,EAAC,GAAE,EAAC,MAAKD,GAAC,CAAC,GAAE,CAAC;AAAC;AAAC,eAAe,EAAEE,IAAEI,IAAE;AAAC,MAAIC;AAAE,QAAMC,KAAE;AAAW,MAAGN,GAAE,SAASM,EAAC,GAAE;AAAC,UAAM,IAAEN,GAAE,QAAQM,EAAC,GAAE,IAAEN,GAAE,QAAQM,EAAC,IAAEA,GAAE,QAAOP,KAAEC,GAAE,UAAU,CAAC,GAAEI,KAAE,KAAKL,EAAC,GAAED,KAAE,IAAI,WAAWM,GAAE,MAAM;AAAE,aAAQJ,KAAE,GAAEA,KAAEI,GAAE,QAAOJ;AAAI,MAAAF,GAAEE,EAAC,IAAEI,GAAE,WAAWJ,EAAC;AAAE,IAAAK,KAAE,EAAC,aAAYP,GAAE,QAAO,WAAUE,GAAE,UAAU,GAAE,CAAC,EAAE,QAAQ,SAAQ,EAAE,EAAC;AAAA,EAAC;AAAM,QAAG;AAAC,YAAM,IAAE,MAAM,EAAEA,IAAE,EAAC,cAAa,gBAAe,GAAGI,GAAC,CAAC,GAAEL,KAAE,EAAE;AAAK,MAAAM,KAAE,EAAC,aAAYN,IAAE,WAAU,EAAE,UAAU,cAAc,EAAC;AAAA,IAAC,SAAOD,IAAN;AAAS,UAAG,CAAC,EAAEA,EAAC;AAAE,cAAM,IAAI,EAAE,4BAA2B,yCAAyCE,IAAG;AAAA,IAAC;AAAC,SAAOK;AAAC;",
  "names": ["r", "n", "i", "a", "s", "c", "h", "t", "o", "n", "a", "r", "o", "c", "u", "f", "h", "i", "s", "t", "o", "r", "i", "e", "c", "t", "s", "n", "a"]
}
